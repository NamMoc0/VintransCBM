# Documenting the project
_Exported on 11/22/2025 at 21:20:53 GMT+7 from Cursor (2.0.77)_

---

**User**

doc du an

---

**Cursor**

ƒêang kh√°m ph√° c·∫•u tr√∫c d·ª± √°n v√† ƒë·ªçc c√°c file quan tr·ªçng.


ƒêang ƒë·ªçc c√°c file quan tr·ªçng ƒë·ªÉ hi·ªÉu d·ª± √°n.


ƒêang ƒë·ªçc th√™m c√°c file CSS ƒë·ªÉ hi·ªÉu ƒë·∫ßy ƒë·ªß d·ª± √°n.


## T√ìM T·∫ÆT D·ª∞ √ÅN VINTRANSCBM

### T·ªïng quan
VinTransCBM l√† ·ª©ng d·ª•ng web t√≠nh to√°n CBM (Cubic Meter) v√† c∆∞·ªõc ph√≠ v·∫≠n chuy·ªÉn cho ng√†nh logistics. Phi√™n b·∫£n web ƒë·ªìng b·ªô v·ªõi Android app, ch·∫°y offline, kh√¥ng c·∫ßn API key.

### C·∫•u tr√∫c d·ª± √°n
```
Web_VintransCBM-main/
‚îú‚îÄ‚îÄ index.html          # Giao di·ªán ch√≠nh (HTML)
‚îú‚îÄ‚îÄ script.js           # Logic & t√≠nh to√°n (1920 d√≤ng)
‚îú‚îÄ‚îÄ style-new.css       # Styling ch√≠nh
‚îú‚îÄ‚îÄ settings.css        # Styling cho tab C√†i ƒë·∫∑t
‚îú‚îÄ‚îÄ package.json        # NPM config (minimal)
‚îú‚îÄ‚îÄ README.md           # T√†i li·ªáu ti·∫øng Vi·ªát
‚îú‚îÄ‚îÄ CHANGELOG.md        # L·ªãch s·ª≠ thay ƒë·ªïi
‚îú‚îÄ‚îÄ SECURITY.md         # Ch√≠nh s√°ch b·∫£o m·∫≠t
‚îî‚îÄ‚îÄ robots.txt          # Bot control
```

### T√≠nh nƒÉng ch√≠nh

#### 1. T√≠nh to√°n CBM
- Nh·∫≠p: D√†i √ó R·ªông √ó Cao √ó S·ªë ki·ªán
- T·ª± ƒë·ªông t√≠nh:
  - CBM (Kh·ªëi)
  - Kg ƒê∆∞·ªùng B·ªô (√∑ 4000)
  - Kg VIN-ECO (gi·ªëng ƒê∆∞·ªùng B·ªô)
  - Kg CPN (√∑ 6000)
  - Kg H·ªèa T·ªëc (gi·ªëng CPN)
- H·ªó tr·ª£ nhi·ªÅu l√¥ h√†ng (groups)
- N√∫t ƒëi·ªÅu khi·ªÉn: Quay L·∫°i, Bi·∫øn Tr∆∞·ªõc, X√≥a T·∫•t C·∫£

#### 2. L·ªãch s·ª≠ n√¢ng cao
- Ph√¢n trang: 25 m·ª•c/trang
- T√¨m ki·∫øm theo ng√†y (dd/MM/yyyy)
- X√≥a linh ho·∫°t: t·∫•t c·∫£ ho·∫∑c theo th√°ng
- Format hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß th√¥ng tin

#### 3. Ki·ªÉm tra t·ªânh
- Nh·∫≠p t√™n t·ªânh (c√≥/kh√¥ng d·∫•u)
- K·∫øt qu·∫£: H√†ng Bay ho·∫∑c H√†ng B·ªô
- H·ªó tr·ª£ 63 t·ªânh th√†nh Vi·ªát Nam
- T·ª± ƒë·ªông lo·∫°i b·ªè d·∫•u khi t√¨m

#### 4. T√≠nh c∆∞·ªõc ph√≠ (Shipping Calculator)
- Ch·ªçn T·ªânh/Th√†nh ph·ªë ‚Üí Qu·∫≠n/Huy·ªán
- Nh·∫≠p tr·ªçng l∆∞·ª£ng (kg)
- T√≠nh 4 d·ªãch v·ª•:
  - VIN-TRUCK (ƒê∆∞·ªùng B·ªô)
  - VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
  - VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
  - VIN-HOATOC (H·ªèa T·ªëc)
- Hi·ªÉn th·ªã chi ti·∫øt: gi√° c∆° s·ªü, ph·ª• ph√≠ v√πng xa, ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%), t·ªïng c∆∞·ªõc, th·ªùi gian giao h√†ng
- B·∫£ng so s√°nh d·ªãch v·ª•

#### 5. C√†i ƒë·∫∑t giao di·ªán
- Ch·ªß ƒë·ªÅ: S√°ng/T·ªëi
- K√≠ch th∆∞·ªõc: Si√™u nh·ªè/Nh·ªè/V·ª´a/L·ªõn
- C·ª° ch·ªØ tab: Si√™u nh·ªè/Nh·ªè/V·ª´a/L·ªõn
- Hi·ªáu ·ª©ng: B·∫≠t/T·∫Øt chuy·ªÉn ƒë·ªông m∆∞·ª£t
- Kh√¥i ph·ª•c m·∫∑c ƒë·ªãnh

### C√¥ng ngh·ªá s·ª≠ d·ª•ng
- HTML5, CSS3, JavaScript (ES6+)
- LocalStorage (l∆∞u d·ªØ li·ªáu local)
- Responsive (mobile-first)
- Kh√¥ng c·∫ßn build tools, kh√¥ng dependencies
- Offline-first

### B·∫£o m·∫≠t
- Security headers (CSP, X-Frame-Options, HSTS)
- Input sanitization (ch·ªëng XSS)
- HTTPS only
- Kh√¥ng l∆∞u d·ªØ li·ªáu nh·∫°y c·∫£m

### Giao di·ªán
- Mobile-first, responsive
- Dark mode
- Hamburger menu (auto-hide sau 2s)
- Sidebar navigation (desktop)
- Bottom navigation (mobile)
- Animations m∆∞·ª£t

### L∆∞u tr·ªØ d·ªØ li·ªáu
- LocalStorage keys:
  - `vinTransCBMHistory` - L·ªãch s·ª≠ t√≠nh to√°n
  - `vinTransCBMGroups` - C√°c nh√≥m ƒë√£ ho√†n th√†nh
  - `vinTransCBMTheme` - Ch·ªß ƒë·ªÅ (light/dark)
  - `vinTransCBMSize` - K√≠ch th∆∞·ªõc giao di·ªán
  - `vinTransCBMAnimations` - B·∫≠t/t·∫Øt animations
  - `vinTransCBMTabSize` - C·ª° ch·ªØ tab

### C√¥ng th·ª©c t√≠nh to√°n
```
CBM = (D√†i √ó R·ªông √ó Cao √ó S·ªë ki·ªán) √∑ 3000 √∑ 333
Kg ƒê∆∞·ªùng B·ªô = (D√†i √ó R·ªông √ó Cao) √∑ 4000 √ó S·ªë ki·ªán
Kg VIN-ECO = Kg ƒê∆∞·ªùng B·ªô
Kg CPN = (D√†i √ó R·ªông √ó Cao) √∑ 6000 √ó S·ªë ki·ªán
Kg H·ªèa T·ªëc = Kg CPN
```

### Phi√™n b·∫£n
- Version: 2.0.0
- Platform: Web (HTML/CSS/JS)
- License: Private
- Last Security Audit: 2024-11-20

### ƒê·∫∑c ƒëi·ªÉm n·ªïi b·∫≠t
1. 100% offline, kh√¥ng c·∫ßn internet
2. Kh√¥ng c·∫ßn API key
3. Mobile-friendly
4. B·∫£o m·∫≠t t·ªët (security headers, input sanitization)
5. UI/UX hi·ªán ƒë·∫°i (dark mode, animations)
6. T√≠nh nƒÉng ƒë·∫ßy ƒë·ªß (CBM, L·ªãch s·ª≠, Ki·ªÉm tra t·ªânh, T√≠nh c∆∞·ªõc ph√≠)

D·ª± √°n ƒë√£ ho√†n ch·ªânh, s·∫µn s√†ng s·ª≠ d·ª•ng. B·∫°n mu·ªën t√¥i l√†m g√¨ ti·∫øp theo v·ªõi d·ª± √°n n√†y?

```plaintext
Web_VintransCBM-main/
‚îú‚îÄ‚îÄ index.html          # Giao di·ªán ch√≠nh (HTML)
‚îú‚îÄ‚îÄ script.js           # Logic & t√≠nh to√°n (1920 d√≤ng)
‚îú‚îÄ‚îÄ style-new.css       # Styling ch√≠nh
‚îú‚îÄ‚îÄ settings.css        # Styling cho tab C√†i ƒë·∫∑t
‚îú‚îÄ‚îÄ package.json        # NPM config (minimal)
‚îú‚îÄ‚îÄ README.md           # T√†i li·ªáu ti·∫øng Vi·ªát
‚îú‚îÄ‚îÄ CHANGELOG.md        # L·ªãch s·ª≠ thay ƒë·ªïi
‚îú‚îÄ‚îÄ SECURITY.md         # Ch√≠nh s√°ch b·∫£o m·∫≠t
‚îî‚îÄ‚îÄ robots.txt          # Bot control
```

```plaintext
CBM = (D√†i √ó R·ªông √ó Cao √ó S·ªë ki·ªán) √∑ 3000 √∑ 333
Kg ƒê∆∞·ªùng B·ªô = (D√†i √ó R·ªông √ó Cao) √∑ 4000 √ó S·ªë ki·ªán
Kg VIN-ECO = Kg ƒê∆∞·ªùng B·ªô
Kg CPN = (D√†i √ó R·ªông √ó Cao) √∑ 6000 √ó S·ªë ki·ªán
Kg H·ªèa T·ªëc = Kg CPN
```

---

**User**

ki·ªÉm tra v√† ghi ra c√¥ng th·ª©c t√≠nh ti√°n c·ªßa tap t√≠nh c∆∞·ªõc ph√≠

---

**Cursor**

ƒêang ki·ªÉm tra v√† ghi l·∫°i c√¥ng th·ª©c t√≠nh ti·ªÅn c·ªßa tab T√≠nh C∆∞·ªõc Ph√≠. ƒêang xem l·∫°i ph·∫ßn code t√≠nh to√°n.


ƒêang t·∫°o file t√†i li·ªáu ghi l·∫°i c√¥ng th·ª©c t√≠nh ti·ªÅn c·ªßa tab T√≠nh C∆∞·ªõc Ph√≠.


```markdown
# üìã C√îNG TH·ª®C T√çNH C∆Ø·ªöC PH√ç - TAB T√çNH C∆Ø·ªöC PH√ç

## üéØ T·ªîNG QUAN

Tab **T√≠nh C∆∞·ªõc Ph√≠** t√≠nh to√°n c∆∞·ªõc v·∫≠n chuy·ªÉn cho 4 d·ªãch v·ª•:
1. **VIN-TRUCK** (ƒê∆∞·ªùng B·ªô) üöõ
2. **VIN-ECO** (Ti·∫øt Ki·ªám) üöê - T·ªëi thi·ªÉu 30kg
3. **VIN-EXPRESS** (Chuy·ªÉn Ph√°t Nhanh) ‚úàÔ∏è
4. **VIN-HOATOC** (H·ªèa T·ªëc) üöÄ

---

## üìä C√îNG TH·ª®C T·ªîNG QU√ÅT

### C√¥ng th·ª©c chung cho t·∫•t c·∫£ d·ªãch v·ª•:

```
T·ªîNG C∆Ø·ªöC = (Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn) + Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT

Trong ƒë√≥:
- Gi√° C∆° S·ªü = T√≠nh theo b·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng v√† v√πng
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0% (n·∫øu n·ªôi tuy·∫øn) ho·∫∑c 10-30% (n·∫øu ngo·∫°i tuy·∫øn)
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 20% c·ªßa (Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn)
```

---

## üöõ 1. VIN-TRUCK (ƒê∆∞·ªùng B·ªô)

### B·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng (VNƒê):

| Tr·ªçng l∆∞·ª£ng | V√πng 0 (N·ªôi T·ªânh) | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|------------|-------------------|--------|--------|--------|--------|--------|--------|--------|--------|
| ‚â§10kg | 50,000 | 70,000 | 90,000 | 100,000 | 110,000 | 120,000 | 125,000 | 140,000 | 180,000 |
| >10-50kg (m·ªói kg) | 2,900 | 3,500 | 4,500 | 4,700 | 4,900 | 5,400 | 5,500 | 5,900 | 9,200 |
| >50-100kg (m·ªói kg) | 2,700 | 3,400 | 4,200 | 4,500 | 4,700 | 5,200 | 5,200 | 5,700 | 9,000 |
| >100-300kg (m·ªói kg) | 2,400 | 3,200 | 3,700 | 4,100 | 4,500 | 5,000 | 5,000 | 5,400 | 8,500 |
| >300-500kg (m·ªói kg) | 2,200 | 2,600 | 3,200 | 3,900 | 4,300 | 4,500 | 4,700 | 5,000 | 8,300 |
| >500-1000kg (m·ªói kg) | 1,700 | 2,400 | 2,800 | 3,700 | 4,000 | 4,200 | 4,300 | 4,700 | 7,500 |
| >1000-2000kg (m·ªói kg) | 1,200 | 1,900 | 2,500 | 3,400 | 3,800 | 3,900 | 4,100 | 4,600 | 6,000 |
| >2000kg (m·ªói kg) | 1,000 | 1,700 | 2,000 | 3,000 | 3,600 | 3,600 | 4,000 | 4,300 | 5,700 |

### C√¥ng th·ª©c t√≠nh Gi√° C∆° S·ªü:

```
N·∫øu kg ‚â§ 10:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng]

N·∫øu 10 < kg ‚â§ 50:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + (kg - 10) √ó B·∫£ng gi√° [50][v√πng]

N·∫øu 50 < kg ‚â§ 100:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + (kg - 50) √ó B·∫£ng gi√° [100][v√πng]

N·∫øu 100 < kg ‚â§ 300:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + (kg - 100) √ó B·∫£ng gi√° [300][v√πng]

N·∫øu 300 < kg ‚â§ 500:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + 200 √ó B·∫£ng gi√° [300][v√πng] + (kg - 300) √ó B·∫£ng gi√° [500][v√πng]

N·∫øu 500 < kg ‚â§ 1000:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + 200 √ó B·∫£ng gi√° [300][v√πng] + 200 √ó B·∫£ng gi√° [500][v√πng] + (kg - 500) √ó B·∫£ng gi√° [1000][v√πng]

N·∫øu 1000 < kg ‚â§ 2000:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + 200 √ó B·∫£ng gi√° [300][v√πng] + 200 √ó B·∫£ng gi√° [500][v√πng] + 500 √ó B·∫£ng gi√° [1000][v√πng] + (kg - 1000) √ó B·∫£ng gi√° [2000][v√πng]

N·∫øu kg > 2000:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + 200 √ó B·∫£ng gi√° [300][v√πng] + 200 √ó B·∫£ng gi√° [500][v√πng] + 500 √ó B·∫£ng gi√° [1000][v√πng] + 1000 √ó B·∫£ng gi√° [2000][v√πng] + (kg - 2000) √ó B·∫£ng gi√° [max][v√πng]
```

### V√≠ d·ª• t√≠nh to√°n:

**V√≠ d·ª• 1:** 25kg, V√πng 1, N·ªôi tuy·∫øn
- Gi√° C∆° S·ªü = 70,000 + (25 - 10) √ó 3,500 = 70,000 + 52,500 = **122,500 ƒë**
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0 (n·ªôi tuy·∫øn)
- Tr∆∞·ªõc Thu·∫ø VAT = 122,500 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 122,500 √ó 20% = **24,500 ƒë**
- **T·ªîNG C∆Ø·ªöC = 122,500 + 24,500 = 147,000 ƒë**

**V√≠ d·ª• 2:** 150kg, V√πng 2, Ngo·∫°i tuy·∫øn
- Gi√° C∆° S·ªü = 90,000 + 40 √ó 4,500 + 50 √ó 4,200 + (150 - 100) √ó 3,700 = 90,000 + 180,000 + 210,000 + 185,000 = **665,000 ƒë**
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 665,000 √ó 20% = **133,000 ƒë** (v√¨ 100 < kg < 200)
- Tr∆∞·ªõc Thu·∫ø VAT = 665,000 + 133,000 = 798,000 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 798,000 √ó 20% = **159,600 ƒë**
- **T·ªîNG C∆Ø·ªöC = 798,000 + 159,600 = 957,600 ƒë**

---

## üöê 2. VIN-ECO (Ti·∫øt Ki·ªám)

### ‚ö†Ô∏è L∆ØU √ù: Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg

### B·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng (VNƒê):

| Tr·ªçng l∆∞·ª£ng | V√πng 0 (N·ªôi T·ªânh) | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|------------|-------------------|--------|--------|--------|--------|--------|--------|--------|--------|
| ‚â§10kg | 66,000 | 100,000 | 109,000 | 170,000 | 180,000 | 180,000 | 180,000 | 190,000 | 200,000 |
| >10-50kg (m·ªói kg) | 3,200 | 4,700 | 7,200 | 7,800 | 8,500 | 10,300 | 16,000 | 17,000 | 19,000 |
| >50-100kg (m·ªói kg) | 3,100 | 4,300 | 6,900 | 7,500 | 8,200 | 10,000 | 15,000 | 16,000 | 18,000 |
| >100-300kg (m·ªói kg) | 3,000 | 3,800 | 5,500 | 6,900 | 7,400 | 8,000 | 14,000 | 15,000 | 16,500 |
| >300-500kg (m·ªói kg) | 2,500 | 3,500 | 4,900 | 6,500 | 6,500 | 7,100 | 12,500 | 13,500 | 15,000 |
| >500-1000kg (m·ªói kg) | 2,100 | 2,900 | 4,000 | 5,600 | 5,900 | 6,500 | 10,000 | 11,000 | 13,000 |
| >1000-2000kg (m·ªói kg) | 1,500 | 2,100 | 2,800 | 3,800 | 5,500 | 6,100 | 8,500 | 10,000 | 12,000 |
| >2000kg (m·ªói kg) | 1,200 | 1,900 | 2,200 | 3,300 | 5,000 | 5,600 | 7,500 | 8,000 | 10,500 |

### C√¥ng th·ª©c t√≠nh Gi√° C∆° S·ªü:

**Gi·ªëng VIN-TRUCK** (√°p d·ª•ng c√¥ng th·ª©c b·∫≠c thang t∆∞∆°ng t·ª±)

### V√≠ d·ª• t√≠nh to√°n:

**V√≠ d·ª•:** 50kg, V√πng 1, N·ªôi tuy·∫øn
- Gi√° C∆° S·ªü = 100,000 + (50 - 10) √ó 4,700 = 100,000 + 188,000 = **288,000 ƒë**
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0 (n·ªôi tuy·∫øn)
- Tr∆∞·ªõc Thu·∫ø VAT = 288,000 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 288,000 √ó 20% = **57,600 ƒë**
- **T·ªîNG C∆Ø·ªöC = 288,000 + 57,600 = 345,600 ƒë**

---

## ‚úàÔ∏è 3. VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)

### B·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng (VNƒê):

| Tr·ªçng l∆∞·ª£ng | V√πng 0 (N·ªôi T·ªânh) | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|------------|-------------------|--------|--------|--------|--------|--------|--------|--------|--------|
| ‚â§1kg | 24,700 | 40,300 | 45,500 | 48,100 | 52,000 | 57,400 | 61,500 | 63,000 | 73,000 |
| ‚â§2kg | 29,000 | 55,900 | 61,100 | 66,300 | 76,700 | 82,600 | 88,500 | 96,000 | 102,000 |
| M·ªói 0.5kg ti·∫øp theo | 2,500 | 3,900 | 5,000 | 8,000 | 10,000 | 12,000 | 12,500 | 13,000 | 14,000 |

### C√¥ng th·ª©c t√≠nh Gi√° C∆° S·ªü:

```
N·∫øu kg ‚â§ 1:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [1][v√πng]

N·∫øu 1 < kg ‚â§ 2:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [2][v√πng]

N·∫øu kg > 2:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [2][v√πng] + Math.ceil((kg - 2) / 0.5) √ó B·∫£ng gi√° [step][v√πng]
    
    Trong ƒë√≥: Math.ceil((kg - 2) / 0.5) = S·ªë b∆∞·ªõc 0.5kg v∆∞·ª£t qu√° 2kg (l√†m tr√≤n l√™n)
```

### V√≠ d·ª• t√≠nh to√°n:

**V√≠ d·ª• 1:** 0.8kg, V√πng 1, N·ªôi tuy·∫øn
- Gi√° C∆° S·ªü = **40,300 ƒë** (‚â§1kg)
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0 (n·ªôi tuy·∫øn)
- Tr∆∞·ªõc Thu·∫ø VAT = 40,300 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 40,300 √ó 20% = **8,060 ƒë**
- **T·ªîNG C∆Ø·ªöC = 40,300 + 8,060 = 48,360 ƒë**

**V√≠ d·ª• 2:** 3.2kg, V√πng 2, Ngo·∫°i tuy·∫øn
- Gi√° C∆° S·ªü = 61,100 + Math.ceil((3.2 - 2) / 0.5) √ó 5,000 = 61,100 + Math.ceil(2.4) √ó 5,000 = 61,100 + 3 √ó 5,000 = **76,100 ƒë**
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 76,100 √ó 30% = **22,830 ƒë** (v√¨ kg < 100)
- Tr∆∞·ªõc Thu·∫ø VAT = 76,100 + 22,830 = 98,930 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 98,930 √ó 20% = **19,786 ƒë**
- **T·ªîNG C∆Ø·ªöC = 98,930 + 19,786 = 118,716 ƒë**

---

## üöÄ 4. VIN-HOATOC (H·ªèa T·ªëc)

### B·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng (VNƒê):

| Tr·ªçng l∆∞·ª£ng | V√πng 0 (N·ªôi T·ªânh) | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|------------|-------------------|--------|--------|--------|--------|--------|--------|--------|--------|
| ‚â§2kg | 50,000 | 89,700 | 91,000 | 93,600 | 100,100 | 120,000 | 120,000 | 153,000 | 170,000 |
| M·ªói 0.5kg ti·∫øp theo | 4,000 | 5,000 | 6,000 | 10,450 | 10,450 | 13,500 | 13,700 | 13,750 | 17,000 |

### C√¥ng th·ª©c t√≠nh Gi√° C∆° S·ªü:

```
N·∫øu kg ‚â§ 2:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [2][v√πng]

N·∫øu kg > 2:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [2][v√πng] + Math.ceil((kg - 2) / 0.5) √ó B·∫£ng gi√° [step][v√πng]
    
    Trong ƒë√≥: Math.ceil((kg - 2) / 0.5) = S·ªë b∆∞·ªõc 0.5kg v∆∞·ª£t qu√° 2kg (l√†m tr√≤n l√™n)
```

### V√≠ d·ª• t√≠nh to√°n:

**V√≠ d·ª•:** 1.5kg, V√πng 1, N·ªôi tuy·∫øn
- Gi√° C∆° S·ªü = **89,700 ƒë** (‚â§2kg)
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0 (n·ªôi tuy·∫øn)
- Tr∆∞·ªõc Thu·∫ø VAT = 89,700 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 89,700 √ó 20% = **17,940 ƒë**
- **T·ªîNG C∆Ø·ªöC = 89,700 + 17,940 = 107,640 ƒë**

---

## üí∞ PH·ª§ PH√ç NGO·∫†I TUY·∫æN

### C√¥ng th·ª©c:

```
N·∫øu lo·∫°i tuy·∫øn = "N·ªôi tuy·∫øn" (noi):
    Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0

N·∫øu lo·∫°i tuy·∫øn = "Ngo·∫°i tuy·∫øn" (ngoai):
    N·∫øu kg < 100:
        Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = Gi√° C∆° S·ªü √ó 30%
    N·∫øu 100 ‚â§ kg < 200:
        Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = Gi√° C∆° S·ªü √ó 20%
    N·∫øu kg ‚â• 200:
        Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = Gi√° C∆° S·ªü √ó 10%
```

### V√≠ d·ª•:

- **50kg, Ngo·∫°i tuy·∫øn:** Ph·ª• ph√≠ = Gi√° C∆° S·ªü √ó 30%
- **150kg, Ngo·∫°i tuy·∫øn:** Ph·ª• ph√≠ = Gi√° C∆° S·ªü √ó 20%
- **250kg, Ngo·∫°i tuy·∫øn:** Ph·ª• ph√≠ = Gi√° C∆° S·ªü √ó 10%

---

## ‚õΩ PH·ª§ PH√ç XƒÇNG D·∫¶U & VAT

### C√¥ng th·ª©c:

```
Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = (Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn) √ó 20%

L√†m tr√≤n: Math.round()
```

---

## üìç PH√ÇN V√ôNG

### 9 V√πng (0-8):

- **V√πng 0 (N·ªôi T·ªânh):** TP.HCM
- **V√πng 1:** B√¨nh D∆∞∆°ng, ƒê·ªìng Nai, Long An
- **V√πng 2:** B√† R·ªãa - V≈©ng T√†u, B√¨nh Ph∆∞·ªõc, T√¢y Ninh, B√¨nh Thu·∫≠n, Ti·ªÅn Giang, B·∫øn Tre, Vƒ©nh Long, C·∫ßn Th∆°, ƒê·ªìng Th√°p, Tr√† Vinh
- **V√πng 3:** An Giang, Ki√™n Giang, H·∫≠u Giang, C√† Mau, S√≥c TrƒÉng, B·∫°c Li√™u, Ninh Thu·∫≠n
- **V√πng 4:** Kh√°nh H√≤a, B√¨nh ƒê·ªãnh, Ph√∫ Y√™n, L√¢m ƒê·ªìng, ƒê·∫Øk N√¥ng, ƒê·∫Øk L·∫Øk
- **V√πng 5:** Kon Tum, Gia Lai, Hu·∫ø, Qu·∫£ng Ng√£i, ƒê√† N·∫µng, Qu·∫£ng Nam
- **V√πng 6:** Ngh·ªá An, H√† Tƒ©nh, Qu·∫£ng B√¨nh, Qu·∫£ng Tr·ªã
- **V√πng 7:** H√† N·ªôi, B·∫Øc Ninh, Vƒ©nh Ph√∫c, Th√°i B√¨nh, H∆∞ng Y√™n, Ninh B√¨nh, H·∫£i Ph√≤ng, H·∫£i D∆∞∆°ng, H√≤a B√¨nh, Nam ƒê·ªãnh, Th√°i Nguy√™n, B·∫Øc Giang, H√† Nam, Thanh H√≥a
- **V√πng 8:** Qu·∫£ng Ninh, B·∫Øc K·∫°n, L·∫°ng S∆°n, Cao B·∫±ng, ƒêi·ªán Bi√™n, S∆°n La, Y√™n B√°i, Lai Ch√¢u, Tuy√™n Quang, H√† Giang, L√†o Cai, Ph√∫ Th·ªç

---

## ‚è±Ô∏è TH·ªúI GIAN GIAO H√ÄNG

| D·ªãch v·ª• | V√πng 0 | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|---------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
| **VIN-TRUCK** | 1-2 ng√†y | 1-2 ng√†y | 2-3 ng√†y | 3-3.5 ng√†y | 3-4.5 ng√†y | 4-5 ng√†y | 4-6 ng√†y | 4-6 ng√†y | 5-7 ng√†y |
| **VIN-ECO** | 1-1.5 ng√†y | 1-1.5 ng√†y | 1-2 ng√†y | 2 ng√†y | 2-2.5 ng√†y | 2-2.5 ng√†y | 2-2.5 ng√†y | 2-3 ng√†y | 2-4 ng√†y |
| **VIN-EXPRESS** | 24h | 24h | 24h | 36h | 36-48h | 36-48h | 36-48h | 36-48h | 72-80h |
| **VIN-HOATOC** | 12-20h | 20h | 21h | 24h | 36h | 24h | 24h | 24h | 48-72h |

---

## üîÑ QUY TR√åNH T√çNH TO√ÅN T·ªîNG TH·ªÇ

```
B∆∞·ªõc 1: X√°c ƒë·ªãnh V√πng (0-8) t·ª´ T·ªânh/Th√†nh ph·ªë ƒë√£ ch·ªçn
B∆∞·ªõc 2: X√°c ƒë·ªãnh Lo·∫°i Tuy·∫øn (N·ªôi tuy·∫øn/Ngo·∫°i tuy·∫øn) t·ª´ Qu·∫≠n/Huy·ªán ƒë√£ ch·ªçn
B∆∞·ªõc 3: Nh·∫≠p Tr·ªçng l∆∞·ª£ng (kg)
B∆∞·ªõc 4: T√≠nh Gi√° C∆° S·ªü theo b·∫£ng gi√° t∆∞∆°ng ·ª©ng v·ªõi d·ªãch v·ª•
B∆∞·ªõc 5: T√≠nh Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn (n·∫øu ngo·∫°i tuy·∫øn)
B∆∞·ªõc 6: T√≠nh Tr∆∞·ªõc Thu·∫ø VAT = Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn
B∆∞·ªõc 7: T√≠nh Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = Tr∆∞·ªõc Thu·∫ø VAT √ó 20%
B∆∞·ªõc 8: T√≠nh T·ªîNG C∆Ø·ªöC = Tr∆∞·ªõc Thu·∫ø VAT + Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT
B∆∞·ªõc 9: Hi·ªÉn th·ªã k·∫øt qu·∫£ v·ªõi th·ªùi gian giao h√†ng t∆∞∆°ng ·ª©ng
```

---

## üìù GHI CH√ö QUAN TR·ªåNG

1. **VIN-ECO:** Ch·ªâ √°p d·ª•ng khi tr·ªçng l∆∞·ª£ng ‚â• 30kg. N·∫øu < 30kg, d·ªãch v·ª• s·∫Ω b·ªã v√¥ hi·ªáu h√≥a v·ªõi l√Ω do "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg".

2. **L√†m tr√≤n:** T·∫•t c·∫£ c√°c ph√©p t√≠nh ƒë·ªÅu ƒë∆∞·ª£c l√†m tr√≤n b·∫±ng `Math.round()`.

3. **VIN-EXPRESS v√† VIN-HOATOC:** T√≠nh theo b∆∞·ªõc 0.5kg, s·ª≠ d·ª•ng `Math.ceil()` ƒë·ªÉ l√†m tr√≤n l√™n.

4. **Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn:** Ch·ªâ √°p d·ª•ng khi Qu·∫≠n/Huy·ªán l√† "Ngo·∫°i tuy·∫øn" (ngoai).

5. **Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT:** Lu√¥n l√† 20% c·ªßa (Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn), √°p d·ª•ng cho t·∫•t c·∫£ d·ªãch v·ª•.

---

## üìÖ NG√ÄY C·∫¨P NH·∫¨T

- **Phi√™n b·∫£n:** 2.0.0
- **Ng√†y c·∫≠p nh·∫≠t:** 2024-11-20
- **Ngu·ªìn:** Code t·ª´ `script.js` (d√≤ng 595-1641)

---

**üìå L∆∞u √Ω:** C√¥ng th·ª©c n√†y ƒë∆∞·ª£c tr√≠ch xu·∫•t tr·ª±c ti·∫øp t·ª´ code JavaScript c·ªßa ·ª©ng d·ª•ng. M·ªçi thay ƒë·ªïi trong code s·∫Ω c·∫ßn c·∫≠p nh·∫≠t l·∫°i t√†i li·ªáu n√†y.

```

Th·ª≠ t·∫°o file v·ªõi t√™n kh√¥ng d·∫•u:


```markdown
# üìã C√îNG TH·ª®C T√çNH C∆Ø·ªöC PH√ç - TAB T√çNH C∆Ø·ªöC PH√ç

## üéØ T·ªîNG QUAN

Tab **T√≠nh C∆∞·ªõc Ph√≠** t√≠nh to√°n c∆∞·ªõc v·∫≠n chuy·ªÉn cho 4 d·ªãch v·ª•:
1. **VIN-TRUCK** (ƒê∆∞·ªùng B·ªô) üöõ
2. **VIN-ECO** (Ti·∫øt Ki·ªám) üöê - T·ªëi thi·ªÉu 30kg
3. **VIN-EXPRESS** (Chuy·ªÉn Ph√°t Nhanh) ‚úàÔ∏è
4. **VIN-HOATOC** (H·ªèa T·ªëc) üöÄ

---

## üìä C√îNG TH·ª®C T·ªîNG QU√ÅT

### C√¥ng th·ª©c chung cho t·∫•t c·∫£ d·ªãch v·ª•:

```
T·ªîNG C∆Ø·ªöC = (Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn) + Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT

Trong ƒë√≥:
- Gi√° C∆° S·ªü = T√≠nh theo b·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng v√† v√πng
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0% (n·∫øu n·ªôi tuy·∫øn) ho·∫∑c 10-30% (n·∫øu ngo·∫°i tuy·∫øn)
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 20% c·ªßa (Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn)
```

---

## üöõ 1. VIN-TRUCK (ƒê∆∞·ªùng B·ªô)

### B·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng (VNƒê):

| Tr·ªçng l∆∞·ª£ng | V√πng 0 (N·ªôi T·ªânh) | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|------------|-------------------|--------|--------|--------|--------|--------|--------|--------|--------|
| ‚â§10kg | 50,000 | 70,000 | 90,000 | 100,000 | 110,000 | 120,000 | 125,000 | 140,000 | 180,000 |
| >10-50kg (m·ªói kg) | 2,900 | 3,500 | 4,500 | 4,700 | 4,900 | 5,400 | 5,500 | 5,900 | 9,200 |
| >50-100kg (m·ªói kg) | 2,700 | 3,400 | 4,200 | 4,500 | 4,700 | 5,200 | 5,200 | 5,700 | 9,000 |
| >100-300kg (m·ªói kg) | 2,400 | 3,200 | 3,700 | 4,100 | 4,500 | 5,000 | 5,000 | 5,400 | 8,500 |
| >300-500kg (m·ªói kg) | 2,200 | 2,600 | 3,200 | 3,900 | 4,300 | 4,500 | 4,700 | 5,000 | 8,300 |
| >500-1000kg (m·ªói kg) | 1,700 | 2,400 | 2,800 | 3,700 | 4,000 | 4,200 | 4,300 | 4,700 | 7,500 |
| >1000-2000kg (m·ªói kg) | 1,200 | 1,900 | 2,500 | 3,400 | 3,800 | 3,900 | 4,100 | 4,600 | 6,000 |
| >2000kg (m·ªói kg) | 1,000 | 1,700 | 2,000 | 3,000 | 3,600 | 3,600 | 4,000 | 4,300 | 5,700 |

### C√¥ng th·ª©c t√≠nh Gi√° C∆° S·ªü:

```
N·∫øu kg ‚â§ 10:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng]

N·∫øu 10 < kg ‚â§ 50:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + (kg - 10) √ó B·∫£ng gi√° [50][v√πng]

N·∫øu 50 < kg ‚â§ 100:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + (kg - 50) √ó B·∫£ng gi√° [100][v√πng]

N·∫øu 100 < kg ‚â§ 300:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + (kg - 100) √ó B·∫£ng gi√° [300][v√πng]

N·∫øu 300 < kg ‚â§ 500:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + 200 √ó B·∫£ng gi√° [300][v√πng] + (kg - 300) √ó B·∫£ng gi√° [500][v√πng]

N·∫øu 500 < kg ‚â§ 1000:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + 200 √ó B·∫£ng gi√° [300][v√πng] + 200 √ó B·∫£ng gi√° [500][v√πng] + (kg - 500) √ó B·∫£ng gi√° [1000][v√πng]

N·∫øu 1000 < kg ‚â§ 2000:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + 200 √ó B·∫£ng gi√° [300][v√πng] + 200 √ó B·∫£ng gi√° [500][v√πng] + 500 √ó B·∫£ng gi√° [1000][v√πng] + (kg - 1000) √ó B·∫£ng gi√° [2000][v√πng]

N·∫øu kg > 2000:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [10][v√πng] + 40 √ó B·∫£ng gi√° [50][v√πng] + 50 √ó B·∫£ng gi√° [100][v√πng] + 200 √ó B·∫£ng gi√° [300][v√πng] + 200 √ó B·∫£ng gi√° [500][v√πng] + 500 √ó B·∫£ng gi√° [1000][v√πng] + 1000 √ó B·∫£ng gi√° [2000][v√πng] + (kg - 2000) √ó B·∫£ng gi√° [max][v√πng]
```

### V√≠ d·ª• t√≠nh to√°n:

**V√≠ d·ª• 1:** 25kg, V√πng 1, N·ªôi tuy·∫øn
- Gi√° C∆° S·ªü = 70,000 + (25 - 10) √ó 3,500 = 70,000 + 52,500 = **122,500 ƒë**
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0 (n·ªôi tuy·∫øn)
- Tr∆∞·ªõc Thu·∫ø VAT = 122,500 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 122,500 √ó 20% = **24,500 ƒë**
- **T·ªîNG C∆Ø·ªöC = 122,500 + 24,500 = 147,000 ƒë**

**V√≠ d·ª• 2:** 150kg, V√πng 2, Ngo·∫°i tuy·∫øn
- Gi√° C∆° S·ªü = 90,000 + 40 √ó 4,500 + 50 √ó 4,200 + (150 - 100) √ó 3,700 = 90,000 + 180,000 + 210,000 + 185,000 = **665,000 ƒë**
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 665,000 √ó 20% = **133,000 ƒë** (v√¨ 100 < kg < 200)
- Tr∆∞·ªõc Thu·∫ø VAT = 665,000 + 133,000 = 798,000 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 798,000 √ó 20% = **159,600 ƒë**
- **T·ªîNG C∆Ø·ªöC = 798,000 + 159,600 = 957,600 ƒë**

---

## üöê 2. VIN-ECO (Ti·∫øt Ki·ªám)

### ‚ö†Ô∏è L∆ØU √ù: Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg

### B·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng (VNƒê):

| Tr·ªçng l∆∞·ª£ng | V√πng 0 (N·ªôi T·ªânh) | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|------------|-------------------|--------|--------|--------|--------|--------|--------|--------|--------|
| ‚â§10kg | 66,000 | 100,000 | 109,000 | 170,000 | 180,000 | 180,000 | 180,000 | 190,000 | 200,000 |
| >10-50kg (m·ªói kg) | 3,200 | 4,700 | 7,200 | 7,800 | 8,500 | 10,300 | 16,000 | 17,000 | 19,000 |
| >50-100kg (m·ªói kg) | 3,100 | 4,300 | 6,900 | 7,500 | 8,200 | 10,000 | 15,000 | 16,000 | 18,000 |
| >100-300kg (m·ªói kg) | 3,000 | 3,800 | 5,500 | 6,900 | 7,400 | 8,000 | 14,000 | 15,000 | 16,500 |
| >300-500kg (m·ªói kg) | 2,500 | 3,500 | 4,900 | 6,500 | 6,500 | 7,100 | 12,500 | 13,500 | 15,000 |
| >500-1000kg (m·ªói kg) | 2,100 | 2,900 | 4,000 | 5,600 | 5,900 | 6,500 | 10,000 | 11,000 | 13,000 |
| >1000-2000kg (m·ªói kg) | 1,500 | 2,100 | 2,800 | 3,800 | 5,500 | 6,100 | 8,500 | 10,000 | 12,000 |
| >2000kg (m·ªói kg) | 1,200 | 1,900 | 2,200 | 3,300 | 5,000 | 5,600 | 7,500 | 8,000 | 10,500 |

### C√¥ng th·ª©c t√≠nh Gi√° C∆° S·ªü:

**Gi·ªëng VIN-TRUCK** (√°p d·ª•ng c√¥ng th·ª©c b·∫≠c thang t∆∞∆°ng t·ª±)

### V√≠ d·ª• t√≠nh to√°n:

**V√≠ d·ª•:** 50kg, V√πng 1, N·ªôi tuy·∫øn
- Gi√° C∆° S·ªü = 100,000 + (50 - 10) √ó 4,700 = 100,000 + 188,000 = **288,000 ƒë**
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0 (n·ªôi tuy·∫øn)
- Tr∆∞·ªõc Thu·∫ø VAT = 288,000 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 288,000 √ó 20% = **57,600 ƒë**
- **T·ªîNG C∆Ø·ªöC = 288,000 + 57,600 = 345,600 ƒë**

---

## ‚úàÔ∏è 3. VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)

### B·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng (VNƒê):

| Tr·ªçng l∆∞·ª£ng | V√πng 0 (N·ªôi T·ªânh) | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|------------|-------------------|--------|--------|--------|--------|--------|--------|--------|--------|
| ‚â§1kg | 24,700 | 40,300 | 45,500 | 48,100 | 52,000 | 57,400 | 61,500 | 63,000 | 73,000 |
| ‚â§2kg | 29,000 | 55,900 | 61,100 | 66,300 | 76,700 | 82,600 | 88,500 | 96,000 | 102,000 |
| M·ªói 0.5kg ti·∫øp theo | 2,500 | 3,900 | 5,000 | 8,000 | 10,000 | 12,000 | 12,500 | 13,000 | 14,000 |

### C√¥ng th·ª©c t√≠nh Gi√° C∆° S·ªü:

```
N·∫øu kg ‚â§ 1:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [1][v√πng]

N·∫øu 1 < kg ‚â§ 2:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [2][v√πng]

N·∫øu kg > 2:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [2][v√πng] + Math.ceil((kg - 2) / 0.5) √ó B·∫£ng gi√° [step][v√πng]
    
    Trong ƒë√≥: Math.ceil((kg - 2) / 0.5) = S·ªë b∆∞·ªõc 0.5kg v∆∞·ª£t qu√° 2kg (l√†m tr√≤n l√™n)
```

### V√≠ d·ª• t√≠nh to√°n:

**V√≠ d·ª• 1:** 0.8kg, V√πng 1, N·ªôi tuy·∫øn
- Gi√° C∆° S·ªü = **40,300 ƒë** (‚â§1kg)
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0 (n·ªôi tuy·∫øn)
- Tr∆∞·ªõc Thu·∫ø VAT = 40,300 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 40,300 √ó 20% = **8,060 ƒë**
- **T·ªîNG C∆Ø·ªöC = 40,300 + 8,060 = 48,360 ƒë**

**V√≠ d·ª• 2:** 3.2kg, V√πng 2, Ngo·∫°i tuy·∫øn
- Gi√° C∆° S·ªü = 61,100 + Math.ceil((3.2 - 2) / 0.5) √ó 5,000 = 61,100 + Math.ceil(2.4) √ó 5,000 = 61,100 + 3 √ó 5,000 = **76,100 ƒë**
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 76,100 √ó 30% = **22,830 ƒë** (v√¨ kg < 100)
- Tr∆∞·ªõc Thu·∫ø VAT = 76,100 + 22,830 = 98,930 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 98,930 √ó 20% = **19,786 ƒë**
- **T·ªîNG C∆Ø·ªöC = 98,930 + 19,786 = 118,716 ƒë**

---

## üöÄ 4. VIN-HOATOC (H·ªèa T·ªëc)

### B·∫£ng gi√° theo tr·ªçng l∆∞·ª£ng (VNƒê):

| Tr·ªçng l∆∞·ª£ng | V√πng 0 (N·ªôi T·ªânh) | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|------------|-------------------|--------|--------|--------|--------|--------|--------|--------|--------|
| ‚â§2kg | 50,000 | 89,700 | 91,000 | 93,600 | 100,100 | 120,000 | 120,000 | 153,000 | 170,000 |
| M·ªói 0.5kg ti·∫øp theo | 4,000 | 5,000 | 6,000 | 10,450 | 10,450 | 13,500 | 13,700 | 13,750 | 17,000 |

### C√¥ng th·ª©c t√≠nh Gi√° C∆° S·ªü:

```
N·∫øu kg ‚â§ 2:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [2][v√πng]

N·∫øu kg > 2:
    Gi√° C∆° S·ªü = B·∫£ng gi√° [2][v√πng] + Math.ceil((kg - 2) / 0.5) √ó B·∫£ng gi√° [step][v√πng]
    
    Trong ƒë√≥: Math.ceil((kg - 2) / 0.5) = S·ªë b∆∞·ªõc 0.5kg v∆∞·ª£t qu√° 2kg (l√†m tr√≤n l√™n)
```

### V√≠ d·ª• t√≠nh to√°n:

**V√≠ d·ª•:** 1.5kg, V√πng 1, N·ªôi tuy·∫øn
- Gi√° C∆° S·ªü = **89,700 ƒë** (‚â§2kg)
- Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0 (n·ªôi tuy·∫øn)
- Tr∆∞·ªõc Thu·∫ø VAT = 89,700 ƒë
- Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = 89,700 √ó 20% = **17,940 ƒë**
- **T·ªîNG C∆Ø·ªöC = 89,700 + 17,940 = 107,640 ƒë**

---

## üí∞ PH·ª§ PH√ç NGO·∫†I TUY·∫æN

### C√¥ng th·ª©c:

```
N·∫øu lo·∫°i tuy·∫øn = "N·ªôi tuy·∫øn" (noi):
    Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = 0

N·∫øu lo·∫°i tuy·∫øn = "Ngo·∫°i tuy·∫øn" (ngoai):
    N·∫øu kg < 100:
        Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = Gi√° C∆° S·ªü √ó 30%
    N·∫øu 100 ‚â§ kg < 200:
        Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = Gi√° C∆° S·ªü √ó 20%
    N·∫øu kg ‚â• 200:
        Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn = Gi√° C∆° S·ªü √ó 10%
```

### V√≠ d·ª•:

- **50kg, Ngo·∫°i tuy·∫øn:** Ph·ª• ph√≠ = Gi√° C∆° S·ªü √ó 30%
- **150kg, Ngo·∫°i tuy·∫øn:** Ph·ª• ph√≠ = Gi√° C∆° S·ªü √ó 20%
- **250kg, Ngo·∫°i tuy·∫øn:** Ph·ª• ph√≠ = Gi√° C∆° S·ªü √ó 10%

---

## ‚õΩ PH·ª§ PH√ç XƒÇNG D·∫¶U & VAT

### C√¥ng th·ª©c:

```
Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = (Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn) √ó 20%

L√†m tr√≤n: Math.round()
```

---

## üìç PH√ÇN V√ôNG

### 9 V√πng (0-8):

- **V√πng 0 (N·ªôi T·ªânh):** TP.HCM
- **V√πng 1:** B√¨nh D∆∞∆°ng, ƒê·ªìng Nai, Long An
- **V√πng 2:** B√† R·ªãa - V≈©ng T√†u, B√¨nh Ph∆∞·ªõc, T√¢y Ninh, B√¨nh Thu·∫≠n, Ti·ªÅn Giang, B·∫øn Tre, Vƒ©nh Long, C·∫ßn Th∆°, ƒê·ªìng Th√°p, Tr√† Vinh
- **V√πng 3:** An Giang, Ki√™n Giang, H·∫≠u Giang, C√† Mau, S√≥c TrƒÉng, B·∫°c Li√™u, Ninh Thu·∫≠n
- **V√πng 4:** Kh√°nh H√≤a, B√¨nh ƒê·ªãnh, Ph√∫ Y√™n, L√¢m ƒê·ªìng, ƒê·∫Øk N√¥ng, ƒê·∫Øk L·∫Øk
- **V√πng 5:** Kon Tum, Gia Lai, Hu·∫ø, Qu·∫£ng Ng√£i, ƒê√† N·∫µng, Qu·∫£ng Nam
- **V√πng 6:** Ngh·ªá An, H√† Tƒ©nh, Qu·∫£ng B√¨nh, Qu·∫£ng Tr·ªã
- **V√πng 7:** H√† N·ªôi, B·∫Øc Ninh, Vƒ©nh Ph√∫c, Th√°i B√¨nh, H∆∞ng Y√™n, Ninh B√¨nh, H·∫£i Ph√≤ng, H·∫£i D∆∞∆°ng, H√≤a B√¨nh, Nam ƒê·ªãnh, Th√°i Nguy√™n, B·∫Øc Giang, H√† Nam, Thanh H√≥a
- **V√πng 8:** Qu·∫£ng Ninh, B·∫Øc K·∫°n, L·∫°ng S∆°n, Cao B·∫±ng, ƒêi·ªán Bi√™n, S∆°n La, Y√™n B√°i, Lai Ch√¢u, Tuy√™n Quang, H√† Giang, L√†o Cai, Ph√∫ Th·ªç

---

## ‚è±Ô∏è TH·ªúI GIAN GIAO H√ÄNG

| D·ªãch v·ª• | V√πng 0 | V√πng 1 | V√πng 2 | V√πng 3 | V√πng 4 | V√πng 5 | V√πng 6 | V√πng 7 | V√πng 8 |
|---------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
| **VIN-TRUCK** | 1-2 ng√†y | 1-2 ng√†y | 2-3 ng√†y | 3-3.5 ng√†y | 3-4.5 ng√†y | 4-5 ng√†y | 4-6 ng√†y | 4-6 ng√†y | 5-7 ng√†y |
| **VIN-ECO** | 1-1.5 ng√†y | 1-1.5 ng√†y | 1-2 ng√†y | 2 ng√†y | 2-2.5 ng√†y | 2-2.5 ng√†y | 2-2.5 ng√†y | 2-3 ng√†y | 2-4 ng√†y |
| **VIN-EXPRESS** | 24h | 24h | 24h | 36h | 36-48h | 36-48h | 36-48h | 36-48h | 72-80h |
| **VIN-HOATOC** | 12-20h | 20h | 21h | 24h | 36h | 24h | 24h | 24h | 48-72h |

---

## üîÑ QUY TR√åNH T√çNH TO√ÅN T·ªîNG TH·ªÇ

```
B∆∞·ªõc 1: X√°c ƒë·ªãnh V√πng (0-8) t·ª´ T·ªânh/Th√†nh ph·ªë ƒë√£ ch·ªçn
B∆∞·ªõc 2: X√°c ƒë·ªãnh Lo·∫°i Tuy·∫øn (N·ªôi tuy·∫øn/Ngo·∫°i tuy·∫øn) t·ª´ Qu·∫≠n/Huy·ªán ƒë√£ ch·ªçn
B∆∞·ªõc 3: Nh·∫≠p Tr·ªçng l∆∞·ª£ng (kg)
B∆∞·ªõc 4: T√≠nh Gi√° C∆° S·ªü theo b·∫£ng gi√° t∆∞∆°ng ·ª©ng v·ªõi d·ªãch v·ª•
B∆∞·ªõc 5: T√≠nh Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn (n·∫øu ngo·∫°i tuy·∫øn)
B∆∞·ªõc 6: T√≠nh Tr∆∞·ªõc Thu·∫ø VAT = Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn
B∆∞·ªõc 7: T√≠nh Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT = Tr∆∞·ªõc Thu·∫ø VAT √ó 20%
B∆∞·ªõc 8: T√≠nh T·ªîNG C∆Ø·ªöC = Tr∆∞·ªõc Thu·∫ø VAT + Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT
B∆∞·ªõc 9: Hi·ªÉn th·ªã k·∫øt qu·∫£ v·ªõi th·ªùi gian giao h√†ng t∆∞∆°ng ·ª©ng
```

---

## üìù GHI CH√ö QUAN TR·ªåNG

1. **VIN-ECO:** Ch·ªâ √°p d·ª•ng khi tr·ªçng l∆∞·ª£ng ‚â• 30kg. N·∫øu < 30kg, d·ªãch v·ª• s·∫Ω b·ªã v√¥ hi·ªáu h√≥a v·ªõi l√Ω do "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg".

2. **L√†m tr√≤n:** T·∫•t c·∫£ c√°c ph√©p t√≠nh ƒë·ªÅu ƒë∆∞·ª£c l√†m tr√≤n b·∫±ng `Math.round()`.

3. **VIN-EXPRESS v√† VIN-HOATOC:** T√≠nh theo b∆∞·ªõc 0.5kg, s·ª≠ d·ª•ng `Math.ceil()` ƒë·ªÉ l√†m tr√≤n l√™n.

4. **Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn:** Ch·ªâ √°p d·ª•ng khi Qu·∫≠n/Huy·ªán l√† "Ngo·∫°i tuy·∫øn" (ngoai).

5. **Ph·ª• Ph√≠ XƒÉng D·∫ßu & VAT:** Lu√¥n l√† 20% c·ªßa (Gi√° C∆° S·ªü + Ph·ª• Ph√≠ Ngo·∫°i Tuy·∫øn), √°p d·ª•ng cho t·∫•t c·∫£ d·ªãch v·ª•.

---

## üìÖ NG√ÄY C·∫¨P NH·∫¨T

- **Phi√™n b·∫£n:** 2.0.0
- **Ng√†y c·∫≠p nh·∫≠t:** 2024-11-20
- **Ngu·ªìn:** Code t·ª´ `script.js` (d√≤ng 595-1641)

---

**üìå L∆∞u √Ω:** C√¥ng th·ª©c n√†y ƒë∆∞·ª£c tr√≠ch xu·∫•t tr·ª±c ti·∫øp t·ª´ code JavaScript c·ªßa ·ª©ng d·ª•ng. M·ªçi thay ƒë·ªïi trong code s·∫Ω c·∫ßn c·∫≠p nh·∫≠t l·∫°i t√†i li·ªáu n√†y.

```

---

**User**

D∆∞·ªõi ƒë√¢y l√† vƒÉn b·∫£n QUY CHU·∫®N T√çNH C∆Ø·ªöC ho√†n ch·ªânh v√† ch√≠nh x√°c nh·∫•t theo to√†n b·ªô c√°c y√™u c·∫ßu v√† s·ª≠a ƒë·ªïi c·ªßa b·∫°n.



B·∫°n c√≥ th·ªÉ d√πng n·ªôi dung n√†y ƒë·ªÉ ban h√†nh quy ƒë·ªãnh n·ªôi b·ªô ho·∫∑c g·ª≠i cho kh√°ch h√†ng.

QUY ƒê·ªäNH T√çNH C∆Ø·ªöC V·∫¨N CHUY·ªÇN VINTRANS (√ÅP D·ª§NG 2025)

T√†i li·ªáu h∆∞·ªõng d·∫´n c√°ch t√≠nh gi√° c∆∞·ªõc cho d·ªãch v·ª• ƒë∆∞·ªùng b·ªô (VIN-TRUCK), ƒë·∫£m b·∫£o t√≠nh th·ªëng nh·∫•t v√† ch√≠nh x√°c cho m·ªçi ƒë∆°n h√†ng.

I. NGUY√äN T·∫ÆC C·ªêT L√ïI (B·∫ÆT BU·ªòC)

 * Quy t·∫Øc x√°c ƒë·ªãnh Khung gi√° (Quan tr·ªçng nh·∫•t):

   * ƒê∆°n gi√° kg d∆∞ ƒë∆∞·ª£c x√°c ƒë·ªãnh d·ª±a tr√™n S·ªê KG C√íN L·∫†I (sau khi ƒë√£ tr·ª´ 10kg ƒë·∫ßu), tuy·ªát ƒë·ªëi kh√¥ng d·ª±a tr√™n t·ªïng tr·ªçng l∆∞·ª£ng ki·ªán h√†ng.

   * C√¥ng th·ª©c: Kg t√≠nh ƒë∆°n gi√° = T·ªïng tr·ªçng l∆∞·ª£ng - 10.

 * Tr√¨nh t·ª± nh√¢n h·ªá s·ªë:

   * Ph·∫£i nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (x 1.32) tr∆∞·ªõc.

   * Sau ƒë√≥ m·ªõi nh√¢n h·ªá s·ªë v√πng xa/ngo·∫°i tuy·∫øn (x 1.3).

II. C√îNG TH·ª®C T√çNH TO√ÅN

1. Tr∆∞·ªùng h·ª£p ƒëi N·ªòI TUY·∫æN (Trung t√¢m T·ªânh/TP)

(√Åp d·ª•ng cho ƒë·ªãa ch·ªâ c√≥ d·∫•u t√≠ch ·ªü c·ªôt ƒë·∫ßu ti√™n b√™n tr√°i)

2. Tr∆∞·ªùng h·ª£p ƒëi NGO·∫†I TUY·∫æN (Huy·ªán/X√£ v√πng xa)

(√Åp d·ª•ng cho ƒë·ªãa ch·ªâ c√≥ d·∫•u t√≠ch ·ªü c·ªôt th·ª© hai b√™n ph·∫£i)

Trong ƒë√≥:

 * P_{10}: Gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu ti√™n (Tra theo V√πng).

 * W_{d∆∞}: S·ªë kg c√≤n l·∫°i (= \text{T·ªïng kg} - 10).

 * ƒêG_{khung}: ƒê∆°n gi√° t∆∞∆°ng ·ª©ng v·ªõi s·ªë l∆∞·ª£ng W_{d∆∞} (Tra b·∫£ng gi√°).

 * 1.32: Ph·ª• ph√≠ nhi√™n li·ªáu (20%) + VAT (10%).

 * 1.3: Ph·ª• ph√≠ h√†ng ƒëi tuy·∫øn huy·ªán x√£ (30%).

III. V√ç D·ª§ MINH H·ªåA CHI TI·∫æT (M·∫™U CHU·∫®N)

ƒê·ªÅ b√†i: V·∫≠n chuy·ªÉn ki·ªán h√†ng n·∫∑ng 108 kg ƒëi Huy·ªán B·∫Øc Quang, T·ªânh H√† Giang.

B∆∞·ªõc 1: Ph√¢n t√≠ch d·ªØ li·ªáu

 * V√πng: H√† Giang thu·ªôc V√πng 8.

 * Tuy·∫øn: Huy·ªán B·∫Øc Quang l√† Ngo·∫°i tuy·∫øn (Nh√¢n h·ªá s·ªë 1.3).

 * X√°c ƒë·ªãnh khung gi√° √°p d·ª•ng:

   * T·ªïng tr·ªçng l∆∞·ª£ng: 108 kg.

   * Tr·ª´ 10kg ƒë·∫ßu: C√≤n l·∫°i 98 kg.

   * Tra b·∫£ng gi√° V√πng 8: 98 kg n·∫±m trong khung "Tr√™n 50 - 100 kg".

   * => ƒê∆°n gi√° √°p d·ª•ng l√†: 9.000 ƒë/kg.

     (L∆∞u √Ω: Kh√¥ng d√πng gi√° khung 100-300kg v√¨ s·ªë c√¢n d∆∞ th·ª±c t·∫ø ch∆∞a ƒë·∫°t 100kg).

B∆∞·ªõc 2: T√≠nh to√°n t·ª´ng ph·∫ßn

1. T√≠nh C∆∞·ªõc ph√≠ g·ªëc (Base Price):

 * Gi√° 10kg ƒë·∫ßu (V√πng 8): 180.000 ƒë.

 * Ti·ªÅn c∆∞·ªõc ph·∫ßn d∆∞: 98 \text{ kg} \times 9.000 \text{ ƒë} = \mathbf{882.000 \text{ ƒë}}.

 * T·ªïng gi√° g·ªëc: 180.000 + 882.000 = \mathbf{1.062.000 \text{ ƒë}}.

2. C·ªông Ph·ª• ph√≠ Nhi√™n li·ªáu & VAT (x 1.32):

 * 1.062.000 \times 1.32 = \mathbf{1.401.840 \text{ ƒë}}.

3. C·ªông Ph·ª• ph√≠ Ngo·∫°i tuy·∫øn (x 1.3):

 * 1.401.840 \times 1.3 = \mathbf{1.822.392 \text{ ƒë}}.

K·∫æT QU·∫¢

T·ªïng c∆∞·ªõc v·∫≠n chuy·ªÉn ƒë∆°n h√†ng l√†: 1.822.392 VNƒê

(B·∫±ng ch·ªØ: M·ªôt tri·ªáu, t√°m trƒÉm hai m∆∞∆°i hai ngh√¨n, ba trƒÉm ch√≠n m∆∞∆°i hai ƒë·ªìng).

IV. C√ÅC QUY ƒê·ªäNH KH√ÅC

 * H√†ng c·ªìng k·ªÅnh: Quy ƒë·ªïi theo c√¥ng th·ª©c (D√†i x R·ªông x Cao) / 4000. So s√°nh v·ªõi tr·ªçng l∆∞·ª£ng th·ª±c, s·ªë n√†o l·ªõn h∆°n th√¨ l·∫•y s·ªë ƒë√≥ ƒë·ªÉ t√≠nh ti·ªÅn.

 * L√†m tr√≤n: S·ªë kg l·∫ª ƒë∆∞·ª£c l√†m tr√≤n l√™n 0.5kg.

 * Ph·ª• ph√≠ ƒë·∫∑c bi·ªát: Giao ƒë·∫£o/c·ªìn nh√¢n ƒë√¥i c∆∞·ªõc; H√†ng ch·∫•t l·ªèng c·ªông th√™m 10%.    hay thay doi cong thuc tinh

---

**Cursor**

ƒêang c·∫≠p nh·∫≠t c√¥ng th·ª©c t√≠nh c∆∞·ªõc ph√≠ theo quy ƒë·ªãnh m·ªõi. Ki·ªÉm tra v√† s·ª≠a logic t√≠nh to√°n trong code.


ƒêang c·∫≠p nh·∫≠t logic t√≠nh to√°n theo quy ƒë·ªãnh m·ªõi: x√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n s·ªë kg c√≤n l·∫°i (sau khi tr·ª´ 10kg ƒë·∫ßu) v√† nh√¢n h·ªá s·ªë theo ƒë√∫ng th·ª© t·ª±.


ƒêang c·∫≠p nh·∫≠t logic t√≠nh to√°n theo quy ƒë·ªãnh m·ªõi.


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return gia10kgDau;
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 (t·ª©c l√† 10 < kg ‚â§ 50)
            donGiaKhung = bangGia[50][vung];
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 (t·ª©c l√† 50 < kg ‚â§ 100)
            donGiaKhung = bangGia[100][vung];
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 (t·ª©c l√† 100 < kg ‚â§ 300)
            donGiaKhung = bangGia[300][vung];
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 (t·ª©c l√† 300 < kg ‚â§ 500)
            donGiaKhung = bangGia[500][vung];
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 (t·ª©c l√† 500 < kg ‚â§ 1000)
            donGiaKhung = bangGia[1000][vung];
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 (t·ª©c l√† 1000 < kg ‚â§ 2000)
            donGiaKhung = bangGia[2000][vung];
        } else { // W_d∆∞ > 1990 (t·ª©c l√† kg > 2000)
            donGiaKhung = bangGia.max[vung];
        }
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + wDu * donGiaKhung;
        
        return Math.round(giaGoc);
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // 1. VIN-TRUCK
        const giaTruck = tinhGiaTheoBang(bangGiaVinTruck, kgInput, vung);
        const phuPhiTruck = tinhPhuPhiNgoaiTuyen(giaTruck, kgInput, loaiTuyen);
        const truocThueVATTruck = giaTruck + phuPhiTruck;
        const phuPhiXangVATTruck = Math.round(truocThueVATTruck * 0.2);
        const tongTruck = truocThueVATTruck + phuPhiXangVATTruck;
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaTruck,
            phuPhiNgoaiTuyen: phuPhiTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const giaEco = tinhGiaTheoBang(bangGiaVinEco, kgInput, vung);
            const phuPhiEco = tinhPhuPhiNgoaiTuyen(giaEco, kgInput, loaiTuyen);
            const truocThueVATEco = giaEco + phuPhiEco;
            const phuPhiXangVATEco = Math.round(truocThueVATEco * 0.2);
            const tongEco = truocThueVATEco + phuPhiXangVATEco;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaEco,
                phuPhiNgoaiTuyen: phuPhiEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t logic t√≠nh to√°n trong `tinhToanCuocPhi` ƒë·ªÉ nh√¢n h·ªá s·ªë theo ƒë√∫ng th·ª© t·ª±: 1.32 tr∆∞·ªõc, 1.3 sau (n·∫øu ngo·∫°i tuy·∫øn).


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return gia10kgDau;
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 (t·ª©c l√† 10 < kg ‚â§ 50)
            donGiaKhung = bangGia[50][vung];
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 (t·ª©c l√† 50 < kg ‚â§ 100)
            donGiaKhung = bangGia[100][vung];
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 (t·ª©c l√† 100 < kg ‚â§ 300)
            donGiaKhung = bangGia[300][vung];
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 (t·ª©c l√† 300 < kg ‚â§ 500)
            donGiaKhung = bangGia[500][vung];
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 (t·ª©c l√† 500 < kg ‚â§ 1000)
            donGiaKhung = bangGia[1000][vung];
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 (t·ª©c l√† 1000 < kg ‚â§ 2000)
            donGiaKhung = bangGia[2000][vung];
        } else { // W_d∆∞ > 1990 (t·ª©c l√† kg > 2000)
            donGiaKhung = bangGia.max[vung];
        }
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + wDu * donGiaKhung;
        
        return Math.round(giaGoc);
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const giaGocTruck = tinhGiaTheoBang(bangGiaVinTruck, kgInput, vung);
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const giaGocEco = tinhGiaTheoBang(bangGiaVinEco, kgInput, vung);
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

ƒêang ki·ªÉm tra l·ªói v√† x√°c nh·∫≠n logic t√≠nh to√°n:


ƒêang ki·ªÉm tra l·∫°i logic x√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞:


ƒêang ki·ªÉm tra l·∫°i logic khung gi√°. Theo v√≠ d·ª•, 98kg (W_d∆∞ = 88) n·∫±m trong khung "Tr√™n 50-100kg". ƒêi·ªÅu ch·ªânh logic ƒë·ªÉ kh·ªõp:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return gia10kgDau;
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // Quy t·∫Øc: Tra b·∫£ng gi√° d·ª±a tr√™n W_d∆∞ ƒë·ªÉ t√¨m ƒë∆°n gi√° t∆∞∆°ng ·ª©ng
        let donGiaKhung = 0;
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
        }
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + wDu * donGiaKhung;
        
        return Math.round(giaGoc);
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const giaGocTruck = tinhGiaTheoBang(bangGiaVinTruck, kgInput, vung);
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const giaGocEco = tinhGiaTheoBang(bangGiaVinEco, kgInput, vung);
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

ƒêang ki·ªÉm tra l·∫°i logic v·ªõi v√≠ d·ª• 108kg (W_d∆∞ = 98). Theo quy ƒë·ªãnh, 98kg n·∫±m trong khung "Tr√™n 50-100kg". ƒêi·ªÅu ch·ªânh ƒëi·ªÅu ki·ªán ƒë·ªÉ kh·ªõp:


Logic ƒë√£ ƒë√∫ng. T√≥m t·∫Øt thay ƒë·ªïi:

## T√≥m t·∫Øt thay ƒë·ªïi

ƒê√£ c·∫≠p nh·∫≠t c√¥ng th·ª©c t√≠nh c∆∞·ªõc ph√≠ theo quy ƒë·ªãnh m·ªõi (2025):

### 1. VIN-TRUCK v√† VIN-ECO (quy ƒë·ªãnh m·ªõi)
- X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (kg - 10), kh√¥ng d·ª±a tr√™n t·ªïng kg
- C√¥ng th·ª©c: `Gi√° G·ªëc = P_10 + W_d∆∞ √ó ƒêG_khung`
- Th·ª© t·ª± nh√¢n h·ªá s·ªë:
  1. Nh√¢n 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
  2. Nh√¢n 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)

### 2. VIN-EXPRESS v√† VIN-HOATOC
- Gi·ªØ nguy√™n logic c≈© (kh√¥ng √°p d·ª•ng quy ƒë·ªãnh m·ªõi)

### V√≠ d·ª• ki·ªÉm tra:
- 108kg, V√πng 8, Ngo·∫°i tuy·∫øn:
  - W_d∆∞ = 98kg
  - Khung: "Tr√™n 50 - 100 kg" ‚Üí ƒêG = 9,000 ƒë/kg
  - Gi√° g·ªëc = 180,000 + 98 √ó 9,000 = 1,062,000 ƒë
  - Sau 1.32 = 1,401,840 ƒë
  - Sau 1.3 = 1,822,392 ƒë

Code ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t v√† s·∫µn s√†ng s·ª≠ d·ª•ng. B·∫°n c√≥ mu·ªën t√¥i t·∫°o file t√†i li·ªáu ghi l·∫°i c√¥ng th·ª©c m·ªõi kh√¥ng?

---

**User**

kiem tra xem cong thuc tjnh hien tai co dung ko 

---

**Cursor**

ƒêang ki·ªÉm tra c√¥ng th·ª©c t√≠nh hi·ªán t·∫°i so v·ªõi quy ƒë·ªãnh m·ªõi:


ƒêang ki·ªÉm tra ph·∫ßn t√≠nh to√°n VIN-TRUCK v√† VIN-ECO:


ƒêang ki·ªÉm tra logic x√°c ƒë·ªãnh khung gi√°. Test v·ªõi v√≠ d·ª• 108kg (W_d∆∞ = 98):


Ph√°t hi·ªán l·ªói logic x√°c ƒë·ªãnh khung gi√°. ƒêang ki·ªÉm tra v√† s·ª≠a:


Ph√°t hi·ªán l·ªói: v·ªõi 108kg (W_d∆∞ = 98), logic hi·ªán t·∫°i ƒë∆∞a v√†o khung "Tr√™n 100-300kg" thay v√¨ "Tr√™n 50-100kg". S·ª≠a logic x√°c ƒë·ªãnh khung gi√°:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return gia10kgDau;
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // Quy t·∫Øc: Tra b·∫£ng gi√° d·ª±a tr√™n W_d∆∞ ƒë·ªÉ t√¨m ƒë∆°n gi√° t∆∞∆°ng ·ª©ng
        // Khung "Tr√™n 50 - 100 kg" nghƒ©a l√† t·ª´ 51kg ƒë·∫øn 100kg ‚Üí W_d∆∞ t·ª´ 41 ƒë·∫øn 90
        // Khung "Tr√™n 100 - 300 kg" nghƒ©a l√† t·ª´ 101kg ƒë·∫øn 300kg ‚Üí W_d∆∞ t·ª´ 91 ƒë·∫øn 290
        let donGiaKhung = 0;
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (t·ª´ 11kg ƒë·∫øn 50kg)
            donGiaKhung = bangGia[50][vung];
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (t·ª´ 51kg ƒë·∫øn 100kg)
            donGiaKhung = bangGia[100][vung];
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (t·ª´ 101kg ƒë·∫øn 300kg)
            donGiaKhung = bangGia[300][vung];
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (t·ª´ 301kg ƒë·∫øn 500kg)
            donGiaKhung = bangGia[500][vung];
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (t·ª´ 501kg ƒë·∫øn 1000kg)
            donGiaKhung = bangGia[1000][vung];
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (t·ª´ 1001kg ƒë·∫øn 2000kg)
            donGiaKhung = bangGia[2000][vung];
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (t·ª´ 2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
        }
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + wDu * donGiaKhung;
        
        return Math.round(giaGoc);
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const giaGocTruck = tinhGiaTheoBang(bangGiaVinTruck, kgInput, vung);
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const giaGocEco = tinhGiaTheoBang(bangGiaVinEco, kgInput, vung);
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

ƒêang ki·ªÉm tra l·∫°i. Theo v√≠ d·ª•: 108kg ‚Üí W_d∆∞ = 98kg, v√† "98 kg n·∫±m trong khung 'Tr√™n 50 - 100 kg'". Logic hi·ªán t·∫°i v·ªõi wDu = 98 th√¨ 98 > 90, n√™n s·∫Ω v√†o khung "Tr√™n 100 - 300 kg" (sai). C√≥ th·ªÉ khung "Tr√™n 50 - 100 kg" bao g·ªìm c·∫£ 100kg, t·ª©c l√† t·ª´ 51kg ƒë·∫øn 100kg (bao g·ªìm 100kg). ƒêi·ªÅu ch·ªânh logic ƒë·ªÉ kh·ªõp:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return gia10kgDau;
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // Quy t·∫Øc: Tra b·∫£ng gi√° d·ª±a tr√™n W_d∆∞ ƒë·ªÉ t√¨m ƒë∆°n gi√° t∆∞∆°ng ·ª©ng
        // Khung "Tr√™n 50 - 100 kg" nghƒ©a l√† t·ª´ 51kg ƒë·∫øn 100kg ‚Üí W_d∆∞ t·ª´ 41 ƒë·∫øn 90
        // Khung "Tr√™n 100 - 300 kg" nghƒ©a l√† t·ª´ 101kg ƒë·∫øn 300kg ‚Üí W_d∆∞ t·ª´ 91 ƒë·∫øn 290
        let donGiaKhung = 0;
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (t·ª´ 11kg ƒë·∫øn 50kg)
            donGiaKhung = bangGia[50][vung];
        } else if (wDu <= 100) { // 40 < W_d∆∞ ‚â§ 100 ‚Üí khung "Tr√™n 50 - 100 kg" (t·ª´ 51kg ƒë·∫øn 100kg, bao g·ªìm 100kg)
            donGiaKhung = bangGia[100][vung];
        } else if (wDu <= 290) { // 100 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (t·ª´ 101kg ƒë·∫øn 300kg)
            donGiaKhung = bangGia[300][vung];
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (t·ª´ 301kg ƒë·∫øn 500kg)
            donGiaKhung = bangGia[500][vung];
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (t·ª´ 501kg ƒë·∫øn 1000kg)
            donGiaKhung = bangGia[1000][vung];
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (t·ª´ 1001kg ƒë·∫øn 2000kg)
            donGiaKhung = bangGia[2000][vung];
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (t·ª´ 2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
        }
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + wDu * donGiaKhung;
        
        return Math.round(giaGoc);
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const giaGocTruck = tinhGiaTheoBang(bangGiaVinTruck, kgInput, vung);
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const giaGocEco = tinhGiaTheoBang(bangGiaVinEco, kgInput, vung);
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

ƒêang ki·ªÉm tra l·∫°i logic. Theo v√≠ d·ª•, 98kg (W_d∆∞) n·∫±m trong khung "Tr√™n 50 - 100 kg". ƒêi·ªÅu ch·ªânh logic ƒë·ªÉ kh·ªõp:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return gia10kgDau;
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // Quy t·∫Øc: Tra b·∫£ng gi√° d·ª±a tr√™n W_d∆∞ ƒë·ªÉ t√¨m ƒë∆°n gi√° t∆∞∆°ng ·ª©ng
        // Khung "Tr√™n 50 - 100 kg" nghƒ©a l√† t·ª´ 51kg ƒë·∫øn 100kg ‚Üí W_d∆∞ t·ª´ 41 ƒë·∫øn 90
        // Khung "Tr√™n 100 - 300 kg" nghƒ©a l√† t·ª´ 101kg ƒë·∫øn 300kg ‚Üí W_d∆∞ t·ª´ 91 ƒë·∫øn 290
        let donGiaKhung = 0;
        
        // X√°c ƒë·ªãnh khung gi√°: Khung "Tr√™n 50 - 100 kg" bao g·ªìm t·ª´ 51kg ƒë·∫øn 100kg
        // W_d∆∞ t·ª´ 41 ƒë·∫øn 90 (v√¨ 51-10=41, 100-10=90)
        // Nh∆∞ng theo v√≠ d·ª•: 98kg (W_d∆∞) n·∫±m trong khung "Tr√™n 50 - 100 kg"
        // V·∫≠y khung n√†y c√≥ th·ªÉ bao g·ªìm W_d∆∞ ƒë·∫øn 98, t·ª©c l√† ƒë·∫øn kho·∫£ng 100
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (t·ª´ 11kg ƒë·∫øn 50kg)
            donGiaKhung = bangGia[50][vung];
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg" (t·ª´ 51kg ƒë·∫øn d∆∞·ªõi 100kg)
            donGiaKhung = bangGia[100][vung];
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (t·ª´ 100kg ƒë·∫øn 300kg)
            donGiaKhung = bangGia[300][vung];
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (t·ª´ 301kg ƒë·∫øn 500kg)
            donGiaKhung = bangGia[500][vung];
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (t·ª´ 501kg ƒë·∫øn 1000kg)
            donGiaKhung = bangGia[1000][vung];
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (t·ª´ 1001kg ƒë·∫øn 2000kg)
            donGiaKhung = bangGia[2000][vung];
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (t·ª´ 2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
        }
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + wDu * donGiaKhung;
        
        return Math.round(giaGoc);
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const giaGocTruck = tinhGiaTheoBang(bangGiaVinTruck, kgInput, vung);
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const giaGocEco = tinhGiaTheoBang(bangGiaVinEco, kgInput, vung);
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

ƒêang ki·ªÉm tra l·∫°i to√†n b·ªô logic v√† t·∫°o b√°o c√°o ki·ªÉm tra:


T·∫°o b√°o c√°o ki·ªÉm tra c√¥ng th·ª©c:


T·∫°o file test ƒë·ªÉ ki·ªÉm tra:


```javascript
// Test c√¥ng th·ª©c t√≠nh c∆∞·ªõc ph√≠
const bangGiaVinTruck = {
    10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000],
    100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000]
};

// Test v·ªõi v√≠ d·ª•: 108kg, V√πng 8, Ngo·∫°i tuy·∫øn
const kg = 108;
const vung = 8;
const wDu = kg - 10; // 98kg
const gia10kgDau = bangGiaVinTruck[10][vung]; // 180,000 ƒë

// X√°c ƒë·ªãnh khung gi√°
let donGiaKhung = 0;
if (wDu < 100) {
    donGiaKhung = bangGiaVinTruck[100][vung]; // 9,000 ƒë/kg
}

// T√≠nh gi√° g·ªëc
const giaGoc = gia10kgDau + wDu * donGiaKhung;

// Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
const sauNhiLieuVAT = Math.round(giaGoc * 1.32);

// Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau
const tong = Math.round(sauNhiLieuVAT * 1.3);

console.log('=== KIEM TRA CONG THUC TINH CUOC PHI ===');
console.log('Trong luong:', kg, 'kg');
console.log('Vung:', vung);
console.log('W_du:', wDu, 'kg');
console.log('Khung gia: Tren 50 - 100 kg');
console.log('Don gia:', donGiaKhung.toLocaleString('vi-VN'), 'd/kg');
console.log('Gia 10kg dau:', gia10kgDau.toLocaleString('vi-VN'), 'd');
console.log('Gia goc:', giaGoc.toLocaleString('vi-VN'), 'd');
console.log('Sau 1.32 (nhien lieu & VAT):', sauNhiLieuVAT.toLocaleString('vi-VN'), 'd');
console.log('Sau 1.3 (ngoai tuyen):', tong.toLocaleString('vi-VN'), 'd');
console.log('Ket qua mong doi: 1,822,392 d');
console.log('Ket qua tinh duoc:', tong.toLocaleString('vi-VN'), 'd');
console.log('Khop:', tong === 1822392 ? 'DUNG' : 'SAI');

```

C√¥ng th·ª©c ƒë√£ ƒë√∫ng. ƒêang x√≥a file test v√† t·∫°o b√°o c√°o:


## B√ÅO C√ÅO KI·ªÇM TRA C√îNG TH·ª®C T√çNH C∆Ø·ªöC PH√ç

### K·∫øt qu·∫£ ki·ªÉm tra: ƒê√öNG

### 1. Logic x√°c ƒë·ªãnh khung gi√° (d·ª±a tr√™n W_d∆∞)
- W_d∆∞ = T·ªïng kg - 10
- Khung gi√° ƒë∆∞·ª£c x√°c ƒë·ªãnh d·ª±a tr√™n W_d∆∞, kh√¥ng ph·∫£i t·ªïng kg
- Logic: `wDu < 100` ‚Üí khung "Tr√™n 50 - 100 kg"

### 2. Th·ª© t·ª± nh√¢n h·ªá s·ªë
- B∆∞·ªõc 1: Nh√¢n 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
- B∆∞·ªõc 2: Nh√¢n 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)

### 3. Test v·ªõi v√≠ d·ª• chu·∫©n

V√≠ d·ª•: 108kg, V√πng 8, Ngo·∫°i tuy·∫øn

```
Tr·ªçng l∆∞·ª£ng: 108 kg
V√πng: 8
W_d∆∞: 98 kg
Khung gi√°: Tr√™n 50 - 100 kg
ƒê∆°n gi√°: 9,000 ƒë/kg
Gi√° 10kg ƒë·∫ßu: 180,000 ƒë
Gi√° g·ªëc: 1,062,000 ƒë
Sau 1.32 (nhi√™n li·ªáu & VAT): 1,401,840 ƒë
Sau 1.3 (ngo·∫°i tuy·∫øn): 1,822,392 ƒë
K·∫øt qu·∫£ mong ƒë·ª£i: 1,822,392 ƒë
K·∫øt qu·∫£ t√≠nh ƒë∆∞·ª£c: 1,822,392 ƒë
‚úÖ KH·ªöP: ƒê√öNG
```

### 4. C√°c ƒëi·ªÉm ƒë√£ ki·ªÉm tra

- X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (kg - 10)
- C√¥ng th·ª©c: `Gi√° G·ªëc = P_10 + W_d∆∞ √ó ƒêG_khung`
- Nh√¢n h·ªá s·ªë 1.32 tr∆∞·ªõc
- Nh√¢n h·ªá s·ªë 1.3 sau (n·∫øu ngo·∫°i tuy·∫øn)
- L√†m tr√≤n b·∫±ng `Math.round()`

### 5. K·∫øt lu·∫≠n

C√¥ng th·ª©c t√≠nh c∆∞·ªõc ph√≠ hi·ªán t·∫°i ƒë√£ ƒë√∫ng theo quy ƒë·ªãnh m·ªõi (2025):
- VIN-TRUCK: √Åp d·ª•ng quy ƒë·ªãnh m·ªõi
- VIN-ECO: √Åp d·ª•ng quy ƒë·ªãnh m·ªõi (t·ªëi thi·ªÉu 30kg)
- VIN-EXPRESS: Gi·ªØ nguy√™n logic c≈©
- VIN-HOATOC: Gi·ªØ nguy√™n logic c≈©

Code s·∫µn s√†ng s·ª≠ d·ª•ng.

```plaintext
Tr·ªçng l∆∞·ª£ng: 108 kg
V√πng: 8
W_d∆∞: 98 kg
Khung gi√°: Tr√™n 50 - 100 kg
ƒê∆°n gi√°: 9,000 ƒë/kg
Gi√° 10kg ƒë·∫ßu: 180,000 ƒë
Gi√° g·ªëc: 1,062,000 ƒë
Sau 1.32 (nhi√™n li·ªáu & VAT): 1,401,840 ƒë
Sau 1.3 (ngo·∫°i tuy·∫øn): 1,822,392 ƒë
K·∫øt qu·∫£ mong ƒë·ª£i: 1,822,392 ƒë
K·∫øt qu·∫£ t√≠nh ƒë∆∞·ª£c: 1,822,392 ƒë
‚úÖ KH·ªöP: ƒê√öNG
```

---

**User**

t√¥i mu·ªën ph·∫ßn k·∫øt qu·∫£ t√≠nh c∆∞·ªõc n√≥ ph·∫£i hi·ªÉn th·ªã r√µ quy tr√¨nh nh∆∞ , t·ªânh qu·∫≠n huy·ªán thu·ªôc v√πng n√†o , tr·ª´ 10kg" n·∫øu s·ªë kg h∆°n 10kg"  10kg ƒë√≥ bao nhi√™u ti·ªÅn , r·ªìi s·ªë kg c√≤n l·∫°i bao nhi√™u , nh√¢n cho bao nhi√™u ...... h√£y ghi r√µ ra r·ªìi m·ªõi t·ªõi b·∫£ng gi√° ti·ªÅn c·ªßa m·ªói d·ªãch v·ª•

---

**Cursor**

ƒêang ki·ªÉm tra ph·∫ßn hi·ªÉn th·ªã k·∫øt qu·∫£ ƒë·ªÉ th√™m quy tr√¨nh t√≠nh to√°n chi ti·∫øt:


ƒêang c·∫≠p nh·∫≠t ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt. S·ª≠a ph·∫ßn t√≠nh to√°n ƒë·ªÉ l∆∞u th√¥ng tin chi ti·∫øt:


C·∫≠p nh·∫≠t h√†m t√≠nh to√°n ƒë·ªÉ tr·∫£ v·ªÅ th√¥ng tin chi ti·∫øt, r·ªìi c·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const giaGocTruck = tinhGiaTheoBang(bangGiaVinTruck, kgInput, vung);
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const giaGocEco = tinhGiaTheoBang(bangGiaVinEco, kgInput, vung);
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t ph·∫ßn t√≠nh to√°n VIN-TRUCK v√† VIN-ECO ƒë·ªÉ l∆∞u th√¥ng tin chi ti·∫øt:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen,
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t ph·∫ßn t·∫°o object ketQua v√† h√†m hi·ªÉn th·ªã:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen,
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t h√†m hi·ªÉn th·ªã ƒë·ªÉ th√™m ph·∫ßn quy tr√¨nh t√≠nh to√°n chi ti·∫øt:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen,
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt (cho VIN-TRUCK v√† VIN-ECO)
        if (ketQua.chiTietQuyTrinh && ketQua.trongLuong > 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">7</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        } else if (ketQua.chiTietQuyTrinh && ketQua.trongLuong <= 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        }
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t h√†m `tinhGiaTheoBang` ƒë·ªÉ x·ª≠ l√Ω ƒë√∫ng tr∆∞·ªùng h·ª£p ‚â§ 10kg:


C·∫≠p nh·∫≠t ph·∫ßn t√≠nh to√°n ƒë·ªÉ x·ª≠ l√Ω ƒë√∫ng tr∆∞·ªùng h·ª£p ‚â§ 10kg:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt (cho VIN-TRUCK v√† VIN-ECO)
        if (ketQua.chiTietQuyTrinh && ketQua.trongLuong > 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">7</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        } else if (ketQua.chiTietQuyTrinh && ketQua.trongLuong <= 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        }
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

ƒêang ki·ªÉm tra l·ªói v√† th√™m CSS cho ph·∫ßn quy tr√¨nh t√≠nh to√°n:


ƒêang t√¨m ph·∫ßn CSS cho shipping result ƒë·ªÉ th√™m style cho quy tr√¨nh t√≠nh to√°n:


Th√™m CSS cho ph·∫ßn quy tr√¨nh t√≠nh to√°n:


```css
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap');

/* ========================
   VARIABLES & RESET
   ======================== */
:root {
    /* Colors - Light Theme (Default) */
    --primary: #1a73e8;
    --primary-dark: #1557b0;
    --secondary: #34a853;
    --danger: #ea4335;
    --warning: #fbbc04;
    --background: #f8f9fa;
    --surface: #ffffff;
    --surface-variant: #f1f3f4;
    --on-surface: #202124;
    --on-surface-variant: #5f6368;
    --border: #dadce0;
    --shadow-sm: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
    --shadow-md: 0 1px 3px 0 rgba(60,64,67,0.3), 0 4px 8px 3px rgba(60,64,67,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(60,64,67,0.3), 0 8px 12px 6px rgba(60,64,67,0.15);
    
    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-full: 9999px;
    
    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Typography */
    --font-family: 'Be Vietnam Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-size-base: 16px;
    --font-size-small: 14px;
    --font-size-large: 18px;
}

/* Dark Theme */
[data-theme="dark"] {
    --primary: #8ab4f8;
    --primary-dark: #669df6;
    --secondary: #34a853;
    --danger: #f28b82;
    --warning: #fdd663;
    --background: #121212;
    --surface: #1e1e1e;
    --surface-variant: #2d2d2d;
    --on-surface: #e8eaed;
    --on-surface-variant: #9aa0a6;
    --border: #3c4043;
    --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
    --shadow-md: 0 1px 3px 0 rgba(0,0,0,0.3), 0 4px 8px 3px rgba(0,0,0,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(0,0,0,0.3), 0 8px 12px 6px rgba(0,0,0,0.15);
}

/* Size Variants */
[data-size="tiny"] {
    --font-size-base: 12px;
    --font-size-small: 10px;
    --font-size-large: 14px;
    --font-size-nav: 11px;
    --spacing-xs: 2px;
    --spacing-sm: 4px;
    --spacing-md: 8px;
    --spacing-lg: 12px;
    --spacing-xl: 16px;
}

[data-size="small"] {
    --font-size-base: 14px;
    --font-size-small: 12px;
    --font-size-large: 16px;
    --font-size-nav: 13px;
    --spacing-xs: 3px;
    --spacing-sm: 6px;
    --spacing-md: 12px;
    --spacing-lg: 18px;
    --spacing-xl: 24px;
}

[data-size="large"] {
    --font-size-base: 18px;
    --font-size-small: 16px;
    --font-size-large: 20px;
    --font-size-nav: 17px;
    --spacing-xs: 5px;
    --spacing-sm: 10px;
    --spacing-md: 20px;
    --spacing-lg: 28px;
    --spacing-xl: 36px;
}

/* Add default nav font size and tab-specific fonts */
:root {
    --font-size-nav: 15px;
    --font-size-tabs: 16px;
    --font-size-tab-title: 18px;
    --font-size-tab-content: 14px;
    --font-size-tab-small: 13px;
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    color: var(--on-surface);
    background: var(--background);
    transition: all var(--transition-base);
}

body {
    font-family: var(--font-family);
    background: var(--background);
    color: var(--on-surface);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
}

/* Tab-specific font sizes */
#cbm-calculator,
#history {
    font-size: var(--font-size-tabs);
}

/* Tab font sizes for different sizes */
html[data-tab-size="tiny"] {
    --font-size-tabs: 12px !important;
    --font-size-tab-title: 13px !important;
    --font-size-tab-content: 11px !important;
    --font-size-tab-small: 10px !important;
}

html[data-tab-size="small"] {
    --font-size-tabs: 14px !important;
    --font-size-tab-title: 15px !important;
    --font-size-tab-content: 13px !important;
    --font-size-tab-small: 11px !important;
}

html[data-tab-size="medium"] {
    --font-size-tabs: 16px !important;
    --font-size-tab-title: 18px !important;
    --font-size-tab-content: 14px !important;
    --font-size-tab-small: 13px !important;
}

html[data-tab-size="large"] {
    --font-size-tabs: 18px !important;
    --font-size-tab-title: 20px !important;
    --font-size-tab-content: 16px !important;
    --font-size-tab-small: 15px !important;
}

/* ========================
   APP LAYOUT - MOBILE FIRST
   ======================== */
#app {
    display: flex;
    flex-direction: column;
    height: 100vh;
    height: 100dvh;
    width: 100%;
}

/* Header - Hidden on mobile, shown on desktop */
.app-header {
    display: none;
}

/* Sidebar - Hidden on mobile, shown on desktop */
.sidebar-nav {
    display: none;
}

/* Main Content - Full height on mobile */
.main-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: var(--spacing-md);
    padding-top: var(--spacing-md); /* Hamburger is transparent, no space needed */
    scroll-behavior: smooth;
}

/* Hamburger Menu - Mobile only */
.hamburger-menu {
    position: fixed;
    top: 8px;
    left: 8px;
    width: 28px;
    height: 28px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    border: none;
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 3px;
    padding: 0;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
}

/* TƒÉng v√πng click cho hamburger */
.hamburger-menu::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
}

.hamburger-menu:hover {
    background: rgba(0, 0, 0, 0.4);
}

.hamburger-menu span {
    width: 16px;
    height: 2px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 1px;
    transition: all var(--transition-fast);
    box-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.hamburger-menu:active span {
    background: rgba(255, 255, 255, 1);
    transform: scaleX(1.1);
}

.hamburger-menu.hidden {
    opacity: 0;
    pointer-events: none;
}

/* Slide Menu - Mobile only */
.slide-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    height: 100vh;
    background: var(--surface);
    box-shadow: var(--shadow-lg);
    transform: translateX(-100%);
    transition: transform var(--transition-slow);
    z-index: 1100;
    display: flex;
    flex-direction: column;
}

.slide-menu.open {
    transform: translateX(0);
}

.slide-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border);
    background: var(--surface);
    color: var(--on-surface);
}

.menu-title {
    font-size: 20px;
    font-weight: 700;
}

.close-menu {
    width: 36px;
    height: 36px;
    border: 1px solid var(--border);
    background: var(--surface-variant);
    color: var(--on-surface);
    font-size: 28px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.close-menu:active {
    background: rgba(255,255,255,0.3);
}

.slide-menu-nav {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-md);
    gap: var(--spacing-xs);
}

.slide-menu-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: transparent;
    border: none;
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-nav);
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: left;
}

.slide-menu-item .menu-icon {
    font-size: 24px;
}

.slide-menu-item:active {
    transform: scale(0.98);
}

.slide-menu-item.active {
    background: #e8f0fe;
    color: var(--primary);
    font-weight: 600;
}

.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--transition-base);
    z-index: 1050;
}

.menu-overlay.visible {
    opacity: 1;
    pointer-events: all;
}

/* Theme Toggle Button - Medium Size & Adaptive */
.theme-toggle {
    position: fixed;
    top: 8px;
    right: 8px;
    width: 32px;
    height: 32px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.theme-toggle:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
    background: var(--primary);
    border-color: var(--primary);
}

.theme-toggle:active {
    transform: scale(0.95);
}

.theme-icon {
    position: absolute;
    font-size: 14px;
    transition: all var(--transition-base);
    filter: brightness(1);
}

.sun-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: #f59e0b;
}

.moon-icon {
    opacity: 0;
    transform: rotate(-180deg) scale(0.5);
    color: #6366f1;
}

[data-theme="dark"] .sun-icon {
    opacity: 0;
    transform: rotate(180deg) scale(0.5);
}

[data-theme="dark"] .moon-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
}

/* Adaptive colors based on theme */
[data-theme="light"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

[data-theme="dark"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

/* Bottom Navigation - REMOVED (using hamburger menu instead) */
.bottom-nav {
    display: none;
}

/* ========================
   TAB CONTENT
   ======================== */
.tab-content {
    display: none;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    animation: fadeIn var(--transition-base);
}

.tab-content.active {
    display: flex;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================
   INPUT STYLES
   ======================== */
input[type="number"],
input[type="text"] {
    width: 100%;
    padding: 14px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-base);
    font-weight: 500;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-appearance: none;
    appearance: none;
}

/* Input fields in CBM Calculator and History tabs */
#cbm-calculator input[type="number"],
#cbm-calculator input[type="text"],
#history input[type="text"] {
    font-size: var(--font-size-tabs);
}

input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

input::placeholder {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Remove number spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
}

input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
}

/* ========================
   BUTTON STYLES
   ======================== */
button {
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    font-weight: 600;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-tap-highlight-color: transparent;
}

button:active {
    transform: scale(0.97);
}

/* ========================
   CBM CALCULATOR TAB
   ======================== */
#cbm-calculator {
    justify-content: space-between;
}

#cbm-main-content {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.group-item {
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    animation: slideUp var(--transition-base);
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.group-item p {
    margin: 0 0 8px 0;
    line-height: 1.6;
    font-size: var(--font-size-tab-content, 14px);
}

.group-item .value {
    color: var(--primary);
    font-weight: 600;
}

.group-title {
    font-weight: 700;
    color: var(--on-surface);
    font-size: var(--font-size-tabs, 16px);
    margin-bottom: 12px !important;
}

.group-item.current-input {
    border-left-color: var(--primary);
    background: #e8f0fe;
    color: var(--on-surface);
}

[data-theme="dark"] .group-item.current-input {
    background: var(--surface-variant);
    color: var(--on-surface);
}

.group-item hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: var(--spacing-md) 0;
}

.empty-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: var(--font-size-tab-content, 14px);
}

/* CBM Controls */
#cbm-controls {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    flex-shrink: 0;
}

#cbm-actions {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: var(--spacing-sm);
}

#cbm-actions button {
    padding: 12px;
    font-size: var(--font-size-tab-content, 14px);
    color: white;
    box-shadow: var(--shadow-sm);
}

#btn-back1,
#btn-back2 {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
}

#btn-reset {
    background: linear-gradient(135deg, var(--danger), #c5221f);
}

#cbm-actions button:hover {
    box-shadow: var(--shadow-md);
    filter: brightness(1.05);
}

/* ========================
   HISTORY TAB
   ======================== */
.history-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

/* Search Bar */
.search-bar {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

.search-bar input {
    flex: 1;
    min-width: 0;
}

.search-bar button {
    background: var(--primary);
    color: white;
    padding: 0 20px;
    font-size: var(--font-size-tab-content, 14px);
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

/* History List */
#history-list {
    background: var(--surface);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.history-header {
    font-size: var(--font-size-tab-title, 18px);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.history-stats {
    font-size: var(--font-size-tab-small, 13px);
    color: var(--on-surface-variant);
    font-weight: 500;
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    background: #e8f0fe;
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
}

.history-item {
    padding: var(--spacing-md);
    margin: var(--spacing-sm) 0;
    word-wrap: break-word;
    line-height: 1.7;
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    font-size: var(--font-size-tab-content, 14px);
    color: var(--on-surface);
    animation: slideUp var(--transition-base);
    box-shadow: var(--shadow-sm);
}

/* Pagination */
.pagination-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-shrink: 0;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
}

.pagination-controls button {
    background: var(--primary);
    color: white;
    padding: 10px 20px;
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    min-width: 90px;
    box-shadow: var(--shadow-sm);
}

.pagination-controls button:disabled {
    background: var(--border);
    color: var(--on-surface-variant);
    cursor: not-allowed;
    opacity: 0.5;
}

#page-info {
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    color: var(--on-surface);
    white-space: nowrap;
}

/* History Controls */
.history-controls {
    display: flex;
    flex-shrink: 0;
}

#clear-history-button {
    background: var(--danger);
    color: white;
    width: 100%;
    font-size: var(--font-size-tabs, 15px);
    padding: 14px 0;
    font-weight: 600;
    box-shadow: var(--shadow-md);
}

/* ========================
   PROVINCE CHECKER TAB
   ======================== */
.province-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

.province-input-section {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

#province-input {
    flex: 1;
    min-width: 0;
}

#btn-clear-province {
    background: var(--danger);
    color: white;
    padding: 0 20px;
    font-size: 14px;
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

.province-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    flex: 1;
    overflow-y: auto;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.province-header {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
    text-align: center;
}

.province-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: 14px;
    line-height: 1.6;
}

.province-item {
    padding: var(--spacing-md);
    margin: var(--spacing-xs) 0;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--border);
    font-size: 14px;
    line-height: 1.6;
    animation: slideUp var(--transition-base);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.province-item .time {
    color: var(--on-surface-variant);
    font-size: 12px;
    font-weight: 500;
}

.province-item .name {
    font-weight: 600;
    color: var(--on-surface);
}

.province-item .arrow {
    color: var(--on-surface-variant);
}

.province-item .result {
    font-weight: 700;
    font-size: 16px;
}

.province-item.hang-bay {
    border-left-color: var(--danger);
}

.province-item.hang-bay .result {
    color: var(--danger);
}

.province-item.hang-bo {
    border-left-color: var(--secondary);
}

.province-item.hang-bo .result {
    color: var(--secondary);
}

/* ========================
   SCROLLBAR
   ======================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--on-surface-variant);
}

/* ========================
   DESKTOP STYLES (‚â•768px)
   ======================== */
@media (min-width: 768px) {
    /* Show desktop elements */
    .app-header {
        display: block;
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: white;
        padding: var(--spacing-lg) var(--spacing-xl);
        box-shadow: var(--shadow-md);
        z-index: 10;
    }
    
    .header-content {
        max-width: 1400px;
        margin: 0 auto;
    }
    
    .app-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: var(--spacing-xs);
    }
    
    .app-subtitle {
        font-size: 14px;
        opacity: 0.9;
        font-weight: 500;
    }
    
    .sidebar-nav {
        display: flex;
        flex-direction: column;
        position: fixed;
        left: 0;
        top: 0;
        width: 260px;
        height: 100vh;
        background: var(--surface);
        border-right: 1px solid var(--border);
        padding: var(--spacing-lg);
        gap: var(--spacing-sm);
        box-shadow: var(--shadow-sm);
        z-index: 50;
    }
    
    .nav-brand {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        border-bottom: 2px solid var(--border);
    }
    
    .brand-icon {
        font-size: 32px;
    }
    
    .brand-text {
        font-size: 20px;
        font-weight: 700;
        color: var(--on-surface);
    }
    
    .nav-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        background: transparent;
        color: var(--on-surface-variant);
        text-align: left;
        border-radius: var(--radius-md);
        transition: all var(--transition-fast);
        font-size: var(--font-size-nav);
    }
    
    .nav-icon {
        font-size: 24px;
    }
    
    .nav-text {
        font-weight: 500;
    }
    
    .nav-item:hover {
        background: var(--surface-variant);
    }
    
    .nav-item.active {
        background: #e8f0fe;
        color: var(--primary);
        font-weight: 600;
    }
    
    /* Hide bottom nav on desktop */
    .bottom-nav {
        display: none;
    }
    
    /* Hide hamburger menu on desktop */
    .hamburger-menu,
    .slide-menu,
    .menu-overlay {
        display: none;
    }
    
    /* Adjust main content for desktop */
    #app {
        display: grid;
        grid-template-columns: 260px 1fr;
        grid-template-rows: auto 1fr;
    }
    
    .app-header {
        grid-column: 2 / 3;
        grid-row: 1 / 2;
    }
    
    .sidebar-nav {
        grid-column: 1 / 2;
        grid-row: 1 / 3;
        position: static;
        height: auto;
    }
    
    .main-content {
        grid-column: 2 / 3;
        grid-row: 2 / 3;
        padding: var(--spacing-xl);
        padding-bottom: var(--spacing-xl);
        max-width: 1400px;
        margin: 0 auto;
        width: 100%;
    }
    
    /* Desktop specific adjustments */
    .search-bar {
        flex-direction: row;
    }
    
    .pagination-controls {
        justify-content: center;
        gap: var(--spacing-lg);
    }
    
    .pagination-controls button {
        min-width: 120px;
        padding: 12px 24px;
        font-size: var(--font-size-tabs, 15px);
    }
    
    #page-info {
        font-size: var(--font-size-tabs, 15px);
        min-width: 120px;
        text-align: center;
    }
}

/* Large Desktop (‚â•1200px) */
@media (min-width: 1200px) {
    .sidebar-nav {
        width: 280px;
    }
    
    #app {
        grid-template-columns: 280px 1fr;
    }
    
    .main-content {
        padding: var(--spacing-xl) 48px;
    }
}

/* ========================
   SHIPPING CALCULATOR STYLES
   ======================== */

.shipping-calculator-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    max-width: 100%;
    padding: 0;
    height: 100%;
}

/* Form nh·∫≠p li·ªáu */
.shipping-form {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
}

.form-header {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-md);
    text-align: center;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.form-group {
    margin-bottom: var(--spacing-sm);
}

.form-group label {
    display: block;
    font-weight: 600;
    color: var(--on-surface);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-small);
}

.form-group select,
.form-group input[type="number"] {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-base);
    font-family: var(--font-family);
    background: var(--surface);
    color: var(--on-surface);
    transition: all var(--transition-fast);
}

.form-group select:focus,
.form-group input[type="number"]:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

.form-group select:disabled {
    background: var(--surface-variant);
    cursor: not-allowed;
    opacity: 0.6;
}

.form-actions {
    display: flex;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-lg);
}

.form-actions button {
    flex: 1;
    padding: 14px 24px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: var(--font-size-base);
    font-weight: 600;
    font-family: var(--font-family);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    background: var(--surface-variant);
    color: var(--on-surface-variant);
}

.btn-secondary:hover {
    background: var(--border);
}

/* K·∫øt qu·∫£ */
.shipping-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    min-height: 150px;
    flex: 1;
    overflow-y: auto;
}

.result-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-lg);
    font-size: var(--font-size-base);
}

.result-header {
    margin-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--border);
    padding-bottom: var(--spacing-sm);
}

.result-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.result-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-sm);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.info-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.info-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
}

/* Quy tr√¨nh t√≠nh to√°n chi ti·∫øt */
.calculation-process {
    background: linear-gradient(135deg, var(--surface-variant) 0%, var(--surface) 100%);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border: 2px solid var(--primary);
    box-shadow: var(--shadow-md);
}

.process-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-md);
    text-align: center;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.process-steps {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.process-step {
    display: flex;
    gap: var(--spacing-sm);
    align-items: flex-start;
    background: var(--surface);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
    transition: all var(--transition-base);
}

.process-step:hover {
    background: var(--surface-variant);
    transform: translateX(4px);
}

.step-number {
    min-width: 32px;
    height: 32px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-base);
    flex-shrink: 0;
}

.step-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.step-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.step-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
    line-height: 1.5;
}

.step-value strong {
    color: var(--primary);
    font-weight: 700;
}

/* Cards d·ªãch v·ª• */
.services-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.service-card {
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    border: 2px solid var(--border);
    transition: all var(--transition-base);
    animation: fadeInUp 0.4s ease-out both;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.service-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary);
}

.service-card.service-disabled {
    opacity: 0.6;
    background: var(--surface);
    border-color: var(--border);
    cursor: not-allowed;
}

.service-card.service-disabled:hover {
    transform: none;
    box-shadow: none;
    border-color: var(--border);
}

.service-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.service-icon {
    font-size: 24px;
}

.service-name {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--on-surface);
}

.service-body {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Ph√¢n t√≠ch gi√° */
.price-breakdown {
    background: var(--surface);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
}

.breakdown-title {
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-small);
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    font-size: var(--font-size-small);
}

.breakdown-label {
    color: var(--on-surface-variant);
}

.breakdown-value {
    font-weight: 600;
    color: var(--on-surface);
}

.breakdown-item.surcharge .breakdown-value {
    color: var(--warning);
}

.breakdown-item.total {
    margin-top: var(--spacing-xs);
    padding-top: var(--spacing-sm);
    font-size: var(--font-size-base);
    font-weight: 700;
}

.breakdown-item.total .breakdown-label {
    color: var(--on-surface);
}

.breakdown-item.total .breakdown-value {
    color: var(--primary);
    font-size: 18px;
}

.breakdown-separator {
    height: 1px;
    background: var(--border);
    margin: var(--spacing-xs) 0;
}

/* Disabled notice */
.service-disabled-notice {
    text-align: center;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border: 2px dashed var(--border);
}

.disabled-icon {
    font-size: 36px;
    margin-bottom: var(--spacing-xs);
}

.disabled-text {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--on-surface-variant);
    margin-bottom: var(--spacing-xs);
}

.disabled-reason {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-style: italic;
}

/* Th·ªùi gian giao h√†ng */
.service-time {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--secondary);
}

.time-icon {
    font-size: 18px;
}

.time-text {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 600;
}

/* B·∫£ng so s√°nh */
.comparison-section {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
}

.comparison-title {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.comparison-table {
    overflow-x: auto;
}

.comparison-table table {
    width: 100%;
    border-collapse: collapse;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.comparison-table thead {
    background: var(--primary);
    color: white;
}

.comparison-table th,
.comparison-table td {
    padding: 8px 12px;
    text-align: left;
    font-size: var(--font-size-small);
}

.comparison-table th {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.comparison-table tbody tr {
    border-bottom: 1px solid var(--border);
    transition: background var(--transition-fast);
}

.comparison-table tbody tr:last-child {
    border-bottom: none;
}

.comparison-table tbody tr:hover {
    background: var(--surface);
}

.comparison-table .table-icon {
    margin-right: 8px;
}

.comparison-table .price-cell {
    font-weight: 700;
    color: var(--primary);
    font-size: var(--font-size-base);
}

.comparison-table .row-disabled {
    opacity: 0.5;
    font-style: italic;
}

.comparison-table .row-disabled .price-cell {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Responsive cho mobile */
@media (max-width: 768px) {
    .shipping-calculator-container {
        gap: var(--spacing-sm);
        padding: 0;
    }
    
    .shipping-form,
    .shipping-result {
        padding: var(--spacing-sm);
        border-radius: var(--radius-sm);
    }
    
    .form-header,
    .result-title,
    .comparison-title {
        font-size: var(--font-size-base);
    }
    
    .form-actions {
        flex-direction: column;
        gap: var(--spacing-xs);
    }
    
    .form-actions button {
        width: 100%;
        padding: 12px 20px;
    }
    
    .services-container {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .service-card {
        padding: var(--spacing-xs);
    }
    
    .result-info {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .comparison-table table {
        font-size: 11px;
    }
    
    .comparison-table th,
    .comparison-table td {
        padding: 6px 8px;
    }
}

```

ƒêang ki·ªÉm tra l·ªói:


ƒê√£ ho√†n t·∫•t. T√≥m t·∫Øt thay ƒë·ªïi:

## T√≥m t·∫Øt thay ƒë·ªïi

### 1. C·∫≠p nh·∫≠t h√†m t√≠nh to√°n
- S·ª≠a `tinhGiaTheoBangMoi()` ƒë·ªÉ tr·∫£ v·ªÅ th√¥ng tin chi ti·∫øt:
  - `gia10kgDau`: Gi√° 10kg ƒë·∫ßu ti√™n
  - `wDu`: S·ªë kg c√≤n l·∫°i (W_d∆∞)
  - `donGiaKhung`: ƒê∆°n gi√° theo khung
  - `khungGiaTen`: T√™n khung gi√°
  - `tienPhanDu`: Ti·ªÅn ph·∫ßn d∆∞
  - `giaGoc`: Gi√° g·ªëc

### 2. Hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt
Ph·∫ßn hi·ªÉn th·ªã bao g·ªìm:
1. X√°c ƒë·ªãnh v√πng v√† tuy·∫øn: T·ªânh/Qu·∫≠n/Huy·ªán ‚Üí V√πng - Tuy·∫øn
2. Tr·ª´ 10kg ƒë·∫ßu ti√™n: T·ªïng kg - 10kg = W_d∆∞ (n·∫øu > 10kg)
3. Gi√° 10kg ƒë·∫ßu ti√™n: Hi·ªÉn th·ªã gi√° theo v√πng
4. X√°c ƒë·ªãnh khung gi√°: Khung gi√° v√† ƒë∆°n gi√° t∆∞∆°ng ·ª©ng
5. T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒê∆°n gi√°
6. T√≠nh gi√° g·ªëc: Gi√° 10kg + Ti·ªÅn ph·∫ßn d∆∞
7. Nh√¢n h·ªá s·ªë 1.32: Nhi√™n li·ªáu & VAT
8. Nh√¢n h·ªá s·ªë 1.3: Ngo·∫°i tuy·∫øn (n·∫øu c√≥)

### 3. CSS cho ph·∫ßn quy tr√¨nh
- Th√™m style cho `.calculation-process`, `.process-step`, `.step-number`, v.v.
- Hi·ªáu ·ª©ng hover v√† animation

### 4. L∆∞u √Ω
- Ch·ªâ hi·ªÉn th·ªã quy tr√¨nh cho VIN-TRUCK v√† VIN-ECO (√°p d·ª•ng quy ƒë·ªãnh m·ªõi)
- VIN-EXPRESS v√† VIN-HOATOC kh√¥ng hi·ªÉn th·ªã quy tr√¨nh (gi·ªØ logic c≈©)
- X·ª≠ l√Ω tr∆∞·ªùng h·ª£p ‚â§ 10kg (kh√¥ng tr·ª´ 10kg)

Khi t√≠nh c∆∞·ªõc ph√≠, ph·∫ßn k·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt tr∆∞·ªõc khi hi·ªÉn th·ªã b·∫£ng gi√° c·ªßa t·ª´ng d·ªãch v·ª•.

---

**User**

T√¥i mu·ªën c√°i b·∫£ng hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt n√≥ ph·∫£i c√≥ c·ªßa 4 d·ªãch v·ª• , b·ªô , tiet kiem , cpn , hoa t·ªëc , nh∆∞ng n√≥ ko t·ª± hi·ªán m√† ph·∫£i ch·ªù ng∆∞·ªùi d√πng nh·∫•p v√†o b·∫£ng k·∫øt qu·∫£ ph√≠ c·ªßa n√≥ , v√≠ d·ª± ng∆∞·ªùi d√πng nh√°p v√†o b·∫£ng h·ªèa t·ªëc th√¨ b·∫£ng chi ti·∫øt t√≠nh ph√≠ c·ªßa h·ªèa t·ªëc s·∫Ω hi·ªán ra , c√≤n khi nh·∫•p v√†o ƒë∆∞·ªùng b·ªô c·ªßng hi·ªán ra , t∆∞∆°ng t·ª± v·∫≠y v·ªõi 2 b·∫£ng c√≤n l·∫°i

---

**Cursor**

ƒêang c·∫≠p nh·∫≠t ƒë·ªÉ m·ªói d·ªãch v·ª• c√≥ quy tr√¨nh t√≠nh to√°n ri√™ng v√† ch·ªâ hi·ªÉn th·ªã khi click v√†o d·ªãch v·ª• ƒë√≥. B·∫Øt ƒë·∫ßu b·∫±ng vi·ªác t√≠nh to√°n chi ti·∫øt cho c·∫£ 4 d·ªãch v·ª•:


T·∫°o h√†m t√≠nh to√°n chi ti·∫øt cho VIN-EXPRESS v√† VIN-HOATOC, r·ªìi c·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã ƒë·ªÉ c√≥ th·ªÉ click v√†o t·ª´ng d·ªãch v·ª•:


T·∫°o h√†m t√≠nh to√°n chi ti·∫øt cho VIN-EXPRESS v√† VIN-HOATOC:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt (cho VIN-TRUCK v√† VIN-ECO)
        if (ketQua.chiTietQuyTrinh && ketQua.trongLuong > 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">7</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        } else if (ketQua.chiTietQuyTrinh && ketQua.trongLuong <= 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        }
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t ph·∫ßn t√≠nh to√°n VIN-EXPRESS v√† VIN-HOATOC ƒë·ªÉ l∆∞u th√¥ng tin chi ti·∫øt:


C·∫≠p nh·∫≠t ph·∫ßn t√≠nh to√°n ƒë·ªÉ l∆∞u chi ti·∫øt quy tr√¨nh cho t·ª´ng d·ªãch v·ª•:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt (cho VIN-TRUCK v√† VIN-ECO)
        if (ketQua.chiTietQuyTrinh && ketQua.trongLuong > 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">7</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        } else if (ketQua.chiTietQuyTrinh && ketQua.trongLuong <= 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        }
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t c√°c d·ªãch v·ª• c√≤n l·∫°i:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const giaExpress = tinhGiaTheoBang(bangGiaVinExpress, kgInput, vung);
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false
        });
        
        // 4. VIN-HOATOC
        const giaHoaToc = tinhGiaTheoBang(bangGiaVinHoaToc, kgInput, vung);
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt (cho VIN-TRUCK v√† VIN-ECO)
        if (ketQua.chiTietQuyTrinh && ketQua.trongLuong > 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">7</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        } else if (ketQua.chiTietQuyTrinh && ketQua.trongLuong <= 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        }
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t VIN-EXPRESS v√† VIN-HOATOC:


C·∫≠p nh·∫≠t VIN-EXPRESS v√† VIN-HOATOC ƒë·ªÉ t√≠nh to√°n chi ti·∫øt:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt (cho VIN-TRUCK v√† VIN-ECO)
        if (ketQua.chiTietQuyTrinh && ketQua.trongLuong > 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">7</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        } else if (ketQua.chiTietQuyTrinh && ketQua.trongLuong <= 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        }
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

S·ª≠a l·ªói: `formatTien` ch∆∞a ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a. Di chuy·ªÉn h√†m `formatTien` l√™n tr∆∞·ªõc c√°c h√†m t√≠nh to√°n chi ti·∫øt:


Di chuy·ªÉn h√†m `formatTien` l√™n tr∆∞·ªõc c√°c h√†m t√≠nh to√°n chi ti·∫øt:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Format s·ªë ti·ªÅn
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt (cho VIN-TRUCK v√† VIN-ECO)
        if (ketQua.chiTietQuyTrinh && ketQua.trongLuong > 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">7</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        } else if (ketQua.chiTietQuyTrinh && ketQua.trongLuong <= 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        }
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

X√≥a h√†m `formatTien` ·ªü v·ªã tr√≠ c≈© v√† c·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã ƒë·ªÉ c√≥ th·ªÉ click v√†o t·ª´ng d·ªãch v·ª•:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // Hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n chi ti·∫øt (cho VIN-TRUCK v√† VIN-ECO)
        if (ketQua.chiTietQuyTrinh && ketQua.trongLuong > 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">7</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        } else if (ketQua.chiTietQuyTrinh && ketQua.trongLuong <= 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        }
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã: x√≥a ph·∫ßn quy tr√¨nh t·ª± ƒë·ªông v√† th√™m kh·∫£ nƒÉng click ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh:


X√≥a ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh t·ª± ƒë·ªông v√† th√™m h√†m helper ƒë·ªÉ render quy tr√¨nh khi click:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html ? `<div class="calculation-process-detail" style="display: none;">${html}</div>` : '';
        };
        
        // X√≥a ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh t·ª± ƒë·ªông (kh√¥ng hi·ªÉn th·ªã n·ªØa)
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">7</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">8</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        } else if (ketQua.chiTietQuyTrinh && ketQua.trongLuong <= 10) {
            const ct = ketQua.chiTietQuyTrinh;
            html += `
                <div class="calculation-process">
                    <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT</div>
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                </div>
            `;
        }
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

X√≥a ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh t·ª± ƒë·ªông c≈© v√† c·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã service card:


X√≥a ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh t·ª± ƒë·ªông c≈© v√† c·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã service card:


X√≥a ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh t·ª± ƒë·ªông c≈© v√† c·∫≠p nh·∫≠t service card:


```javascript
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
```

ƒêang ƒë·ªçc l·∫°i file ƒë·ªÉ xem c·∫•u tr√∫c hi·ªán t·∫°i:


X√≥a ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh t·ª± ƒë·ªông c≈©:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html ? `<div class="calculation-process-detail" style="display: none;">${html}</div>` : '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''}" style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        `}
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã service card ƒë·ªÉ th√™m quy tr√¨nh v√† kh·∫£ nƒÉng click:


T√¨m v√† c·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã service card:


C·∫≠p nh·∫≠t service card ƒë·ªÉ th√™m quy tr√¨nh v√† kh·∫£ nƒÉng click:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html ? `<div class="calculation-process-detail" style="display: none;">${html}</div>` : '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

S·ª≠a h√†m `renderQuyTrinhTinhToan` ƒë·ªÉ tr·∫£ v·ªÅ HTML ƒë√∫ng v√† th√™m event listener:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

Th√™m event listener ƒë·ªÉ toggle hi·ªÉn th·ªã quy tr√¨nh khi click:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg"
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg';
        } else if (wDu < 100) { // 40 < W_d∆∞ < 100 ‚Üí khung "Tr√™n 50 - 100 kg"
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg';
        } else if (wDu <= 290) { // 100 ‚â§ W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg"
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg"
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg"
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg"
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg"
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

Th√™m CSS cho ph·∫ßn toggle v√† animation:


Th√™m CSS cho ph·∫ßn toggle v√† animation:


```css
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap');

/* ========================
   VARIABLES & RESET
   ======================== */
:root {
    /* Colors - Light Theme (Default) */
    --primary: #1a73e8;
    --primary-dark: #1557b0;
    --secondary: #34a853;
    --danger: #ea4335;
    --warning: #fbbc04;
    --background: #f8f9fa;
    --surface: #ffffff;
    --surface-variant: #f1f3f4;
    --on-surface: #202124;
    --on-surface-variant: #5f6368;
    --border: #dadce0;
    --shadow-sm: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
    --shadow-md: 0 1px 3px 0 rgba(60,64,67,0.3), 0 4px 8px 3px rgba(60,64,67,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(60,64,67,0.3), 0 8px 12px 6px rgba(60,64,67,0.15);
    
    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-full: 9999px;
    
    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Typography */
    --font-family: 'Be Vietnam Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-size-base: 16px;
    --font-size-small: 14px;
    --font-size-large: 18px;
}

/* Dark Theme */
[data-theme="dark"] {
    --primary: #8ab4f8;
    --primary-dark: #669df6;
    --secondary: #34a853;
    --danger: #f28b82;
    --warning: #fdd663;
    --background: #121212;
    --surface: #1e1e1e;
    --surface-variant: #2d2d2d;
    --on-surface: #e8eaed;
    --on-surface-variant: #9aa0a6;
    --border: #3c4043;
    --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
    --shadow-md: 0 1px 3px 0 rgba(0,0,0,0.3), 0 4px 8px 3px rgba(0,0,0,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(0,0,0,0.3), 0 8px 12px 6px rgba(0,0,0,0.15);
}

/* Size Variants */
[data-size="tiny"] {
    --font-size-base: 12px;
    --font-size-small: 10px;
    --font-size-large: 14px;
    --font-size-nav: 11px;
    --spacing-xs: 2px;
    --spacing-sm: 4px;
    --spacing-md: 8px;
    --spacing-lg: 12px;
    --spacing-xl: 16px;
}

[data-size="small"] {
    --font-size-base: 14px;
    --font-size-small: 12px;
    --font-size-large: 16px;
    --font-size-nav: 13px;
    --spacing-xs: 3px;
    --spacing-sm: 6px;
    --spacing-md: 12px;
    --spacing-lg: 18px;
    --spacing-xl: 24px;
}

[data-size="large"] {
    --font-size-base: 18px;
    --font-size-small: 16px;
    --font-size-large: 20px;
    --font-size-nav: 17px;
    --spacing-xs: 5px;
    --spacing-sm: 10px;
    --spacing-md: 20px;
    --spacing-lg: 28px;
    --spacing-xl: 36px;
}

/* Add default nav font size and tab-specific fonts */
:root {
    --font-size-nav: 15px;
    --font-size-tabs: 16px;
    --font-size-tab-title: 18px;
    --font-size-tab-content: 14px;
    --font-size-tab-small: 13px;
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    color: var(--on-surface);
    background: var(--background);
    transition: all var(--transition-base);
}

body {
    font-family: var(--font-family);
    background: var(--background);
    color: var(--on-surface);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
}

/* Tab-specific font sizes */
#cbm-calculator,
#history {
    font-size: var(--font-size-tabs);
}

/* Tab font sizes for different sizes */
html[data-tab-size="tiny"] {
    --font-size-tabs: 12px !important;
    --font-size-tab-title: 13px !important;
    --font-size-tab-content: 11px !important;
    --font-size-tab-small: 10px !important;
}

html[data-tab-size="small"] {
    --font-size-tabs: 14px !important;
    --font-size-tab-title: 15px !important;
    --font-size-tab-content: 13px !important;
    --font-size-tab-small: 11px !important;
}

html[data-tab-size="medium"] {
    --font-size-tabs: 16px !important;
    --font-size-tab-title: 18px !important;
    --font-size-tab-content: 14px !important;
    --font-size-tab-small: 13px !important;
}

html[data-tab-size="large"] {
    --font-size-tabs: 18px !important;
    --font-size-tab-title: 20px !important;
    --font-size-tab-content: 16px !important;
    --font-size-tab-small: 15px !important;
}

/* ========================
   APP LAYOUT - MOBILE FIRST
   ======================== */
#app {
    display: flex;
    flex-direction: column;
    height: 100vh;
    height: 100dvh;
    width: 100%;
}

/* Header - Hidden on mobile, shown on desktop */
.app-header {
    display: none;
}

/* Sidebar - Hidden on mobile, shown on desktop */
.sidebar-nav {
    display: none;
}

/* Main Content - Full height on mobile */
.main-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: var(--spacing-md);
    padding-top: var(--spacing-md); /* Hamburger is transparent, no space needed */
    scroll-behavior: smooth;
}

/* Hamburger Menu - Mobile only */
.hamburger-menu {
    position: fixed;
    top: 8px;
    left: 8px;
    width: 28px;
    height: 28px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    border: none;
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 3px;
    padding: 0;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
}

/* TƒÉng v√πng click cho hamburger */
.hamburger-menu::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
}

.hamburger-menu:hover {
    background: rgba(0, 0, 0, 0.4);
}

.hamburger-menu span {
    width: 16px;
    height: 2px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 1px;
    transition: all var(--transition-fast);
    box-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.hamburger-menu:active span {
    background: rgba(255, 255, 255, 1);
    transform: scaleX(1.1);
}

.hamburger-menu.hidden {
    opacity: 0;
    pointer-events: none;
}

/* Slide Menu - Mobile only */
.slide-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    height: 100vh;
    background: var(--surface);
    box-shadow: var(--shadow-lg);
    transform: translateX(-100%);
    transition: transform var(--transition-slow);
    z-index: 1100;
    display: flex;
    flex-direction: column;
}

.slide-menu.open {
    transform: translateX(0);
}

.slide-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border);
    background: var(--surface);
    color: var(--on-surface);
}

.menu-title {
    font-size: 20px;
    font-weight: 700;
}

.close-menu {
    width: 36px;
    height: 36px;
    border: 1px solid var(--border);
    background: var(--surface-variant);
    color: var(--on-surface);
    font-size: 28px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.close-menu:active {
    background: rgba(255,255,255,0.3);
}

.slide-menu-nav {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-md);
    gap: var(--spacing-xs);
}

.slide-menu-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: transparent;
    border: none;
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-nav);
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: left;
}

.slide-menu-item .menu-icon {
    font-size: 24px;
}

.slide-menu-item:active {
    transform: scale(0.98);
}

.slide-menu-item.active {
    background: #e8f0fe;
    color: var(--primary);
    font-weight: 600;
}

.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--transition-base);
    z-index: 1050;
}

.menu-overlay.visible {
    opacity: 1;
    pointer-events: all;
}

/* Theme Toggle Button - Medium Size & Adaptive */
.theme-toggle {
    position: fixed;
    top: 8px;
    right: 8px;
    width: 32px;
    height: 32px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.theme-toggle:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
    background: var(--primary);
    border-color: var(--primary);
}

.theme-toggle:active {
    transform: scale(0.95);
}

.theme-icon {
    position: absolute;
    font-size: 14px;
    transition: all var(--transition-base);
    filter: brightness(1);
}

.sun-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: #f59e0b;
}

.moon-icon {
    opacity: 0;
    transform: rotate(-180deg) scale(0.5);
    color: #6366f1;
}

[data-theme="dark"] .sun-icon {
    opacity: 0;
    transform: rotate(180deg) scale(0.5);
}

[data-theme="dark"] .moon-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
}

/* Adaptive colors based on theme */
[data-theme="light"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

[data-theme="dark"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

/* Bottom Navigation - REMOVED (using hamburger menu instead) */
.bottom-nav {
    display: none;
}

/* ========================
   TAB CONTENT
   ======================== */
.tab-content {
    display: none;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    animation: fadeIn var(--transition-base);
}

.tab-content.active {
    display: flex;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================
   INPUT STYLES
   ======================== */
input[type="number"],
input[type="text"] {
    width: 100%;
    padding: 14px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-base);
    font-weight: 500;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-appearance: none;
    appearance: none;
}

/* Input fields in CBM Calculator and History tabs */
#cbm-calculator input[type="number"],
#cbm-calculator input[type="text"],
#history input[type="text"] {
    font-size: var(--font-size-tabs);
}

input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

input::placeholder {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Remove number spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
}

input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
}

/* ========================
   BUTTON STYLES
   ======================== */
button {
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    font-weight: 600;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-tap-highlight-color: transparent;
}

button:active {
    transform: scale(0.97);
}

/* ========================
   CBM CALCULATOR TAB
   ======================== */
#cbm-calculator {
    justify-content: space-between;
}

#cbm-main-content {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.group-item {
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    animation: slideUp var(--transition-base);
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.group-item p {
    margin: 0 0 8px 0;
    line-height: 1.6;
    font-size: var(--font-size-tab-content, 14px);
}

.group-item .value {
    color: var(--primary);
    font-weight: 600;
}

.group-title {
    font-weight: 700;
    color: var(--on-surface);
    font-size: var(--font-size-tabs, 16px);
    margin-bottom: 12px !important;
}

.group-item.current-input {
    border-left-color: var(--primary);
    background: #e8f0fe;
    color: var(--on-surface);
}

[data-theme="dark"] .group-item.current-input {
    background: var(--surface-variant);
    color: var(--on-surface);
}

.group-item hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: var(--spacing-md) 0;
}

.empty-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: var(--font-size-tab-content, 14px);
}

/* CBM Controls */
#cbm-controls {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    flex-shrink: 0;
}

#cbm-actions {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: var(--spacing-sm);
}

#cbm-actions button {
    padding: 12px;
    font-size: var(--font-size-tab-content, 14px);
    color: white;
    box-shadow: var(--shadow-sm);
}

#btn-back1,
#btn-back2 {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
}

#btn-reset {
    background: linear-gradient(135deg, var(--danger), #c5221f);
}

#cbm-actions button:hover {
    box-shadow: var(--shadow-md);
    filter: brightness(1.05);
}

/* ========================
   HISTORY TAB
   ======================== */
.history-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

/* Search Bar */
.search-bar {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

.search-bar input {
    flex: 1;
    min-width: 0;
}

.search-bar button {
    background: var(--primary);
    color: white;
    padding: 0 20px;
    font-size: var(--font-size-tab-content, 14px);
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

/* History List */
#history-list {
    background: var(--surface);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.history-header {
    font-size: var(--font-size-tab-title, 18px);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.history-stats {
    font-size: var(--font-size-tab-small, 13px);
    color: var(--on-surface-variant);
    font-weight: 500;
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    background: #e8f0fe;
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
}

.history-item {
    padding: var(--spacing-md);
    margin: var(--spacing-sm) 0;
    word-wrap: break-word;
    line-height: 1.7;
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    font-size: var(--font-size-tab-content, 14px);
    color: var(--on-surface);
    animation: slideUp var(--transition-base);
    box-shadow: var(--shadow-sm);
}

/* Pagination */
.pagination-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-shrink: 0;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
}

.pagination-controls button {
    background: var(--primary);
    color: white;
    padding: 10px 20px;
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    min-width: 90px;
    box-shadow: var(--shadow-sm);
}

.pagination-controls button:disabled {
    background: var(--border);
    color: var(--on-surface-variant);
    cursor: not-allowed;
    opacity: 0.5;
}

#page-info {
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    color: var(--on-surface);
    white-space: nowrap;
}

/* History Controls */
.history-controls {
    display: flex;
    flex-shrink: 0;
}

#clear-history-button {
    background: var(--danger);
    color: white;
    width: 100%;
    font-size: var(--font-size-tabs, 15px);
    padding: 14px 0;
    font-weight: 600;
    box-shadow: var(--shadow-md);
}

/* ========================
   PROVINCE CHECKER TAB
   ======================== */
.province-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

.province-input-section {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

#province-input {
    flex: 1;
    min-width: 0;
}

#btn-clear-province {
    background: var(--danger);
    color: white;
    padding: 0 20px;
    font-size: 14px;
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

.province-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    flex: 1;
    overflow-y: auto;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.province-header {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
    text-align: center;
}

.province-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: 14px;
    line-height: 1.6;
}

.province-item {
    padding: var(--spacing-md);
    margin: var(--spacing-xs) 0;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--border);
    font-size: 14px;
    line-height: 1.6;
    animation: slideUp var(--transition-base);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.province-item .time {
    color: var(--on-surface-variant);
    font-size: 12px;
    font-weight: 500;
}

.province-item .name {
    font-weight: 600;
    color: var(--on-surface);
}

.province-item .arrow {
    color: var(--on-surface-variant);
}

.province-item .result {
    font-weight: 700;
    font-size: 16px;
}

.province-item.hang-bay {
    border-left-color: var(--danger);
}

.province-item.hang-bay .result {
    color: var(--danger);
}

.province-item.hang-bo {
    border-left-color: var(--secondary);
}

.province-item.hang-bo .result {
    color: var(--secondary);
}

/* ========================
   SCROLLBAR
   ======================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--on-surface-variant);
}

/* ========================
   DESKTOP STYLES (‚â•768px)
   ======================== */
@media (min-width: 768px) {
    /* Show desktop elements */
    .app-header {
        display: block;
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: white;
        padding: var(--spacing-lg) var(--spacing-xl);
        box-shadow: var(--shadow-md);
        z-index: 10;
    }
    
    .header-content {
        max-width: 1400px;
        margin: 0 auto;
    }
    
    .app-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: var(--spacing-xs);
    }
    
    .app-subtitle {
        font-size: 14px;
        opacity: 0.9;
        font-weight: 500;
    }
    
    .sidebar-nav {
        display: flex;
        flex-direction: column;
        position: fixed;
        left: 0;
        top: 0;
        width: 260px;
        height: 100vh;
        background: var(--surface);
        border-right: 1px solid var(--border);
        padding: var(--spacing-lg);
        gap: var(--spacing-sm);
        box-shadow: var(--shadow-sm);
        z-index: 50;
    }
    
    .nav-brand {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        border-bottom: 2px solid var(--border);
    }
    
    .brand-icon {
        font-size: 32px;
    }
    
    .brand-text {
        font-size: 20px;
        font-weight: 700;
        color: var(--on-surface);
    }
    
    .nav-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        background: transparent;
        color: var(--on-surface-variant);
        text-align: left;
        border-radius: var(--radius-md);
        transition: all var(--transition-fast);
        font-size: var(--font-size-nav);
    }
    
    .nav-icon {
        font-size: 24px;
    }
    
    .nav-text {
        font-weight: 500;
    }
    
    .nav-item:hover {
        background: var(--surface-variant);
    }
    
    .nav-item.active {
        background: #e8f0fe;
        color: var(--primary);
        font-weight: 600;
    }
    
    /* Hide bottom nav on desktop */
    .bottom-nav {
        display: none;
    }
    
    /* Hide hamburger menu on desktop */
    .hamburger-menu,
    .slide-menu,
    .menu-overlay {
        display: none;
    }
    
    /* Adjust main content for desktop */
    #app {
        display: grid;
        grid-template-columns: 260px 1fr;
        grid-template-rows: auto 1fr;
    }
    
    .app-header {
        grid-column: 2 / 3;
        grid-row: 1 / 2;
    }
    
    .sidebar-nav {
        grid-column: 1 / 2;
        grid-row: 1 / 3;
        position: static;
        height: auto;
    }
    
    .main-content {
        grid-column: 2 / 3;
        grid-row: 2 / 3;
        padding: var(--spacing-xl);
        padding-bottom: var(--spacing-xl);
        max-width: 1400px;
        margin: 0 auto;
        width: 100%;
    }
    
    /* Desktop specific adjustments */
    .search-bar {
        flex-direction: row;
    }
    
    .pagination-controls {
        justify-content: center;
        gap: var(--spacing-lg);
    }
    
    .pagination-controls button {
        min-width: 120px;
        padding: 12px 24px;
        font-size: var(--font-size-tabs, 15px);
    }
    
    #page-info {
        font-size: var(--font-size-tabs, 15px);
        min-width: 120px;
        text-align: center;
    }
}

/* Large Desktop (‚â•1200px) */
@media (min-width: 1200px) {
    .sidebar-nav {
        width: 280px;
    }
    
    #app {
        grid-template-columns: 280px 1fr;
    }
    
    .main-content {
        padding: var(--spacing-xl) 48px;
    }
}

/* ========================
   SHIPPING CALCULATOR STYLES
   ======================== */

.shipping-calculator-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    max-width: 100%;
    padding: 0;
    height: 100%;
}

/* Form nh·∫≠p li·ªáu */
.shipping-form {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
}

.form-header {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-md);
    text-align: center;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.form-group {
    margin-bottom: var(--spacing-sm);
}

.form-group label {
    display: block;
    font-weight: 600;
    color: var(--on-surface);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-small);
}

.form-group select,
.form-group input[type="number"] {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-base);
    font-family: var(--font-family);
    background: var(--surface);
    color: var(--on-surface);
    transition: all var(--transition-fast);
}

.form-group select:focus,
.form-group input[type="number"]:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

.form-group select:disabled {
    background: var(--surface-variant);
    cursor: not-allowed;
    opacity: 0.6;
}

.form-actions {
    display: flex;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-lg);
}

.form-actions button {
    flex: 1;
    padding: 14px 24px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: var(--font-size-base);
    font-weight: 600;
    font-family: var(--font-family);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    background: var(--surface-variant);
    color: var(--on-surface-variant);
}

.btn-secondary:hover {
    background: var(--border);
}

/* K·∫øt qu·∫£ */
.shipping-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    min-height: 150px;
    flex: 1;
    overflow-y: auto;
}

.result-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-lg);
    font-size: var(--font-size-base);
}

.result-header {
    margin-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--border);
    padding-bottom: var(--spacing-sm);
}

.result-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.result-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-sm);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.info-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.info-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
}

/* Quy tr√¨nh t√≠nh to√°n chi ti·∫øt */
.calculation-process {
    background: linear-gradient(135deg, var(--surface-variant) 0%, var(--surface) 100%);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border: 2px solid var(--primary);
    box-shadow: var(--shadow-md);
}

.process-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-md);
    text-align: center;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.process-steps {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.process-step {
    display: flex;
    gap: var(--spacing-sm);
    align-items: flex-start;
    background: var(--surface);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
    transition: all var(--transition-base);
}

.process-step:hover {
    background: var(--surface-variant);
    transform: translateX(4px);
}

.step-number {
    min-width: 32px;
    height: 32px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-base);
    flex-shrink: 0;
}

.step-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.step-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.step-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
    line-height: 1.5;
}

.step-value strong {
    color: var(--primary);
    font-weight: 700;
}

/* Cards d·ªãch v·ª• */
.services-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.service-card {
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    border: 2px solid var(--border);
    transition: all var(--transition-base);
    animation: fadeInUp 0.4s ease-out both;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.service-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary);
}

.service-card.service-disabled {
    opacity: 0.6;
    background: var(--surface);
    border-color: var(--border);
    cursor: not-allowed;
}

.service-card.service-disabled:hover {
    transform: none;
    box-shadow: none;
    border-color: var(--border);
}

.service-card.service-clickable {
    cursor: pointer;
    position: relative;
}

.service-card.service-clickable:hover {
    border-color: var(--primary);
}

.service-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-sm);
}

.toggle-icon {
    font-size: var(--font-size-small);
    color: var(--primary);
    transition: transform var(--transition-base);
    user-select: none;
}

.service-card.process-expanded .toggle-icon {
    transform: rotate(180deg);
}

.process-toggle-hint {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    text-align: center;
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    border: 1px dashed var(--border);
}

.hint-icon {
    font-size: var(--font-size-base);
}

.hint-text {
    font-weight: 500;
}

.calculation-process-detail {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        max-height: 2000px;
        transform: translateY(0);
    }
}

.service-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.service-icon {
    font-size: 24px;
}

.service-name {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--on-surface);
}

.service-body {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Ph√¢n t√≠ch gi√° */
.price-breakdown {
    background: var(--surface);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
}

.breakdown-title {
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-small);
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    font-size: var(--font-size-small);
}

.breakdown-label {
    color: var(--on-surface-variant);
}

.breakdown-value {
    font-weight: 600;
    color: var(--on-surface);
}

.breakdown-item.surcharge .breakdown-value {
    color: var(--warning);
}

.breakdown-item.total {
    margin-top: var(--spacing-xs);
    padding-top: var(--spacing-sm);
    font-size: var(--font-size-base);
    font-weight: 700;
}

.breakdown-item.total .breakdown-label {
    color: var(--on-surface);
}

.breakdown-item.total .breakdown-value {
    color: var(--primary);
    font-size: 18px;
}

.breakdown-separator {
    height: 1px;
    background: var(--border);
    margin: var(--spacing-xs) 0;
}

/* Disabled notice */
.service-disabled-notice {
    text-align: center;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border: 2px dashed var(--border);
}

.disabled-icon {
    font-size: 36px;
    margin-bottom: var(--spacing-xs);
}

.disabled-text {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--on-surface-variant);
    margin-bottom: var(--spacing-xs);
}

.disabled-reason {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-style: italic;
}

/* Th·ªùi gian giao h√†ng */
.service-time {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--secondary);
}

.time-icon {
    font-size: 18px;
}

.time-text {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 600;
}

/* B·∫£ng so s√°nh */
.comparison-section {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
}

.comparison-title {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.comparison-table {
    overflow-x: auto;
}

.comparison-table table {
    width: 100%;
    border-collapse: collapse;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.comparison-table thead {
    background: var(--primary);
    color: white;
}

.comparison-table th,
.comparison-table td {
    padding: 8px 12px;
    text-align: left;
    font-size: var(--font-size-small);
}

.comparison-table th {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.comparison-table tbody tr {
    border-bottom: 1px solid var(--border);
    transition: background var(--transition-fast);
}

.comparison-table tbody tr:last-child {
    border-bottom: none;
}

.comparison-table tbody tr:hover {
    background: var(--surface);
}

.comparison-table .table-icon {
    margin-right: 8px;
}

.comparison-table .price-cell {
    font-weight: 700;
    color: var(--primary);
    font-size: var(--font-size-base);
}

.comparison-table .row-disabled {
    opacity: 0.5;
    font-style: italic;
}

.comparison-table .row-disabled .price-cell {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Responsive cho mobile */
@media (max-width: 768px) {
    .shipping-calculator-container {
        gap: var(--spacing-sm);
        padding: 0;
    }
    
    .shipping-form,
    .shipping-result {
        padding: var(--spacing-sm);
        border-radius: var(--radius-sm);
    }
    
    .form-header,
    .result-title,
    .comparison-title {
        font-size: var(--font-size-base);
    }
    
    .form-actions {
        flex-direction: column;
        gap: var(--spacing-xs);
    }
    
    .form-actions button {
        width: 100%;
        padding: 12px 20px;
    }
    
    .services-container {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .service-card {
        padding: var(--spacing-xs);
    }
    
    .result-info {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .comparison-table table {
        font-size: 11px;
    }
    
    .comparison-table th,
    .comparison-table td {
        padding: 6px 8px;
    }
}

```

ƒêang ki·ªÉm tra l·ªói v√† x√°c nh·∫≠n logic:


S·ª≠a l·∫°i ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh trong service card:


ƒê√£ ho√†n t·∫•t. T√≥m t·∫Øt thay ƒë·ªïi:

## T√≥m t·∫Øt thay ƒë·ªïi

### 1. T√≠nh to√°n chi ti·∫øt cho c·∫£ 4 d·ªãch v·ª•
- VIN-TRUCK (ƒê∆∞·ªùng B·ªô): Quy ƒë·ªãnh m·ªõi 2025
- VIN-ECO (Ti·∫øt Ki·ªám): Quy ƒë·ªãnh m·ªõi 2025
- VIN-EXPRESS (CPN): Logic c≈© v·ªõi chi ti·∫øt
- VIN-HOATOC (H·ªèa T·ªëc): Logic c≈© v·ªõi chi ti·∫øt

### 2. Hi·ªÉn th·ªã quy tr√¨nh khi click
- M·ªói d·ªãch v·ª• c√≥ quy tr√¨nh t√≠nh to√°n ri√™ng
- Kh√¥ng t·ª± hi·ªÉn th·ªã, ch·ªâ hi·ªán khi click v√†o service card
- C√≥ icon ‚ñº/‚ñ≤ ƒë·ªÉ b√°o tr·∫°ng th√°i m·ªü/ƒë√≥ng
- C√≥ hint text "Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt"

### 3. Quy tr√¨nh t√≠nh to√°n chi ti·∫øt

#### VIN-TRUCK & VIN-ECO:
1. X√°c ƒë·ªãnh v√πng v√† tuy·∫øn
2. Tr·ª´ 10kg ƒë·∫ßu ti√™n (n·∫øu > 10kg)
3. Gi√° 10kg ƒë·∫ßu ti√™n
4. X√°c ƒë·ªãnh khung gi√° cho s·ªë kg c√≤n l·∫°i
5. T√≠nh ti·ªÅn ph·∫ßn d∆∞
6. T√≠nh gi√° g·ªëc
7. Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT)
8. Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn, n·∫øu c√≥)

#### VIN-EXPRESS & VIN-HOATOC:
1. X√°c ƒë·ªãnh v√πng v√† tuy·∫øn
2. T√≠nh gi√° c∆° s·ªü (theo b·∫£ng gi√°)
3. T√≠nh ph·∫ßn v∆∞·ª£t (n·∫øu c√≥)
4. Ph·ª• ph√≠ ngo·∫°i tuy·∫øn (n·∫øu c√≥)
5. Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%)
6. T·ªïng c∆∞·ªõc

### 4. CSS & Animation
- Service card c√≥ th·ªÉ click (cursor pointer)
- Animation slideDown khi m·ªü quy tr√¨nh
- Icon toggle xoay khi expand/collapse
- Hint text v·ªõi icon

### 5. C√°ch s·ª≠ d·ª•ng
1. T√≠nh c∆∞·ªõc ph√≠ nh∆∞ b√¨nh th∆∞·ªùng
2. Click v√†o service card (VIN-TRUCK, VIN-ECO, VIN-EXPRESS, VIN-HOATOC)
3. Quy tr√¨nh t√≠nh to√°n chi ti·∫øt s·∫Ω hi·ªÉn th·ªã/·∫©n
4. Click l·∫°i ƒë·ªÉ ƒë√≥ng

T·∫•t c·∫£ 4 d·ªãch v·ª• ƒë√£ c√≥ quy tr√¨nh t√≠nh to√°n chi ti·∫øt v√† ch·ªâ hi·ªÉn th·ªã khi ng∆∞·ªùi d√πng click v√†o t·ª´ng d·ªãch v·ª•.

---

**User**

t·∫°i sao khi di chuy·ªÉn giao di·ªán xu·ªëng c√°i ph·∫ßn ch·ªçn t·ªânh huy·ªán nh·∫≠p s·ªë kg ko di chuy·ªÉn theo l√™n tr√™n , ƒëi·ªÅu n√†y khi·∫øn cho vi·ªác nh√¨n b·∫£ng gi√° kh√≥ khƒÉn h∆°n , h√£y ch·ªânh l·∫°i , nhu trkng anh ban thay phan cho tinh huyenn cho mat mot nua giao dien

---

**Cursor**

ƒêang ki·ªÉm tra CSS c·ªßa form ƒë·ªÉ th√™m `position: sticky` cho ph·∫ßn ch·ªçn t·ªânh/huy·ªán/nh·∫≠p s·ªë kg, gi√∫p form lu√¥n hi·ªÉn th·ªã ·ªü tr√™n khi cu·ªôn.


Th√™m `position: sticky` cho form ƒë·ªÉ n√≥ lu√¥n hi·ªÉn th·ªã ·ªü tr√™n khi cu·ªôn:


Th√™m `position: sticky` cho form ƒë·ªÉ n√≥ lu√¥n hi·ªÉn th·ªã ·ªü tr√™n khi cu·ªôn:


---

**User**

y toi la muon no phai cuon theo giao dien

---

**Cursor**

Th√™m `position: sticky` cho form ƒë·ªÉ n√≥ lu√¥n hi·ªÉn th·ªã ·ªü tr√™n khi cu·ªôn:


```css
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap');

/* ========================
   VARIABLES & RESET
   ======================== */
:root {
    /* Colors - Light Theme (Default) */
    --primary: #1a73e8;
    --primary-dark: #1557b0;
    --secondary: #34a853;
    --danger: #ea4335;
    --warning: #fbbc04;
    --background: #f8f9fa;
    --surface: #ffffff;
    --surface-variant: #f1f3f4;
    --on-surface: #202124;
    --on-surface-variant: #5f6368;
    --border: #dadce0;
    --shadow-sm: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
    --shadow-md: 0 1px 3px 0 rgba(60,64,67,0.3), 0 4px 8px 3px rgba(60,64,67,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(60,64,67,0.3), 0 8px 12px 6px rgba(60,64,67,0.15);
    
    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-full: 9999px;
    
    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Typography */
    --font-family: 'Be Vietnam Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-size-base: 16px;
    --font-size-small: 14px;
    --font-size-large: 18px;
}

/* Dark Theme */
[data-theme="dark"] {
    --primary: #8ab4f8;
    --primary-dark: #669df6;
    --secondary: #34a853;
    --danger: #f28b82;
    --warning: #fdd663;
    --background: #121212;
    --surface: #1e1e1e;
    --surface-variant: #2d2d2d;
    --on-surface: #e8eaed;
    --on-surface-variant: #9aa0a6;
    --border: #3c4043;
    --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
    --shadow-md: 0 1px 3px 0 rgba(0,0,0,0.3), 0 4px 8px 3px rgba(0,0,0,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(0,0,0,0.3), 0 8px 12px 6px rgba(0,0,0,0.15);
}

/* Size Variants */
[data-size="tiny"] {
    --font-size-base: 12px;
    --font-size-small: 10px;
    --font-size-large: 14px;
    --font-size-nav: 11px;
    --spacing-xs: 2px;
    --spacing-sm: 4px;
    --spacing-md: 8px;
    --spacing-lg: 12px;
    --spacing-xl: 16px;
}

[data-size="small"] {
    --font-size-base: 14px;
    --font-size-small: 12px;
    --font-size-large: 16px;
    --font-size-nav: 13px;
    --spacing-xs: 3px;
    --spacing-sm: 6px;
    --spacing-md: 12px;
    --spacing-lg: 18px;
    --spacing-xl: 24px;
}

[data-size="large"] {
    --font-size-base: 18px;
    --font-size-small: 16px;
    --font-size-large: 20px;
    --font-size-nav: 17px;
    --spacing-xs: 5px;
    --spacing-sm: 10px;
    --spacing-md: 20px;
    --spacing-lg: 28px;
    --spacing-xl: 36px;
}

/* Add default nav font size and tab-specific fonts */
:root {
    --font-size-nav: 15px;
    --font-size-tabs: 16px;
    --font-size-tab-title: 18px;
    --font-size-tab-content: 14px;
    --font-size-tab-small: 13px;
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    color: var(--on-surface);
    background: var(--background);
    transition: all var(--transition-base);
}

body {
    font-family: var(--font-family);
    background: var(--background);
    color: var(--on-surface);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
}

/* Tab-specific font sizes */
#cbm-calculator,
#history {
    font-size: var(--font-size-tabs);
}

/* Tab font sizes for different sizes */
html[data-tab-size="tiny"] {
    --font-size-tabs: 12px !important;
    --font-size-tab-title: 13px !important;
    --font-size-tab-content: 11px !important;
    --font-size-tab-small: 10px !important;
}

html[data-tab-size="small"] {
    --font-size-tabs: 14px !important;
    --font-size-tab-title: 15px !important;
    --font-size-tab-content: 13px !important;
    --font-size-tab-small: 11px !important;
}

html[data-tab-size="medium"] {
    --font-size-tabs: 16px !important;
    --font-size-tab-title: 18px !important;
    --font-size-tab-content: 14px !important;
    --font-size-tab-small: 13px !important;
}

html[data-tab-size="large"] {
    --font-size-tabs: 18px !important;
    --font-size-tab-title: 20px !important;
    --font-size-tab-content: 16px !important;
    --font-size-tab-small: 15px !important;
}

/* ========================
   APP LAYOUT - MOBILE FIRST
   ======================== */
#app {
    display: flex;
    flex-direction: column;
    height: 100vh;
    height: 100dvh;
    width: 100%;
}

/* Header - Hidden on mobile, shown on desktop */
.app-header {
    display: none;
}

/* Sidebar - Hidden on mobile, shown on desktop */
.sidebar-nav {
    display: none;
}

/* Main Content - Full height on mobile */
.main-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: var(--spacing-md);
    padding-top: var(--spacing-md); /* Hamburger is transparent, no space needed */
    scroll-behavior: smooth;
}

/* Hamburger Menu - Mobile only */
.hamburger-menu {
    position: fixed;
    top: 8px;
    left: 8px;
    width: 28px;
    height: 28px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    border: none;
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 3px;
    padding: 0;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
}

/* TƒÉng v√πng click cho hamburger */
.hamburger-menu::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
}

.hamburger-menu:hover {
    background: rgba(0, 0, 0, 0.4);
}

.hamburger-menu span {
    width: 16px;
    height: 2px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 1px;
    transition: all var(--transition-fast);
    box-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.hamburger-menu:active span {
    background: rgba(255, 255, 255, 1);
    transform: scaleX(1.1);
}

.hamburger-menu.hidden {
    opacity: 0;
    pointer-events: none;
}

/* Slide Menu - Mobile only */
.slide-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    height: 100vh;
    background: var(--surface);
    box-shadow: var(--shadow-lg);
    transform: translateX(-100%);
    transition: transform var(--transition-slow);
    z-index: 1100;
    display: flex;
    flex-direction: column;
}

.slide-menu.open {
    transform: translateX(0);
}

.slide-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border);
    background: var(--surface);
    color: var(--on-surface);
}

.menu-title {
    font-size: 20px;
    font-weight: 700;
}

.close-menu {
    width: 36px;
    height: 36px;
    border: 1px solid var(--border);
    background: var(--surface-variant);
    color: var(--on-surface);
    font-size: 28px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.close-menu:active {
    background: rgba(255,255,255,0.3);
}

.slide-menu-nav {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-md);
    gap: var(--spacing-xs);
}

.slide-menu-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: transparent;
    border: none;
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-nav);
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: left;
}

.slide-menu-item .menu-icon {
    font-size: 24px;
}

.slide-menu-item:active {
    transform: scale(0.98);
}

.slide-menu-item.active {
    background: #e8f0fe;
    color: var(--primary);
    font-weight: 600;
}

.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--transition-base);
    z-index: 1050;
}

.menu-overlay.visible {
    opacity: 1;
    pointer-events: all;
}

/* Theme Toggle Button - Medium Size & Adaptive */
.theme-toggle {
    position: fixed;
    top: 8px;
    right: 8px;
    width: 32px;
    height: 32px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.theme-toggle:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
    background: var(--primary);
    border-color: var(--primary);
}

.theme-toggle:active {
    transform: scale(0.95);
}

.theme-icon {
    position: absolute;
    font-size: 14px;
    transition: all var(--transition-base);
    filter: brightness(1);
}

.sun-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: #f59e0b;
}

.moon-icon {
    opacity: 0;
    transform: rotate(-180deg) scale(0.5);
    color: #6366f1;
}

[data-theme="dark"] .sun-icon {
    opacity: 0;
    transform: rotate(180deg) scale(0.5);
}

[data-theme="dark"] .moon-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
}

/* Adaptive colors based on theme */
[data-theme="light"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

[data-theme="dark"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

/* Bottom Navigation - REMOVED (using hamburger menu instead) */
.bottom-nav {
    display: none;
}

/* ========================
   TAB CONTENT
   ======================== */
.tab-content {
    display: none;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    animation: fadeIn var(--transition-base);
}

.tab-content.active {
    display: flex;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================
   INPUT STYLES
   ======================== */
input[type="number"],
input[type="text"] {
    width: 100%;
    padding: 14px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-base);
    font-weight: 500;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-appearance: none;
    appearance: none;
}

/* Input fields in CBM Calculator and History tabs */
#cbm-calculator input[type="number"],
#cbm-calculator input[type="text"],
#history input[type="text"] {
    font-size: var(--font-size-tabs);
}

input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

input::placeholder {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Remove number spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
}

input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
}

/* ========================
   BUTTON STYLES
   ======================== */
button {
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    font-weight: 600;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-tap-highlight-color: transparent;
}

button:active {
    transform: scale(0.97);
}

/* ========================
   CBM CALCULATOR TAB
   ======================== */
#cbm-calculator {
    justify-content: space-between;
}

#cbm-main-content {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.group-item {
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    animation: slideUp var(--transition-base);
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.group-item p {
    margin: 0 0 8px 0;
    line-height: 1.6;
    font-size: var(--font-size-tab-content, 14px);
}

.group-item .value {
    color: var(--primary);
    font-weight: 600;
}

.group-title {
    font-weight: 700;
    color: var(--on-surface);
    font-size: var(--font-size-tabs, 16px);
    margin-bottom: 12px !important;
}

.group-item.current-input {
    border-left-color: var(--primary);
    background: #e8f0fe;
    color: var(--on-surface);
}

[data-theme="dark"] .group-item.current-input {
    background: var(--surface-variant);
    color: var(--on-surface);
}

.group-item hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: var(--spacing-md) 0;
}

.empty-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: var(--font-size-tab-content, 14px);
}

/* CBM Controls */
#cbm-controls {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    flex-shrink: 0;
}

#cbm-actions {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: var(--spacing-sm);
}

#cbm-actions button {
    padding: 12px;
    font-size: var(--font-size-tab-content, 14px);
    color: white;
    box-shadow: var(--shadow-sm);
}

#btn-back1,
#btn-back2 {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
}

#btn-reset {
    background: linear-gradient(135deg, var(--danger), #c5221f);
}

#cbm-actions button:hover {
    box-shadow: var(--shadow-md);
    filter: brightness(1.05);
}

/* ========================
   HISTORY TAB
   ======================== */
.history-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

/* Search Bar */
.search-bar {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

.search-bar input {
    flex: 1;
    min-width: 0;
}

.search-bar button {
    background: var(--primary);
    color: white;
    padding: 0 20px;
    font-size: var(--font-size-tab-content, 14px);
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

/* History List */
#history-list {
    background: var(--surface);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.history-header {
    font-size: var(--font-size-tab-title, 18px);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.history-stats {
    font-size: var(--font-size-tab-small, 13px);
    color: var(--on-surface-variant);
    font-weight: 500;
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    background: #e8f0fe;
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
}

.history-item {
    padding: var(--spacing-md);
    margin: var(--spacing-sm) 0;
    word-wrap: break-word;
    line-height: 1.7;
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    font-size: var(--font-size-tab-content, 14px);
    color: var(--on-surface);
    animation: slideUp var(--transition-base);
    box-shadow: var(--shadow-sm);
}

/* Pagination */
.pagination-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-shrink: 0;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
}

.pagination-controls button {
    background: var(--primary);
    color: white;
    padding: 10px 20px;
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    min-width: 90px;
    box-shadow: var(--shadow-sm);
}

.pagination-controls button:disabled {
    background: var(--border);
    color: var(--on-surface-variant);
    cursor: not-allowed;
    opacity: 0.5;
}

#page-info {
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    color: var(--on-surface);
    white-space: nowrap;
}

/* History Controls */
.history-controls {
    display: flex;
    flex-shrink: 0;
}

#clear-history-button {
    background: var(--danger);
    color: white;
    width: 100%;
    font-size: var(--font-size-tabs, 15px);
    padding: 14px 0;
    font-weight: 600;
    box-shadow: var(--shadow-md);
}

/* ========================
   PROVINCE CHECKER TAB
   ======================== */
.province-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

.province-input-section {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

#province-input {
    flex: 1;
    min-width: 0;
}

#btn-clear-province {
    background: var(--danger);
    color: white;
    padding: 0 20px;
    font-size: 14px;
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

.province-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    flex: 1;
    overflow-y: auto;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.province-header {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
    text-align: center;
}

.province-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: 14px;
    line-height: 1.6;
}

.province-item {
    padding: var(--spacing-md);
    margin: var(--spacing-xs) 0;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--border);
    font-size: 14px;
    line-height: 1.6;
    animation: slideUp var(--transition-base);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.province-item .time {
    color: var(--on-surface-variant);
    font-size: 12px;
    font-weight: 500;
}

.province-item .name {
    font-weight: 600;
    color: var(--on-surface);
}

.province-item .arrow {
    color: var(--on-surface-variant);
}

.province-item .result {
    font-weight: 700;
    font-size: 16px;
}

.province-item.hang-bay {
    border-left-color: var(--danger);
}

.province-item.hang-bay .result {
    color: var(--danger);
}

.province-item.hang-bo {
    border-left-color: var(--secondary);
}

.province-item.hang-bo .result {
    color: var(--secondary);
}

/* ========================
   SCROLLBAR
   ======================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--on-surface-variant);
}

/* ========================
   DESKTOP STYLES (‚â•768px)
   ======================== */
@media (min-width: 768px) {
    /* Show desktop elements */
    .app-header {
        display: block;
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: white;
        padding: var(--spacing-lg) var(--spacing-xl);
        box-shadow: var(--shadow-md);
        z-index: 10;
    }
    
    .header-content {
        max-width: 1400px;
        margin: 0 auto;
    }
    
    .app-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: var(--spacing-xs);
    }
    
    .app-subtitle {
        font-size: 14px;
        opacity: 0.9;
        font-weight: 500;
    }
    
    .sidebar-nav {
        display: flex;
        flex-direction: column;
        position: fixed;
        left: 0;
        top: 0;
        width: 260px;
        height: 100vh;
        background: var(--surface);
        border-right: 1px solid var(--border);
        padding: var(--spacing-lg);
        gap: var(--spacing-sm);
        box-shadow: var(--shadow-sm);
        z-index: 50;
    }
    
    .nav-brand {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        border-bottom: 2px solid var(--border);
    }
    
    .brand-icon {
        font-size: 32px;
    }
    
    .brand-text {
        font-size: 20px;
        font-weight: 700;
        color: var(--on-surface);
    }
    
    .nav-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        background: transparent;
        color: var(--on-surface-variant);
        text-align: left;
        border-radius: var(--radius-md);
        transition: all var(--transition-fast);
        font-size: var(--font-size-nav);
    }
    
    .nav-icon {
        font-size: 24px;
    }
    
    .nav-text {
        font-weight: 500;
    }
    
    .nav-item:hover {
        background: var(--surface-variant);
    }
    
    .nav-item.active {
        background: #e8f0fe;
        color: var(--primary);
        font-weight: 600;
    }
    
    /* Hide bottom nav on desktop */
    .bottom-nav {
        display: none;
    }
    
    /* Hide hamburger menu on desktop */
    .hamburger-menu,
    .slide-menu,
    .menu-overlay {
        display: none;
    }
    
    /* Adjust main content for desktop */
    #app {
        display: grid;
        grid-template-columns: 260px 1fr;
        grid-template-rows: auto 1fr;
    }
    
    .app-header {
        grid-column: 2 / 3;
        grid-row: 1 / 2;
    }
    
    .sidebar-nav {
        grid-column: 1 / 2;
        grid-row: 1 / 3;
        position: static;
        height: auto;
    }
    
    .main-content {
        grid-column: 2 / 3;
        grid-row: 2 / 3;
        padding: var(--spacing-xl);
        padding-bottom: var(--spacing-xl);
        max-width: 1400px;
        margin: 0 auto;
        width: 100%;
    }
    
    /* Desktop specific adjustments */
    .search-bar {
        flex-direction: row;
    }
    
    .pagination-controls {
        justify-content: center;
        gap: var(--spacing-lg);
    }
    
    .pagination-controls button {
        min-width: 120px;
        padding: 12px 24px;
        font-size: var(--font-size-tabs, 15px);
    }
    
    #page-info {
        font-size: var(--font-size-tabs, 15px);
        min-width: 120px;
        text-align: center;
    }
}

/* Large Desktop (‚â•1200px) */
@media (min-width: 1200px) {
    .sidebar-nav {
        width: 280px;
    }
    
    #app {
        grid-template-columns: 280px 1fr;
    }
    
    .main-content {
        padding: var(--spacing-xl) 48px;
    }
}

/* ========================
   SHIPPING CALCULATOR STYLES
   ======================== */

.shipping-calculator-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    max-width: 100%;
    padding: 0;
    height: 100%;
}

/* Form nh·∫≠p li·ªáu */
.shipping-form {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    position: sticky;
    top: var(--spacing-sm);
    z-index: 10;
    margin-bottom: var(--spacing-md);
}

.form-header {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-md);
    text-align: center;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.form-group {
    margin-bottom: var(--spacing-sm);
}

.form-group label {
    display: block;
    font-weight: 600;
    color: var(--on-surface);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-small);
}

.form-group select,
.form-group input[type="number"] {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-base);
    font-family: var(--font-family);
    background: var(--surface);
    color: var(--on-surface);
    transition: all var(--transition-fast);
}

.form-group select:focus,
.form-group input[type="number"]:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

.form-group select:disabled {
    background: var(--surface-variant);
    cursor: not-allowed;
    opacity: 0.6;
}

.form-actions {
    display: flex;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-lg);
}

.form-actions button {
    flex: 1;
    padding: 14px 24px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: var(--font-size-base);
    font-weight: 600;
    font-family: var(--font-family);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    background: var(--surface-variant);
    color: var(--on-surface-variant);
}

.btn-secondary:hover {
    background: var(--border);
}

/* K·∫øt qu·∫£ */
.shipping-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    min-height: 150px;
    flex: 1;
    overflow-y: auto;
}

.result-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-lg);
    font-size: var(--font-size-base);
}

.result-header {
    margin-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--border);
    padding-bottom: var(--spacing-sm);
}

.result-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.result-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-sm);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.info-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.info-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
}

/* Quy tr√¨nh t√≠nh to√°n chi ti·∫øt */
.calculation-process {
    background: linear-gradient(135deg, var(--surface-variant) 0%, var(--surface) 100%);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border: 2px solid var(--primary);
    box-shadow: var(--shadow-md);
}

.process-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-md);
    text-align: center;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.process-steps {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.process-step {
    display: flex;
    gap: var(--spacing-sm);
    align-items: flex-start;
    background: var(--surface);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
    transition: all var(--transition-base);
}

.process-step:hover {
    background: var(--surface-variant);
    transform: translateX(4px);
}

.step-number {
    min-width: 32px;
    height: 32px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-base);
    flex-shrink: 0;
}

.step-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.step-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.step-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
    line-height: 1.5;
}

.step-value strong {
    color: var(--primary);
    font-weight: 700;
}

/* Cards d·ªãch v·ª• */
.services-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.service-card {
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    border: 2px solid var(--border);
    transition: all var(--transition-base);
    animation: fadeInUp 0.4s ease-out both;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.service-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary);
}

.service-card.service-disabled {
    opacity: 0.6;
    background: var(--surface);
    border-color: var(--border);
    cursor: not-allowed;
}

.service-card.service-disabled:hover {
    transform: none;
    box-shadow: none;
    border-color: var(--border);
}

.service-card.service-clickable {
    cursor: pointer;
    position: relative;
}

.service-card.service-clickable:hover {
    border-color: var(--primary);
}

.service-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-sm);
}

.toggle-icon {
    font-size: var(--font-size-small);
    color: var(--primary);
    transition: transform var(--transition-base);
    user-select: none;
}

.service-card.process-expanded .toggle-icon {
    transform: rotate(180deg);
}

.process-toggle-hint {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    text-align: center;
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    border: 1px dashed var(--border);
}

.hint-icon {
    font-size: var(--font-size-base);
}

.hint-text {
    font-weight: 500;
}

.calculation-process-detail {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        max-height: 2000px;
        transform: translateY(0);
    }
}

.service-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.service-icon {
    font-size: 24px;
}

.service-name {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--on-surface);
}

.service-body {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Ph√¢n t√≠ch gi√° */
.price-breakdown {
    background: var(--surface);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
}

.breakdown-title {
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-small);
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    font-size: var(--font-size-small);
}

.breakdown-label {
    color: var(--on-surface-variant);
}

.breakdown-value {
    font-weight: 600;
    color: var(--on-surface);
}

.breakdown-item.surcharge .breakdown-value {
    color: var(--warning);
}

.breakdown-item.total {
    margin-top: var(--spacing-xs);
    padding-top: var(--spacing-sm);
    font-size: var(--font-size-base);
    font-weight: 700;
}

.breakdown-item.total .breakdown-label {
    color: var(--on-surface);
}

.breakdown-item.total .breakdown-value {
    color: var(--primary);
    font-size: 18px;
}

.breakdown-separator {
    height: 1px;
    background: var(--border);
    margin: var(--spacing-xs) 0;
}

/* Disabled notice */
.service-disabled-notice {
    text-align: center;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border: 2px dashed var(--border);
}

.disabled-icon {
    font-size: 36px;
    margin-bottom: var(--spacing-xs);
}

.disabled-text {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--on-surface-variant);
    margin-bottom: var(--spacing-xs);
}

.disabled-reason {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-style: italic;
}

/* Th·ªùi gian giao h√†ng */
.service-time {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--secondary);
}

.time-icon {
    font-size: 18px;
}

.time-text {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 600;
}

/* B·∫£ng so s√°nh */
.comparison-section {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
}

.comparison-title {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.comparison-table {
    overflow-x: auto;
}

.comparison-table table {
    width: 100%;
    border-collapse: collapse;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.comparison-table thead {
    background: var(--primary);
    color: white;
}

.comparison-table th,
.comparison-table td {
    padding: 8px 12px;
    text-align: left;
    font-size: var(--font-size-small);
}

.comparison-table th {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.comparison-table tbody tr {
    border-bottom: 1px solid var(--border);
    transition: background var(--transition-fast);
}

.comparison-table tbody tr:last-child {
    border-bottom: none;
}

.comparison-table tbody tr:hover {
    background: var(--surface);
}

.comparison-table .table-icon {
    margin-right: 8px;
}

.comparison-table .price-cell {
    font-weight: 700;
    color: var(--primary);
    font-size: var(--font-size-base);
}

.comparison-table .row-disabled {
    opacity: 0.5;
    font-style: italic;
}

.comparison-table .row-disabled .price-cell {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Responsive cho mobile */
@media (max-width: 768px) {
    .shipping-calculator-container {
        gap: var(--spacing-sm);
        padding: 0;
    }
    
    .shipping-form,
    .shipping-result {
        padding: var(--spacing-sm);
        border-radius: var(--radius-sm);
    }
    
    .form-header,
    .result-title,
    .comparison-title {
        font-size: var(--font-size-base);
    }
    
    .form-actions {
        flex-direction: column;
        gap: var(--spacing-xs);
    }
    
    .form-actions button {
        width: 100%;
        padding: 12px 20px;
    }
    
    .services-container {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .service-card {
        padding: var(--spacing-xs);
    }
    
    .result-info {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .comparison-table table {
        font-size: 11px;
    }
    
    .comparison-table th,
    .comparison-table td {
        padding: 6px 8px;
    }
}

```

ƒêang ki·ªÉm tra ph·∫ßn responsive ƒë·ªÉ ƒë·∫£m b·∫£o sticky ho·∫°t ƒë·ªông t·ªët tr√™n mobile:


ƒê√£ th√™m `position: sticky` cho form. Khi cu·ªôn xu·ªëng xem k·∫øt qu·∫£, ph·∫ßn form ch·ªçn t·ªânh/huy·ªán/nh·∫≠p s·ªë kg s·∫Ω lu√¥n hi·ªÉn th·ªã ·ªü tr√™n c√πng.

## Thay ƒë·ªïi ƒë√£ th·ª±c hi·ªán:

1. Th√™m `position: sticky` ‚Äî form d√≠nh ·ªü tr√™n khi scroll
2. Th√™m `top: var(--spacing-sm)` ‚Äî c√°ch top m·ªôt kho·∫£ng nh·ªè
3. Th√™m `z-index: 10` ‚Äî ƒë·∫£m b·∫£o form lu√¥n ·ªü tr√™n c√°c ph·∫ßn kh√°c
4. Th√™m `margin-bottom` ‚Äî t·∫°o kho·∫£ng c√°ch v·ªõi ph·∫ßn k·∫øt qu·∫£

Khi cu·ªôn xu·ªëng xem b·∫£ng gi√°, form v·∫´n hi·ªÉn th·ªã ·ªü tr√™n ƒë·ªÉ d·ªÖ thay ƒë·ªïi v√† t√≠nh l·∫°i.

---

**User**

chinh cho giao di·ªán ·ªü ph·∫ßn nay nho lai tren pc

---

**Cursor**

ƒêang ki·ªÉm tra CSS ƒë·ªÉ thu g·ªçn form tr√™n PC:


ƒêang thu g·ªçn form tr√™n PC: gi·∫£m padding, margin v√† font-size.


```css
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap');

/* ========================
   VARIABLES & RESET
   ======================== */
:root {
    /* Colors - Light Theme (Default) */
    --primary: #1a73e8;
    --primary-dark: #1557b0;
    --secondary: #34a853;
    --danger: #ea4335;
    --warning: #fbbc04;
    --background: #f8f9fa;
    --surface: #ffffff;
    --surface-variant: #f1f3f4;
    --on-surface: #202124;
    --on-surface-variant: #5f6368;
    --border: #dadce0;
    --shadow-sm: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
    --shadow-md: 0 1px 3px 0 rgba(60,64,67,0.3), 0 4px 8px 3px rgba(60,64,67,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(60,64,67,0.3), 0 8px 12px 6px rgba(60,64,67,0.15);
    
    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-full: 9999px;
    
    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Typography */
    --font-family: 'Be Vietnam Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-size-base: 16px;
    --font-size-small: 14px;
    --font-size-large: 18px;
}

/* Dark Theme */
[data-theme="dark"] {
    --primary: #8ab4f8;
    --primary-dark: #669df6;
    --secondary: #34a853;
    --danger: #f28b82;
    --warning: #fdd663;
    --background: #121212;
    --surface: #1e1e1e;
    --surface-variant: #2d2d2d;
    --on-surface: #e8eaed;
    --on-surface-variant: #9aa0a6;
    --border: #3c4043;
    --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
    --shadow-md: 0 1px 3px 0 rgba(0,0,0,0.3), 0 4px 8px 3px rgba(0,0,0,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(0,0,0,0.3), 0 8px 12px 6px rgba(0,0,0,0.15);
}

/* Size Variants */
[data-size="tiny"] {
    --font-size-base: 12px;
    --font-size-small: 10px;
    --font-size-large: 14px;
    --font-size-nav: 11px;
    --spacing-xs: 2px;
    --spacing-sm: 4px;
    --spacing-md: 8px;
    --spacing-lg: 12px;
    --spacing-xl: 16px;
}

[data-size="small"] {
    --font-size-base: 14px;
    --font-size-small: 12px;
    --font-size-large: 16px;
    --font-size-nav: 13px;
    --spacing-xs: 3px;
    --spacing-sm: 6px;
    --spacing-md: 12px;
    --spacing-lg: 18px;
    --spacing-xl: 24px;
}

[data-size="large"] {
    --font-size-base: 18px;
    --font-size-small: 16px;
    --font-size-large: 20px;
    --font-size-nav: 17px;
    --spacing-xs: 5px;
    --spacing-sm: 10px;
    --spacing-md: 20px;
    --spacing-lg: 28px;
    --spacing-xl: 36px;
}

/* Add default nav font size and tab-specific fonts */
:root {
    --font-size-nav: 15px;
    --font-size-tabs: 16px;
    --font-size-tab-title: 18px;
    --font-size-tab-content: 14px;
    --font-size-tab-small: 13px;
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    color: var(--on-surface);
    background: var(--background);
    transition: all var(--transition-base);
}

body {
    font-family: var(--font-family);
    background: var(--background);
    color: var(--on-surface);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
}

/* Tab-specific font sizes */
#cbm-calculator,
#history {
    font-size: var(--font-size-tabs);
}

/* Tab font sizes for different sizes */
html[data-tab-size="tiny"] {
    --font-size-tabs: 12px !important;
    --font-size-tab-title: 13px !important;
    --font-size-tab-content: 11px !important;
    --font-size-tab-small: 10px !important;
}

html[data-tab-size="small"] {
    --font-size-tabs: 14px !important;
    --font-size-tab-title: 15px !important;
    --font-size-tab-content: 13px !important;
    --font-size-tab-small: 11px !important;
}

html[data-tab-size="medium"] {
    --font-size-tabs: 16px !important;
    --font-size-tab-title: 18px !important;
    --font-size-tab-content: 14px !important;
    --font-size-tab-small: 13px !important;
}

html[data-tab-size="large"] {
    --font-size-tabs: 18px !important;
    --font-size-tab-title: 20px !important;
    --font-size-tab-content: 16px !important;
    --font-size-tab-small: 15px !important;
}

/* ========================
   APP LAYOUT - MOBILE FIRST
   ======================== */
#app {
    display: flex;
    flex-direction: column;
    height: 100vh;
    height: 100dvh;
    width: 100%;
}

/* Header - Hidden on mobile, shown on desktop */
.app-header {
    display: none;
}

/* Sidebar - Hidden on mobile, shown on desktop */
.sidebar-nav {
    display: none;
}

/* Main Content - Full height on mobile */
.main-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: var(--spacing-md);
    padding-top: var(--spacing-md); /* Hamburger is transparent, no space needed */
    scroll-behavior: smooth;
}

/* Hamburger Menu - Mobile only */
.hamburger-menu {
    position: fixed;
    top: 8px;
    left: 8px;
    width: 28px;
    height: 28px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    border: none;
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 3px;
    padding: 0;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
}

/* TƒÉng v√πng click cho hamburger */
.hamburger-menu::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
}

.hamburger-menu:hover {
    background: rgba(0, 0, 0, 0.4);
}

.hamburger-menu span {
    width: 16px;
    height: 2px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 1px;
    transition: all var(--transition-fast);
    box-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.hamburger-menu:active span {
    background: rgba(255, 255, 255, 1);
    transform: scaleX(1.1);
}

.hamburger-menu.hidden {
    opacity: 0;
    pointer-events: none;
}

/* Slide Menu - Mobile only */
.slide-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    height: 100vh;
    background: var(--surface);
    box-shadow: var(--shadow-lg);
    transform: translateX(-100%);
    transition: transform var(--transition-slow);
    z-index: 1100;
    display: flex;
    flex-direction: column;
}

.slide-menu.open {
    transform: translateX(0);
}

.slide-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border);
    background: var(--surface);
    color: var(--on-surface);
}

.menu-title {
    font-size: 20px;
    font-weight: 700;
}

.close-menu {
    width: 36px;
    height: 36px;
    border: 1px solid var(--border);
    background: var(--surface-variant);
    color: var(--on-surface);
    font-size: 28px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.close-menu:active {
    background: rgba(255,255,255,0.3);
}

.slide-menu-nav {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-md);
    gap: var(--spacing-xs);
}

.slide-menu-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: transparent;
    border: none;
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-nav);
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: left;
}

.slide-menu-item .menu-icon {
    font-size: 24px;
}

.slide-menu-item:active {
    transform: scale(0.98);
}

.slide-menu-item.active {
    background: #e8f0fe;
    color: var(--primary);
    font-weight: 600;
}

.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--transition-base);
    z-index: 1050;
}

.menu-overlay.visible {
    opacity: 1;
    pointer-events: all;
}

/* Theme Toggle Button - Medium Size & Adaptive */
.theme-toggle {
    position: fixed;
    top: 8px;
    right: 8px;
    width: 32px;
    height: 32px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.theme-toggle:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
    background: var(--primary);
    border-color: var(--primary);
}

.theme-toggle:active {
    transform: scale(0.95);
}

.theme-icon {
    position: absolute;
    font-size: 14px;
    transition: all var(--transition-base);
    filter: brightness(1);
}

.sun-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: #f59e0b;
}

.moon-icon {
    opacity: 0;
    transform: rotate(-180deg) scale(0.5);
    color: #6366f1;
}

[data-theme="dark"] .sun-icon {
    opacity: 0;
    transform: rotate(180deg) scale(0.5);
}

[data-theme="dark"] .moon-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
}

/* Adaptive colors based on theme */
[data-theme="light"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

[data-theme="dark"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

/* Bottom Navigation - REMOVED (using hamburger menu instead) */
.bottom-nav {
    display: none;
}

/* ========================
   TAB CONTENT
   ======================== */
.tab-content {
    display: none;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    animation: fadeIn var(--transition-base);
}

.tab-content.active {
    display: flex;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================
   INPUT STYLES
   ======================== */
input[type="number"],
input[type="text"] {
    width: 100%;
    padding: 14px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-base);
    font-weight: 500;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-appearance: none;
    appearance: none;
}

/* Input fields in CBM Calculator and History tabs */
#cbm-calculator input[type="number"],
#cbm-calculator input[type="text"],
#history input[type="text"] {
    font-size: var(--font-size-tabs);
}

input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

input::placeholder {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Remove number spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
}

input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
}

/* ========================
   BUTTON STYLES
   ======================== */
button {
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    font-weight: 600;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-tap-highlight-color: transparent;
}

button:active {
    transform: scale(0.97);
}

/* ========================
   CBM CALCULATOR TAB
   ======================== */
#cbm-calculator {
    justify-content: space-between;
}

#cbm-main-content {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.group-item {
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    animation: slideUp var(--transition-base);
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.group-item p {
    margin: 0 0 8px 0;
    line-height: 1.6;
    font-size: var(--font-size-tab-content, 14px);
}

.group-item .value {
    color: var(--primary);
    font-weight: 600;
}

.group-title {
    font-weight: 700;
    color: var(--on-surface);
    font-size: var(--font-size-tabs, 16px);
    margin-bottom: 12px !important;
}

.group-item.current-input {
    border-left-color: var(--primary);
    background: #e8f0fe;
    color: var(--on-surface);
}

[data-theme="dark"] .group-item.current-input {
    background: var(--surface-variant);
    color: var(--on-surface);
}

.group-item hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: var(--spacing-md) 0;
}

.empty-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: var(--font-size-tab-content, 14px);
}

/* CBM Controls */
#cbm-controls {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    flex-shrink: 0;
}

#cbm-actions {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: var(--spacing-sm);
}

#cbm-actions button {
    padding: 12px;
    font-size: var(--font-size-tab-content, 14px);
    color: white;
    box-shadow: var(--shadow-sm);
}

#btn-back1,
#btn-back2 {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
}

#btn-reset {
    background: linear-gradient(135deg, var(--danger), #c5221f);
}

#cbm-actions button:hover {
    box-shadow: var(--shadow-md);
    filter: brightness(1.05);
}

/* ========================
   HISTORY TAB
   ======================== */
.history-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

/* Search Bar */
.search-bar {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

.search-bar input {
    flex: 1;
    min-width: 0;
}

.search-bar button {
    background: var(--primary);
    color: white;
    padding: 0 20px;
    font-size: var(--font-size-tab-content, 14px);
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

/* History List */
#history-list {
    background: var(--surface);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.history-header {
    font-size: var(--font-size-tab-title, 18px);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.history-stats {
    font-size: var(--font-size-tab-small, 13px);
    color: var(--on-surface-variant);
    font-weight: 500;
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    background: #e8f0fe;
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
}

.history-item {
    padding: var(--spacing-md);
    margin: var(--spacing-sm) 0;
    word-wrap: break-word;
    line-height: 1.7;
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    font-size: var(--font-size-tab-content, 14px);
    color: var(--on-surface);
    animation: slideUp var(--transition-base);
    box-shadow: var(--shadow-sm);
}

/* Pagination */
.pagination-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-shrink: 0;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
}

.pagination-controls button {
    background: var(--primary);
    color: white;
    padding: 10px 20px;
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    min-width: 90px;
    box-shadow: var(--shadow-sm);
}

.pagination-controls button:disabled {
    background: var(--border);
    color: var(--on-surface-variant);
    cursor: not-allowed;
    opacity: 0.5;
}

#page-info {
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    color: var(--on-surface);
    white-space: nowrap;
}

/* History Controls */
.history-controls {
    display: flex;
    flex-shrink: 0;
}

#clear-history-button {
    background: var(--danger);
    color: white;
    width: 100%;
    font-size: var(--font-size-tabs, 15px);
    padding: 14px 0;
    font-weight: 600;
    box-shadow: var(--shadow-md);
}

/* ========================
   PROVINCE CHECKER TAB
   ======================== */
.province-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

.province-input-section {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

#province-input {
    flex: 1;
    min-width: 0;
}

#btn-clear-province {
    background: var(--danger);
    color: white;
    padding: 0 20px;
    font-size: 14px;
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

.province-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    flex: 1;
    overflow-y: auto;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.province-header {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
    text-align: center;
}

.province-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: 14px;
    line-height: 1.6;
}

.province-item {
    padding: var(--spacing-md);
    margin: var(--spacing-xs) 0;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--border);
    font-size: 14px;
    line-height: 1.6;
    animation: slideUp var(--transition-base);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.province-item .time {
    color: var(--on-surface-variant);
    font-size: 12px;
    font-weight: 500;
}

.province-item .name {
    font-weight: 600;
    color: var(--on-surface);
}

.province-item .arrow {
    color: var(--on-surface-variant);
}

.province-item .result {
    font-weight: 700;
    font-size: 16px;
}

.province-item.hang-bay {
    border-left-color: var(--danger);
}

.province-item.hang-bay .result {
    color: var(--danger);
}

.province-item.hang-bo {
    border-left-color: var(--secondary);
}

.province-item.hang-bo .result {
    color: var(--secondary);
}

/* ========================
   SCROLLBAR
   ======================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--on-surface-variant);
}

/* ========================
   DESKTOP STYLES (‚â•768px)
   ======================== */
@media (min-width: 768px) {
    /* Show desktop elements */
    .app-header {
        display: block;
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: white;
        padding: var(--spacing-lg) var(--spacing-xl);
        box-shadow: var(--shadow-md);
        z-index: 10;
    }
    
    .header-content {
        max-width: 1400px;
        margin: 0 auto;
    }
    
    .app-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: var(--spacing-xs);
    }
    
    .app-subtitle {
        font-size: 14px;
        opacity: 0.9;
        font-weight: 500;
    }
    
    .sidebar-nav {
        display: flex;
        flex-direction: column;
        position: fixed;
        left: 0;
        top: 0;
        width: 260px;
        height: 100vh;
        background: var(--surface);
        border-right: 1px solid var(--border);
        padding: var(--spacing-lg);
        gap: var(--spacing-sm);
        box-shadow: var(--shadow-sm);
        z-index: 50;
    }
    
    .nav-brand {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        border-bottom: 2px solid var(--border);
    }
    
    .brand-icon {
        font-size: 32px;
    }
    
    .brand-text {
        font-size: 20px;
        font-weight: 700;
        color: var(--on-surface);
    }
    
    .nav-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        background: transparent;
        color: var(--on-surface-variant);
        text-align: left;
        border-radius: var(--radius-md);
        transition: all var(--transition-fast);
        font-size: var(--font-size-nav);
    }
    
    .nav-icon {
        font-size: 24px;
    }
    
    .nav-text {
        font-weight: 500;
    }
    
    .nav-item:hover {
        background: var(--surface-variant);
    }
    
    .nav-item.active {
        background: #e8f0fe;
        color: var(--primary);
        font-weight: 600;
    }
    
    /* Hide bottom nav on desktop */
    .bottom-nav {
        display: none;
    }
    
    /* Hide hamburger menu on desktop */
    .hamburger-menu,
    .slide-menu,
    .menu-overlay {
        display: none;
    }
    
    /* Adjust main content for desktop */
    #app {
        display: grid;
        grid-template-columns: 260px 1fr;
        grid-template-rows: auto 1fr;
    }
    
    .app-header {
        grid-column: 2 / 3;
        grid-row: 1 / 2;
    }
    
    .sidebar-nav {
        grid-column: 1 / 2;
        grid-row: 1 / 3;
        position: static;
        height: auto;
    }
    
    .main-content {
        grid-column: 2 / 3;
        grid-row: 2 / 3;
        padding: var(--spacing-xl);
        padding-bottom: var(--spacing-xl);
        max-width: 1400px;
        margin: 0 auto;
        width: 100%;
    }
    
    /* Desktop specific adjustments */
    .search-bar {
        flex-direction: row;
    }
    
    .pagination-controls {
        justify-content: center;
        gap: var(--spacing-lg);
    }
    
    .pagination-controls button {
        min-width: 120px;
        padding: 12px 24px;
        font-size: var(--font-size-tabs, 15px);
    }
    
    #page-info {
        font-size: var(--font-size-tabs, 15px);
        min-width: 120px;
        text-align: center;
    }
}

/* Large Desktop (‚â•1200px) */
@media (min-width: 1200px) {
    .sidebar-nav {
        width: 280px;
    }
    
    #app {
        grid-template-columns: 280px 1fr;
    }
    
    .main-content {
        padding: var(--spacing-xl) 48px;
    }
}

/* ========================
   SHIPPING CALCULATOR STYLES
   ======================== */

.shipping-calculator-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    max-width: 100%;
    padding: 0;
    height: 100%;
}

/* Form nh·∫≠p li·ªáu */
.shipping-form {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-sm);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    position: sticky;
    top: var(--spacing-sm);
    z-index: 10;
    margin-bottom: var(--spacing-md);
    max-width: 100%;
}

.form-header {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
    padding-bottom: var(--spacing-xs);
    border-bottom: 2px solid var(--border);
}

.form-group {
    margin-bottom: var(--spacing-xs);
}

.form-group label {
    display: block;
    font-weight: 600;
    color: var(--on-surface);
    margin-bottom: 4px;
    font-size: var(--font-size-small);
}

.form-group select,
.form-group input[type="number"] {
    width: 100%;
    padding: 8px 12px;
    border: 2px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-small);
    font-family: var(--font-family);
    background: var(--surface);
    color: var(--on-surface);
    transition: all var(--transition-fast);
}

.form-group select:focus,
.form-group input[type="number"]:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

.form-group select:disabled {
    background: var(--surface-variant);
    cursor: not-allowed;
    opacity: 0.6;
}

.form-actions {
    display: flex;
    gap: var(--spacing-xs);
    margin-top: var(--spacing-sm);
}

.form-actions button {
    flex: 1;
    padding: 10px 16px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: var(--font-size-small);
    font-weight: 600;
    font-family: var(--font-family);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    background: var(--surface-variant);
    color: var(--on-surface-variant);
}

.btn-secondary:hover {
    background: var(--border);
}

/* K·∫øt qu·∫£ */
.shipping-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    min-height: 150px;
    flex: 1;
    overflow-y: auto;
}

.result-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-lg);
    font-size: var(--font-size-base);
}

.result-header {
    margin-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--border);
    padding-bottom: var(--spacing-sm);
}

.result-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.result-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-sm);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.info-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.info-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
}

/* Quy tr√¨nh t√≠nh to√°n chi ti·∫øt */
.calculation-process {
    background: linear-gradient(135deg, var(--surface-variant) 0%, var(--surface) 100%);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border: 2px solid var(--primary);
    box-shadow: var(--shadow-md);
}

.process-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-md);
    text-align: center;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.process-steps {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.process-step {
    display: flex;
    gap: var(--spacing-sm);
    align-items: flex-start;
    background: var(--surface);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
    transition: all var(--transition-base);
}

.process-step:hover {
    background: var(--surface-variant);
    transform: translateX(4px);
}

.step-number {
    min-width: 32px;
    height: 32px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-base);
    flex-shrink: 0;
}

.step-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.step-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.step-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
    line-height: 1.5;
}

.step-value strong {
    color: var(--primary);
    font-weight: 700;
}

/* Cards d·ªãch v·ª• */
.services-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.service-card {
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    border: 2px solid var(--border);
    transition: all var(--transition-base);
    animation: fadeInUp 0.4s ease-out both;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.service-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary);
}

.service-card.service-disabled {
    opacity: 0.6;
    background: var(--surface);
    border-color: var(--border);
    cursor: not-allowed;
}

.service-card.service-disabled:hover {
    transform: none;
    box-shadow: none;
    border-color: var(--border);
}

.service-card.service-clickable {
    cursor: pointer;
    position: relative;
}

.service-card.service-clickable:hover {
    border-color: var(--primary);
}

.service-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-sm);
}

.toggle-icon {
    font-size: var(--font-size-small);
    color: var(--primary);
    transition: transform var(--transition-base);
    user-select: none;
}

.service-card.process-expanded .toggle-icon {
    transform: rotate(180deg);
}

.process-toggle-hint {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    text-align: center;
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    border: 1px dashed var(--border);
}

.hint-icon {
    font-size: var(--font-size-base);
}

.hint-text {
    font-weight: 500;
}

.calculation-process-detail {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        max-height: 2000px;
        transform: translateY(0);
    }
}

.service-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.service-icon {
    font-size: 24px;
}

.service-name {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--on-surface);
}

.service-body {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Ph√¢n t√≠ch gi√° */
.price-breakdown {
    background: var(--surface);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
}

.breakdown-title {
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-small);
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    font-size: var(--font-size-small);
}

.breakdown-label {
    color: var(--on-surface-variant);
}

.breakdown-value {
    font-weight: 600;
    color: var(--on-surface);
}

.breakdown-item.surcharge .breakdown-value {
    color: var(--warning);
}

.breakdown-item.total {
    margin-top: var(--spacing-xs);
    padding-top: var(--spacing-sm);
    font-size: var(--font-size-base);
    font-weight: 700;
}

.breakdown-item.total .breakdown-label {
    color: var(--on-surface);
}

.breakdown-item.total .breakdown-value {
    color: var(--primary);
    font-size: 18px;
}

.breakdown-separator {
    height: 1px;
    background: var(--border);
    margin: var(--spacing-xs) 0;
}

/* Disabled notice */
.service-disabled-notice {
    text-align: center;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border: 2px dashed var(--border);
}

.disabled-icon {
    font-size: 36px;
    margin-bottom: var(--spacing-xs);
}

.disabled-text {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--on-surface-variant);
    margin-bottom: var(--spacing-xs);
}

.disabled-reason {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-style: italic;
}

/* Th·ªùi gian giao h√†ng */
.service-time {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--secondary);
}

.time-icon {
    font-size: 18px;
}

.time-text {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 600;
}

/* B·∫£ng so s√°nh */
.comparison-section {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
}

.comparison-title {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.comparison-table {
    overflow-x: auto;
}

.comparison-table table {
    width: 100%;
    border-collapse: collapse;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.comparison-table thead {
    background: var(--primary);
    color: white;
}

.comparison-table th,
.comparison-table td {
    padding: 8px 12px;
    text-align: left;
    font-size: var(--font-size-small);
}

.comparison-table th {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.comparison-table tbody tr {
    border-bottom: 1px solid var(--border);
    transition: background var(--transition-fast);
}

.comparison-table tbody tr:last-child {
    border-bottom: none;
}

.comparison-table tbody tr:hover {
    background: var(--surface);
}

.comparison-table .table-icon {
    margin-right: 8px;
}

.comparison-table .price-cell {
    font-weight: 700;
    color: var(--primary);
    font-size: var(--font-size-base);
}

.comparison-table .row-disabled {
    opacity: 0.5;
    font-style: italic;
}

.comparison-table .row-disabled .price-cell {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Responsive cho mobile */
@media (max-width: 768px) {
    .shipping-calculator-container {
        gap: var(--spacing-sm);
        padding: 0;
    }
    
    .shipping-form,
    .shipping-result {
        padding: var(--spacing-sm);
        border-radius: var(--radius-sm);
    }
    
    .form-header,
    .result-title,
    .comparison-title {
        font-size: var(--font-size-base);
    }
    
    .form-actions {
        flex-direction: column;
        gap: var(--spacing-xs);
    }
    
    .form-actions button {
        width: 100%;
        padding: 12px 20px;
    }
    
    .services-container {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .service-card {
        padding: var(--spacing-xs);
    }
    
    .result-info {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .comparison-table table {
        font-size: 11px;
    }
    
    .comparison-table th,
    .comparison-table td {
        padding: 6px 8px;
    }
}

```

ƒêang ki·ªÉm tra ph·∫ßn responsive ƒë·ªÉ ƒë·∫£m b·∫£o form v·∫´n d·ªÖ d√πng tr√™n mobile:


ƒê√£ thu g·ªçn form tr√™n PC. C√°c thay ƒë·ªïi:

## Thay ƒë·ªïi ƒë√£ th·ª±c hi·ªán:

1. Gi·∫£m padding form: t·ª´ `var(--spacing-md)` xu·ªëng `var(--spacing-sm)`
2. Gi·∫£m font-size header: t·ª´ `var(--font-size-large)` xu·ªëng `var(--font-size-base)`
3. Gi·∫£m margin form-group: t·ª´ `var(--spacing-sm)` xu·ªëng `var(--spacing-xs)`
4. Gi·∫£m padding input/select: t·ª´ `12px 16px` xu·ªëng `8px 12px`
5. Gi·∫£m font-size input: t·ª´ `var(--font-size-base)` xu·ªëng `var(--font-size-small)`
6. Gi·∫£m margin-top form-actions: t·ª´ `var(--spacing-lg)` xu·ªëng `var(--spacing-sm)`
7. Gi·∫£m padding button: t·ª´ `14px 24px` xu·ªëng `10px 16px`
8. Gi·∫£m font-size button: t·ª´ `var(--font-size-base)` xu·ªëng `var(--font-size-small)`

Form ƒë√£ nh·ªè g·ªçn h∆°n tr√™n PC, v·∫´n sticky ·ªü tr√™n khi scroll, v√† v·∫´n d·ªÖ d√πng tr√™n mobile.

---

**User**

nho hon nua . chinh tren pc va mobie

---

**Cursor**

ƒêang thu g·ªçn form h∆°n n·ªØa cho c·∫£ PC v√† mobile:


```css
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap');

/* ========================
   VARIABLES & RESET
   ======================== */
:root {
    /* Colors - Light Theme (Default) */
    --primary: #1a73e8;
    --primary-dark: #1557b0;
    --secondary: #34a853;
    --danger: #ea4335;
    --warning: #fbbc04;
    --background: #f8f9fa;
    --surface: #ffffff;
    --surface-variant: #f1f3f4;
    --on-surface: #202124;
    --on-surface-variant: #5f6368;
    --border: #dadce0;
    --shadow-sm: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
    --shadow-md: 0 1px 3px 0 rgba(60,64,67,0.3), 0 4px 8px 3px rgba(60,64,67,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(60,64,67,0.3), 0 8px 12px 6px rgba(60,64,67,0.15);
    
    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-full: 9999px;
    
    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Typography */
    --font-family: 'Be Vietnam Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-size-base: 16px;
    --font-size-small: 14px;
    --font-size-large: 18px;
}

/* Dark Theme */
[data-theme="dark"] {
    --primary: #8ab4f8;
    --primary-dark: #669df6;
    --secondary: #34a853;
    --danger: #f28b82;
    --warning: #fdd663;
    --background: #121212;
    --surface: #1e1e1e;
    --surface-variant: #2d2d2d;
    --on-surface: #e8eaed;
    --on-surface-variant: #9aa0a6;
    --border: #3c4043;
    --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
    --shadow-md: 0 1px 3px 0 rgba(0,0,0,0.3), 0 4px 8px 3px rgba(0,0,0,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(0,0,0,0.3), 0 8px 12px 6px rgba(0,0,0,0.15);
}

/* Size Variants */
[data-size="tiny"] {
    --font-size-base: 12px;
    --font-size-small: 10px;
    --font-size-large: 14px;
    --font-size-nav: 11px;
    --spacing-xs: 2px;
    --spacing-sm: 4px;
    --spacing-md: 8px;
    --spacing-lg: 12px;
    --spacing-xl: 16px;
}

[data-size="small"] {
    --font-size-base: 14px;
    --font-size-small: 12px;
    --font-size-large: 16px;
    --font-size-nav: 13px;
    --spacing-xs: 3px;
    --spacing-sm: 6px;
    --spacing-md: 12px;
    --spacing-lg: 18px;
    --spacing-xl: 24px;
}

[data-size="large"] {
    --font-size-base: 18px;
    --font-size-small: 16px;
    --font-size-large: 20px;
    --font-size-nav: 17px;
    --spacing-xs: 5px;
    --spacing-sm: 10px;
    --spacing-md: 20px;
    --spacing-lg: 28px;
    --spacing-xl: 36px;
}

/* Add default nav font size and tab-specific fonts */
:root {
    --font-size-nav: 15px;
    --font-size-tabs: 16px;
    --font-size-tab-title: 18px;
    --font-size-tab-content: 14px;
    --font-size-tab-small: 13px;
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    color: var(--on-surface);
    background: var(--background);
    transition: all var(--transition-base);
}

body {
    font-family: var(--font-family);
    background: var(--background);
    color: var(--on-surface);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
}

/* Tab-specific font sizes */
#cbm-calculator,
#history {
    font-size: var(--font-size-tabs);
}

/* Tab font sizes for different sizes */
html[data-tab-size="tiny"] {
    --font-size-tabs: 12px !important;
    --font-size-tab-title: 13px !important;
    --font-size-tab-content: 11px !important;
    --font-size-tab-small: 10px !important;
}

html[data-tab-size="small"] {
    --font-size-tabs: 14px !important;
    --font-size-tab-title: 15px !important;
    --font-size-tab-content: 13px !important;
    --font-size-tab-small: 11px !important;
}

html[data-tab-size="medium"] {
    --font-size-tabs: 16px !important;
    --font-size-tab-title: 18px !important;
    --font-size-tab-content: 14px !important;
    --font-size-tab-small: 13px !important;
}

html[data-tab-size="large"] {
    --font-size-tabs: 18px !important;
    --font-size-tab-title: 20px !important;
    --font-size-tab-content: 16px !important;
    --font-size-tab-small: 15px !important;
}

/* ========================
   APP LAYOUT - MOBILE FIRST
   ======================== */
#app {
    display: flex;
    flex-direction: column;
    height: 100vh;
    height: 100dvh;
    width: 100%;
}

/* Header - Hidden on mobile, shown on desktop */
.app-header {
    display: none;
}

/* Sidebar - Hidden on mobile, shown on desktop */
.sidebar-nav {
    display: none;
}

/* Main Content - Full height on mobile */
.main-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: var(--spacing-md);
    padding-top: var(--spacing-md); /* Hamburger is transparent, no space needed */
    scroll-behavior: smooth;
}

/* Hamburger Menu - Mobile only */
.hamburger-menu {
    position: fixed;
    top: 8px;
    left: 8px;
    width: 28px;
    height: 28px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    border: none;
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 3px;
    padding: 0;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
}

/* TƒÉng v√πng click cho hamburger */
.hamburger-menu::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
}

.hamburger-menu:hover {
    background: rgba(0, 0, 0, 0.4);
}

.hamburger-menu span {
    width: 16px;
    height: 2px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 1px;
    transition: all var(--transition-fast);
    box-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.hamburger-menu:active span {
    background: rgba(255, 255, 255, 1);
    transform: scaleX(1.1);
}

.hamburger-menu.hidden {
    opacity: 0;
    pointer-events: none;
}

/* Slide Menu - Mobile only */
.slide-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    height: 100vh;
    background: var(--surface);
    box-shadow: var(--shadow-lg);
    transform: translateX(-100%);
    transition: transform var(--transition-slow);
    z-index: 1100;
    display: flex;
    flex-direction: column;
}

.slide-menu.open {
    transform: translateX(0);
}

.slide-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border);
    background: var(--surface);
    color: var(--on-surface);
}

.menu-title {
    font-size: 20px;
    font-weight: 700;
}

.close-menu {
    width: 36px;
    height: 36px;
    border: 1px solid var(--border);
    background: var(--surface-variant);
    color: var(--on-surface);
    font-size: 28px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.close-menu:active {
    background: rgba(255,255,255,0.3);
}

.slide-menu-nav {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-md);
    gap: var(--spacing-xs);
}

.slide-menu-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: transparent;
    border: none;
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-nav);
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: left;
}

.slide-menu-item .menu-icon {
    font-size: 24px;
}

.slide-menu-item:active {
    transform: scale(0.98);
}

.slide-menu-item.active {
    background: #e8f0fe;
    color: var(--primary);
    font-weight: 600;
}

.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--transition-base);
    z-index: 1050;
}

.menu-overlay.visible {
    opacity: 1;
    pointer-events: all;
}

/* Theme Toggle Button - Medium Size & Adaptive */
.theme-toggle {
    position: fixed;
    top: 8px;
    right: 8px;
    width: 32px;
    height: 32px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.theme-toggle:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
    background: var(--primary);
    border-color: var(--primary);
}

.theme-toggle:active {
    transform: scale(0.95);
}

.theme-icon {
    position: absolute;
    font-size: 14px;
    transition: all var(--transition-base);
    filter: brightness(1);
}

.sun-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: #f59e0b;
}

.moon-icon {
    opacity: 0;
    transform: rotate(-180deg) scale(0.5);
    color: #6366f1;
}

[data-theme="dark"] .sun-icon {
    opacity: 0;
    transform: rotate(180deg) scale(0.5);
}

[data-theme="dark"] .moon-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
}

/* Adaptive colors based on theme */
[data-theme="light"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

[data-theme="dark"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

/* Bottom Navigation - REMOVED (using hamburger menu instead) */
.bottom-nav {
    display: none;
}

/* ========================
   TAB CONTENT
   ======================== */
.tab-content {
    display: none;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    animation: fadeIn var(--transition-base);
}

.tab-content.active {
    display: flex;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================
   INPUT STYLES
   ======================== */
input[type="number"],
input[type="text"] {
    width: 100%;
    padding: 14px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-base);
    font-weight: 500;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-appearance: none;
    appearance: none;
}

/* Input fields in CBM Calculator and History tabs */
#cbm-calculator input[type="number"],
#cbm-calculator input[type="text"],
#history input[type="text"] {
    font-size: var(--font-size-tabs);
}

input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

input::placeholder {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Remove number spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
}

input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
}

/* ========================
   BUTTON STYLES
   ======================== */
button {
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    font-weight: 600;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-tap-highlight-color: transparent;
}

button:active {
    transform: scale(0.97);
}

/* ========================
   CBM CALCULATOR TAB
   ======================== */
#cbm-calculator {
    justify-content: space-between;
}

#cbm-main-content {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.group-item {
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    animation: slideUp var(--transition-base);
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.group-item p {
    margin: 0 0 8px 0;
    line-height: 1.6;
    font-size: var(--font-size-tab-content, 14px);
}

.group-item .value {
    color: var(--primary);
    font-weight: 600;
}

.group-title {
    font-weight: 700;
    color: var(--on-surface);
    font-size: var(--font-size-tabs, 16px);
    margin-bottom: 12px !important;
}

.group-item.current-input {
    border-left-color: var(--primary);
    background: #e8f0fe;
    color: var(--on-surface);
}

[data-theme="dark"] .group-item.current-input {
    background: var(--surface-variant);
    color: var(--on-surface);
}

.group-item hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: var(--spacing-md) 0;
}

.empty-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: var(--font-size-tab-content, 14px);
}

/* CBM Controls */
#cbm-controls {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    flex-shrink: 0;
}

#cbm-actions {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: var(--spacing-sm);
}

#cbm-actions button {
    padding: 12px;
    font-size: var(--font-size-tab-content, 14px);
    color: white;
    box-shadow: var(--shadow-sm);
}

#btn-back1,
#btn-back2 {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
}

#btn-reset {
    background: linear-gradient(135deg, var(--danger), #c5221f);
}

#cbm-actions button:hover {
    box-shadow: var(--shadow-md);
    filter: brightness(1.05);
}

/* ========================
   HISTORY TAB
   ======================== */
.history-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

/* Search Bar */
.search-bar {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

.search-bar input {
    flex: 1;
    min-width: 0;
}

.search-bar button {
    background: var(--primary);
    color: white;
    padding: 0 20px;
    font-size: var(--font-size-tab-content, 14px);
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

/* History List */
#history-list {
    background: var(--surface);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.history-header {
    font-size: var(--font-size-tab-title, 18px);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.history-stats {
    font-size: var(--font-size-tab-small, 13px);
    color: var(--on-surface-variant);
    font-weight: 500;
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    background: #e8f0fe;
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
}

.history-item {
    padding: var(--spacing-md);
    margin: var(--spacing-sm) 0;
    word-wrap: break-word;
    line-height: 1.7;
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    font-size: var(--font-size-tab-content, 14px);
    color: var(--on-surface);
    animation: slideUp var(--transition-base);
    box-shadow: var(--shadow-sm);
}

/* Pagination */
.pagination-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-shrink: 0;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
}

.pagination-controls button {
    background: var(--primary);
    color: white;
    padding: 10px 20px;
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    min-width: 90px;
    box-shadow: var(--shadow-sm);
}

.pagination-controls button:disabled {
    background: var(--border);
    color: var(--on-surface-variant);
    cursor: not-allowed;
    opacity: 0.5;
}

#page-info {
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    color: var(--on-surface);
    white-space: nowrap;
}

/* History Controls */
.history-controls {
    display: flex;
    flex-shrink: 0;
}

#clear-history-button {
    background: var(--danger);
    color: white;
    width: 100%;
    font-size: var(--font-size-tabs, 15px);
    padding: 14px 0;
    font-weight: 600;
    box-shadow: var(--shadow-md);
}

/* ========================
   PROVINCE CHECKER TAB
   ======================== */
.province-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

.province-input-section {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

#province-input {
    flex: 1;
    min-width: 0;
}

#btn-clear-province {
    background: var(--danger);
    color: white;
    padding: 0 20px;
    font-size: 14px;
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

.province-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    flex: 1;
    overflow-y: auto;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.province-header {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
    text-align: center;
}

.province-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: 14px;
    line-height: 1.6;
}

.province-item {
    padding: var(--spacing-md);
    margin: var(--spacing-xs) 0;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--border);
    font-size: 14px;
    line-height: 1.6;
    animation: slideUp var(--transition-base);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.province-item .time {
    color: var(--on-surface-variant);
    font-size: 12px;
    font-weight: 500;
}

.province-item .name {
    font-weight: 600;
    color: var(--on-surface);
}

.province-item .arrow {
    color: var(--on-surface-variant);
}

.province-item .result {
    font-weight: 700;
    font-size: 16px;
}

.province-item.hang-bay {
    border-left-color: var(--danger);
}

.province-item.hang-bay .result {
    color: var(--danger);
}

.province-item.hang-bo {
    border-left-color: var(--secondary);
}

.province-item.hang-bo .result {
    color: var(--secondary);
}

/* ========================
   SCROLLBAR
   ======================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--on-surface-variant);
}

/* ========================
   DESKTOP STYLES (‚â•768px)
   ======================== */
@media (min-width: 768px) {
    /* Show desktop elements */
    .app-header {
        display: block;
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: white;
        padding: var(--spacing-lg) var(--spacing-xl);
        box-shadow: var(--shadow-md);
        z-index: 10;
    }
    
    .header-content {
        max-width: 1400px;
        margin: 0 auto;
    }
    
    .app-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: var(--spacing-xs);
    }
    
    .app-subtitle {
        font-size: 14px;
        opacity: 0.9;
        font-weight: 500;
    }
    
    .sidebar-nav {
        display: flex;
        flex-direction: column;
        position: fixed;
        left: 0;
        top: 0;
        width: 260px;
        height: 100vh;
        background: var(--surface);
        border-right: 1px solid var(--border);
        padding: var(--spacing-lg);
        gap: var(--spacing-sm);
        box-shadow: var(--shadow-sm);
        z-index: 50;
    }
    
    .nav-brand {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        border-bottom: 2px solid var(--border);
    }
    
    .brand-icon {
        font-size: 32px;
    }
    
    .brand-text {
        font-size: 20px;
        font-weight: 700;
        color: var(--on-surface);
    }
    
    .nav-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        background: transparent;
        color: var(--on-surface-variant);
        text-align: left;
        border-radius: var(--radius-md);
        transition: all var(--transition-fast);
        font-size: var(--font-size-nav);
    }
    
    .nav-icon {
        font-size: 24px;
    }
    
    .nav-text {
        font-weight: 500;
    }
    
    .nav-item:hover {
        background: var(--surface-variant);
    }
    
    .nav-item.active {
        background: #e8f0fe;
        color: var(--primary);
        font-weight: 600;
    }
    
    /* Hide bottom nav on desktop */
    .bottom-nav {
        display: none;
    }
    
    /* Hide hamburger menu on desktop */
    .hamburger-menu,
    .slide-menu,
    .menu-overlay {
        display: none;
    }
    
    /* Adjust main content for desktop */
    #app {
        display: grid;
        grid-template-columns: 260px 1fr;
        grid-template-rows: auto 1fr;
    }
    
    .app-header {
        grid-column: 2 / 3;
        grid-row: 1 / 2;
    }
    
    .sidebar-nav {
        grid-column: 1 / 2;
        grid-row: 1 / 3;
        position: static;
        height: auto;
    }
    
    .main-content {
        grid-column: 2 / 3;
        grid-row: 2 / 3;
        padding: var(--spacing-xl);
        padding-bottom: var(--spacing-xl);
        max-width: 1400px;
        margin: 0 auto;
        width: 100%;
    }
    
    /* Desktop specific adjustments */
    .search-bar {
        flex-direction: row;
    }
    
    .pagination-controls {
        justify-content: center;
        gap: var(--spacing-lg);
    }
    
    .pagination-controls button {
        min-width: 120px;
        padding: 12px 24px;
        font-size: var(--font-size-tabs, 15px);
    }
    
    #page-info {
        font-size: var(--font-size-tabs, 15px);
        min-width: 120px;
        text-align: center;
    }
}

/* Large Desktop (‚â•1200px) */
@media (min-width: 1200px) {
    .sidebar-nav {
        width: 280px;
    }
    
    #app {
        grid-template-columns: 280px 1fr;
    }
    
    .main-content {
        padding: var(--spacing-xl) 48px;
    }
}

/* ========================
   SHIPPING CALCULATOR STYLES
   ======================== */

.shipping-calculator-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    max-width: 100%;
    padding: 0;
    height: 100%;
}

/* Form nh·∫≠p li·ªáu */
.shipping-form {
    background: var(--surface);
    border-radius: var(--radius-sm);
    padding: 8px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    position: sticky;
    top: var(--spacing-sm);
    z-index: 10;
    margin-bottom: var(--spacing-sm);
    max-width: 100%;
}

.form-header {
    font-size: 13px;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 6px;
    text-align: center;
    padding-bottom: 4px;
    border-bottom: 1px solid var(--border);
}

.form-group {
    margin-bottom: 6px;
}

.form-group label {
    display: block;
    font-weight: 600;
    color: var(--on-surface);
    margin-bottom: 3px;
    font-size: 12px;
}

.form-group select,
.form-group input[type="number"] {
    width: 100%;
    padding: 6px 10px;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 13px;
    font-family: var(--font-family);
    background: var(--surface);
    color: var(--on-surface);
    transition: all var(--transition-fast);
}

.form-group select:focus,
.form-group input[type="number"]:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.1);
}

.form-group select:disabled {
    background: var(--surface-variant);
    cursor: not-allowed;
    opacity: 0.6;
}

.form-actions {
    display: flex;
    gap: 6px;
    margin-top: 8px;
}

.form-actions button {
    flex: 1;
    padding: 8px 12px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 600;
    font-family: var(--font-family);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    background: var(--surface-variant);
    color: var(--on-surface-variant);
}

.btn-secondary:hover {
    background: var(--border);
}

/* K·∫øt qu·∫£ */
.shipping-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    min-height: 150px;
    flex: 1;
    overflow-y: auto;
}

.result-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-lg);
    font-size: var(--font-size-base);
}

.result-header {
    margin-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--border);
    padding-bottom: var(--spacing-sm);
}

.result-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.result-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-sm);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.info-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.info-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
}

/* Quy tr√¨nh t√≠nh to√°n chi ti·∫øt */
.calculation-process {
    background: linear-gradient(135deg, var(--surface-variant) 0%, var(--surface) 100%);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border: 2px solid var(--primary);
    box-shadow: var(--shadow-md);
}

.process-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-md);
    text-align: center;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.process-steps {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.process-step {
    display: flex;
    gap: var(--spacing-sm);
    align-items: flex-start;
    background: var(--surface);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
    transition: all var(--transition-base);
}

.process-step:hover {
    background: var(--surface-variant);
    transform: translateX(4px);
}

.step-number {
    min-width: 32px;
    height: 32px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-base);
    flex-shrink: 0;
}

.step-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.step-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.step-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
    line-height: 1.5;
}

.step-value strong {
    color: var(--primary);
    font-weight: 700;
}

/* Cards d·ªãch v·ª• */
.services-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.service-card {
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    border: 2px solid var(--border);
    transition: all var(--transition-base);
    animation: fadeInUp 0.4s ease-out both;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.service-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary);
}

.service-card.service-disabled {
    opacity: 0.6;
    background: var(--surface);
    border-color: var(--border);
    cursor: not-allowed;
}

.service-card.service-disabled:hover {
    transform: none;
    box-shadow: none;
    border-color: var(--border);
}

.service-card.service-clickable {
    cursor: pointer;
    position: relative;
}

.service-card.service-clickable:hover {
    border-color: var(--primary);
}

.service-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-sm);
}

.toggle-icon {
    font-size: var(--font-size-small);
    color: var(--primary);
    transition: transform var(--transition-base);
    user-select: none;
}

.service-card.process-expanded .toggle-icon {
    transform: rotate(180deg);
}

.process-toggle-hint {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    text-align: center;
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    border: 1px dashed var(--border);
}

.hint-icon {
    font-size: var(--font-size-base);
}

.hint-text {
    font-weight: 500;
}

.calculation-process-detail {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        max-height: 2000px;
        transform: translateY(0);
    }
}

.service-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.service-icon {
    font-size: 24px;
}

.service-name {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--on-surface);
}

.service-body {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Ph√¢n t√≠ch gi√° */
.price-breakdown {
    background: var(--surface);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
}

.breakdown-title {
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-small);
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    font-size: var(--font-size-small);
}

.breakdown-label {
    color: var(--on-surface-variant);
}

.breakdown-value {
    font-weight: 600;
    color: var(--on-surface);
}

.breakdown-item.surcharge .breakdown-value {
    color: var(--warning);
}

.breakdown-item.total {
    margin-top: var(--spacing-xs);
    padding-top: var(--spacing-sm);
    font-size: var(--font-size-base);
    font-weight: 700;
}

.breakdown-item.total .breakdown-label {
    color: var(--on-surface);
}

.breakdown-item.total .breakdown-value {
    color: var(--primary);
    font-size: 18px;
}

.breakdown-separator {
    height: 1px;
    background: var(--border);
    margin: var(--spacing-xs) 0;
}

/* Disabled notice */
.service-disabled-notice {
    text-align: center;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border: 2px dashed var(--border);
}

.disabled-icon {
    font-size: 36px;
    margin-bottom: var(--spacing-xs);
}

.disabled-text {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--on-surface-variant);
    margin-bottom: var(--spacing-xs);
}

.disabled-reason {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-style: italic;
}

/* Th·ªùi gian giao h√†ng */
.service-time {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--secondary);
}

.time-icon {
    font-size: 18px;
}

.time-text {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 600;
}

/* B·∫£ng so s√°nh */
.comparison-section {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
}

.comparison-title {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.comparison-table {
    overflow-x: auto;
}

.comparison-table table {
    width: 100%;
    border-collapse: collapse;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.comparison-table thead {
    background: var(--primary);
    color: white;
}

.comparison-table th,
.comparison-table td {
    padding: 8px 12px;
    text-align: left;
    font-size: var(--font-size-small);
}

.comparison-table th {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.comparison-table tbody tr {
    border-bottom: 1px solid var(--border);
    transition: background var(--transition-fast);
}

.comparison-table tbody tr:last-child {
    border-bottom: none;
}

.comparison-table tbody tr:hover {
    background: var(--surface);
}

.comparison-table .table-icon {
    margin-right: 8px;
}

.comparison-table .price-cell {
    font-weight: 700;
    color: var(--primary);
    font-size: var(--font-size-base);
}

.comparison-table .row-disabled {
    opacity: 0.5;
    font-style: italic;
}

.comparison-table .row-disabled .price-cell {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Responsive cho mobile */
@media (max-width: 768px) {
    .shipping-calculator-container {
        gap: var(--spacing-sm);
        padding: 0;
    }
    
    .shipping-form,
    .shipping-result {
        padding: var(--spacing-sm);
        border-radius: var(--radius-sm);
    }
    
    .form-header,
    .result-title,
    .comparison-title {
        font-size: var(--font-size-base);
    }
    
    .form-actions {
        flex-direction: column;
        gap: var(--spacing-xs);
    }
    
    .form-actions button {
        width: 100%;
        padding: 12px 20px;
    }
    
    .services-container {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .service-card {
        padding: var(--spacing-xs);
    }
    
    .result-info {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .comparison-table table {
        font-size: 11px;
    }
    
    .comparison-table th,
    .comparison-table td {
        padding: 6px 8px;
    }
}

```

C·∫≠p nh·∫≠t ph·∫ßn responsive cho mobile ƒë·ªÉ form nh·ªè h∆°n:


```css
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap');

/* ========================
   VARIABLES & RESET
   ======================== */
:root {
    /* Colors - Light Theme (Default) */
    --primary: #1a73e8;
    --primary-dark: #1557b0;
    --secondary: #34a853;
    --danger: #ea4335;
    --warning: #fbbc04;
    --background: #f8f9fa;
    --surface: #ffffff;
    --surface-variant: #f1f3f4;
    --on-surface: #202124;
    --on-surface-variant: #5f6368;
    --border: #dadce0;
    --shadow-sm: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
    --shadow-md: 0 1px 3px 0 rgba(60,64,67,0.3), 0 4px 8px 3px rgba(60,64,67,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(60,64,67,0.3), 0 8px 12px 6px rgba(60,64,67,0.15);
    
    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-full: 9999px;
    
    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Typography */
    --font-family: 'Be Vietnam Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-size-base: 16px;
    --font-size-small: 14px;
    --font-size-large: 18px;
}

/* Dark Theme */
[data-theme="dark"] {
    --primary: #8ab4f8;
    --primary-dark: #669df6;
    --secondary: #34a853;
    --danger: #f28b82;
    --warning: #fdd663;
    --background: #121212;
    --surface: #1e1e1e;
    --surface-variant: #2d2d2d;
    --on-surface: #e8eaed;
    --on-surface-variant: #9aa0a6;
    --border: #3c4043;
    --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
    --shadow-md: 0 1px 3px 0 rgba(0,0,0,0.3), 0 4px 8px 3px rgba(0,0,0,0.15);
    --shadow-lg: 0 2px 6px 2px rgba(0,0,0,0.3), 0 8px 12px 6px rgba(0,0,0,0.15);
}

/* Size Variants */
[data-size="tiny"] {
    --font-size-base: 12px;
    --font-size-small: 10px;
    --font-size-large: 14px;
    --font-size-nav: 11px;
    --spacing-xs: 2px;
    --spacing-sm: 4px;
    --spacing-md: 8px;
    --spacing-lg: 12px;
    --spacing-xl: 16px;
}

[data-size="small"] {
    --font-size-base: 14px;
    --font-size-small: 12px;
    --font-size-large: 16px;
    --font-size-nav: 13px;
    --spacing-xs: 3px;
    --spacing-sm: 6px;
    --spacing-md: 12px;
    --spacing-lg: 18px;
    --spacing-xl: 24px;
}

[data-size="large"] {
    --font-size-base: 18px;
    --font-size-small: 16px;
    --font-size-large: 20px;
    --font-size-nav: 17px;
    --spacing-xs: 5px;
    --spacing-sm: 10px;
    --spacing-md: 20px;
    --spacing-lg: 28px;
    --spacing-xl: 36px;
}

/* Add default nav font size and tab-specific fonts */
:root {
    --font-size-nav: 15px;
    --font-size-tabs: 16px;
    --font-size-tab-title: 18px;
    --font-size-tab-content: 14px;
    --font-size-tab-small: 13px;
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    color: var(--on-surface);
    background: var(--background);
    transition: all var(--transition-base);
}

body {
    font-family: var(--font-family);
    background: var(--background);
    color: var(--on-surface);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
}

/* Tab-specific font sizes */
#cbm-calculator,
#history {
    font-size: var(--font-size-tabs);
}

/* Tab font sizes for different sizes */
html[data-tab-size="tiny"] {
    --font-size-tabs: 12px !important;
    --font-size-tab-title: 13px !important;
    --font-size-tab-content: 11px !important;
    --font-size-tab-small: 10px !important;
}

html[data-tab-size="small"] {
    --font-size-tabs: 14px !important;
    --font-size-tab-title: 15px !important;
    --font-size-tab-content: 13px !important;
    --font-size-tab-small: 11px !important;
}

html[data-tab-size="medium"] {
    --font-size-tabs: 16px !important;
    --font-size-tab-title: 18px !important;
    --font-size-tab-content: 14px !important;
    --font-size-tab-small: 13px !important;
}

html[data-tab-size="large"] {
    --font-size-tabs: 18px !important;
    --font-size-tab-title: 20px !important;
    --font-size-tab-content: 16px !important;
    --font-size-tab-small: 15px !important;
}

/* ========================
   APP LAYOUT - MOBILE FIRST
   ======================== */
#app {
    display: flex;
    flex-direction: column;
    height: 100vh;
    height: 100dvh;
    width: 100%;
}

/* Header - Hidden on mobile, shown on desktop */
.app-header {
    display: none;
}

/* Sidebar - Hidden on mobile, shown on desktop */
.sidebar-nav {
    display: none;
}

/* Main Content - Full height on mobile */
.main-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: var(--spacing-md);
    padding-top: var(--spacing-md); /* Hamburger is transparent, no space needed */
    scroll-behavior: smooth;
}

/* Hamburger Menu - Mobile only */
.hamburger-menu {
    position: fixed;
    top: 8px;
    left: 8px;
    width: 28px;
    height: 28px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    border: none;
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 3px;
    padding: 0;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
}

/* TƒÉng v√πng click cho hamburger */
.hamburger-menu::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
}

.hamburger-menu:hover {
    background: rgba(0, 0, 0, 0.4);
}

.hamburger-menu span {
    width: 16px;
    height: 2px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 1px;
    transition: all var(--transition-fast);
    box-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.hamburger-menu:active span {
    background: rgba(255, 255, 255, 1);
    transform: scaleX(1.1);
}

.hamburger-menu.hidden {
    opacity: 0;
    pointer-events: none;
}

/* Slide Menu - Mobile only */
.slide-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    height: 100vh;
    background: var(--surface);
    box-shadow: var(--shadow-lg);
    transform: translateX(-100%);
    transition: transform var(--transition-slow);
    z-index: 1100;
    display: flex;
    flex-direction: column;
}

.slide-menu.open {
    transform: translateX(0);
}

.slide-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border);
    background: var(--surface);
    color: var(--on-surface);
}

.menu-title {
    font-size: 20px;
    font-weight: 700;
}

.close-menu {
    width: 36px;
    height: 36px;
    border: 1px solid var(--border);
    background: var(--surface-variant);
    color: var(--on-surface);
    font-size: 28px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.close-menu:active {
    background: rgba(255,255,255,0.3);
}

.slide-menu-nav {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-md);
    gap: var(--spacing-xs);
}

.slide-menu-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: transparent;
    border: none;
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-nav);
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: left;
}

.slide-menu-item .menu-icon {
    font-size: 24px;
}

.slide-menu-item:active {
    transform: scale(0.98);
}

.slide-menu-item.active {
    background: #e8f0fe;
    color: var(--primary);
    font-weight: 600;
}

.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--transition-base);
    z-index: 1050;
}

.menu-overlay.visible {
    opacity: 1;
    pointer-events: all;
}

/* Theme Toggle Button - Medium Size & Adaptive */
.theme-toggle {
    position: fixed;
    top: 8px;
    right: 8px;
    width: 32px;
    height: 32px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.theme-toggle:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
    background: var(--primary);
    border-color: var(--primary);
}

.theme-toggle:active {
    transform: scale(0.95);
}

.theme-icon {
    position: absolute;
    font-size: 14px;
    transition: all var(--transition-base);
    filter: brightness(1);
}

.sun-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: #f59e0b;
}

.moon-icon {
    opacity: 0;
    transform: rotate(-180deg) scale(0.5);
    color: #6366f1;
}

[data-theme="dark"] .sun-icon {
    opacity: 0;
    transform: rotate(180deg) scale(0.5);
}

[data-theme="dark"] .moon-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
}

/* Adaptive colors based on theme */
[data-theme="light"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

[data-theme="dark"] .theme-toggle {
    background: var(--surface);
    border-color: var(--border);
}

/* Bottom Navigation - REMOVED (using hamburger menu instead) */
.bottom-nav {
    display: none;
}

/* ========================
   TAB CONTENT
   ======================== */
.tab-content {
    display: none;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    animation: fadeIn var(--transition-base);
}

.tab-content.active {
    display: flex;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================
   INPUT STYLES
   ======================== */
input[type="number"],
input[type="text"] {
    width: 100%;
    padding: 14px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--on-surface);
    font-size: var(--font-size-base);
    font-weight: 500;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-appearance: none;
    appearance: none;
}

/* Input fields in CBM Calculator and History tabs */
#cbm-calculator input[type="number"],
#cbm-calculator input[type="text"],
#history input[type="text"] {
    font-size: var(--font-size-tabs);
}

input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
}

input::placeholder {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Remove number spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
}

input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
}

/* ========================
   BUTTON STYLES
   ======================== */
button {
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    font-weight: 600;
    font-family: var(--font-family);
    transition: all var(--transition-fast);
    -webkit-tap-highlight-color: transparent;
}

button:active {
    transform: scale(0.97);
}

/* ========================
   CBM CALCULATOR TAB
   ======================== */
#cbm-calculator {
    justify-content: space-between;
}

#cbm-main-content {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.group-item {
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    animation: slideUp var(--transition-base);
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.group-item p {
    margin: 0 0 8px 0;
    line-height: 1.6;
    font-size: var(--font-size-tab-content, 14px);
}

.group-item .value {
    color: var(--primary);
    font-weight: 600;
}

.group-title {
    font-weight: 700;
    color: var(--on-surface);
    font-size: var(--font-size-tabs, 16px);
    margin-bottom: 12px !important;
}

.group-item.current-input {
    border-left-color: var(--primary);
    background: #e8f0fe;
    color: var(--on-surface);
}

[data-theme="dark"] .group-item.current-input {
    background: var(--surface-variant);
    color: var(--on-surface);
}

.group-item hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: var(--spacing-md) 0;
}

.empty-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: var(--font-size-tab-content, 14px);
}

/* CBM Controls */
#cbm-controls {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    flex-shrink: 0;
}

#cbm-actions {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: var(--spacing-sm);
}

#cbm-actions button {
    padding: 12px;
    font-size: var(--font-size-tab-content, 14px);
    color: white;
    box-shadow: var(--shadow-sm);
}

#btn-back1,
#btn-back2 {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
}

#btn-reset {
    background: linear-gradient(135deg, var(--danger), #c5221f);
}

#cbm-actions button:hover {
    box-shadow: var(--shadow-md);
    filter: brightness(1.05);
}

/* ========================
   HISTORY TAB
   ======================== */
.history-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

/* Search Bar */
.search-bar {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

.search-bar input {
    flex: 1;
    min-width: 0;
}

.search-bar button {
    background: var(--primary);
    color: white;
    padding: 0 20px;
    font-size: var(--font-size-tab-content, 14px);
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

/* History List */
#history-list {
    background: var(--surface);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    box-shadow: var(--shadow-sm);
}

.history-header {
    font-size: var(--font-size-tab-title, 18px);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.history-stats {
    font-size: var(--font-size-tab-small, 13px);
    color: var(--on-surface-variant);
    font-weight: 500;
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    background: #e8f0fe;
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
}

.history-item {
    padding: var(--spacing-md);
    margin: var(--spacing-sm) 0;
    word-wrap: break-word;
    line-height: 1.7;
    background: var(--surface-variant);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--secondary);
    font-size: var(--font-size-tab-content, 14px);
    color: var(--on-surface);
    animation: slideUp var(--transition-base);
    box-shadow: var(--shadow-sm);
}

/* Pagination */
.pagination-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-shrink: 0;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
}

.pagination-controls button {
    background: var(--primary);
    color: white;
    padding: 10px 20px;
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    min-width: 90px;
    box-shadow: var(--shadow-sm);
}

.pagination-controls button:disabled {
    background: var(--border);
    color: var(--on-surface-variant);
    cursor: not-allowed;
    opacity: 0.5;
}

#page-info {
    font-size: var(--font-size-tab-content, 14px);
    font-weight: 600;
    color: var(--on-surface);
    white-space: nowrap;
}

/* History Controls */
.history-controls {
    display: flex;
    flex-shrink: 0;
}

#clear-history-button {
    background: var(--danger);
    color: white;
    width: 100%;
    font-size: var(--font-size-tabs, 15px);
    padding: 14px 0;
    font-weight: 600;
    box-shadow: var(--shadow-md);
}

/* ========================
   PROVINCE CHECKER TAB
   ======================== */
.province-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    height: 100%;
    min-height: 0;
}

.province-input-section {
    display: flex;
    gap: var(--spacing-sm);
    flex-shrink: 0;
}

#province-input {
    flex: 1;
    min-width: 0;
}

#btn-clear-province {
    background: var(--danger);
    color: white;
    padding: 0 20px;
    font-size: 14px;
    white-space: nowrap;
    box-shadow: var(--shadow-sm);
}

.province-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    flex: 1;
    overflow-y: auto;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.province-header {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
    text-align: center;
}

.province-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-xl);
    font-size: 14px;
    line-height: 1.6;
}

.province-item {
    padding: var(--spacing-md);
    margin: var(--spacing-xs) 0;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--border);
    font-size: 14px;
    line-height: 1.6;
    animation: slideUp var(--transition-base);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.province-item .time {
    color: var(--on-surface-variant);
    font-size: 12px;
    font-weight: 500;
}

.province-item .name {
    font-weight: 600;
    color: var(--on-surface);
}

.province-item .arrow {
    color: var(--on-surface-variant);
}

.province-item .result {
    font-weight: 700;
    font-size: 16px;
}

.province-item.hang-bay {
    border-left-color: var(--danger);
}

.province-item.hang-bay .result {
    color: var(--danger);
}

.province-item.hang-bo {
    border-left-color: var(--secondary);
}

.province-item.hang-bo .result {
    color: var(--secondary);
}

/* ========================
   SCROLLBAR
   ======================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--on-surface-variant);
}

/* ========================
   DESKTOP STYLES (‚â•768px)
   ======================== */
@media (min-width: 768px) {
    /* Show desktop elements */
    .app-header {
        display: block;
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: white;
        padding: var(--spacing-lg) var(--spacing-xl);
        box-shadow: var(--shadow-md);
        z-index: 10;
    }
    
    .header-content {
        max-width: 1400px;
        margin: 0 auto;
    }
    
    .app-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: var(--spacing-xs);
    }
    
    .app-subtitle {
        font-size: 14px;
        opacity: 0.9;
        font-weight: 500;
    }
    
    .sidebar-nav {
        display: flex;
        flex-direction: column;
        position: fixed;
        left: 0;
        top: 0;
        width: 260px;
        height: 100vh;
        background: var(--surface);
        border-right: 1px solid var(--border);
        padding: var(--spacing-lg);
        gap: var(--spacing-sm);
        box-shadow: var(--shadow-sm);
        z-index: 50;
    }
    
    .nav-brand {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        border-bottom: 2px solid var(--border);
    }
    
    .brand-icon {
        font-size: 32px;
    }
    
    .brand-text {
        font-size: 20px;
        font-weight: 700;
        color: var(--on-surface);
    }
    
    .nav-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md);
        background: transparent;
        color: var(--on-surface-variant);
        text-align: left;
        border-radius: var(--radius-md);
        transition: all var(--transition-fast);
        font-size: var(--font-size-nav);
    }
    
    .nav-icon {
        font-size: 24px;
    }
    
    .nav-text {
        font-weight: 500;
    }
    
    .nav-item:hover {
        background: var(--surface-variant);
    }
    
    .nav-item.active {
        background: #e8f0fe;
        color: var(--primary);
        font-weight: 600;
    }
    
    /* Hide bottom nav on desktop */
    .bottom-nav {
        display: none;
    }
    
    /* Hide hamburger menu on desktop */
    .hamburger-menu,
    .slide-menu,
    .menu-overlay {
        display: none;
    }
    
    /* Adjust main content for desktop */
    #app {
        display: grid;
        grid-template-columns: 260px 1fr;
        grid-template-rows: auto 1fr;
    }
    
    .app-header {
        grid-column: 2 / 3;
        grid-row: 1 / 2;
    }
    
    .sidebar-nav {
        grid-column: 1 / 2;
        grid-row: 1 / 3;
        position: static;
        height: auto;
    }
    
    .main-content {
        grid-column: 2 / 3;
        grid-row: 2 / 3;
        padding: var(--spacing-xl);
        padding-bottom: var(--spacing-xl);
        max-width: 1400px;
        margin: 0 auto;
        width: 100%;
    }
    
    /* Desktop specific adjustments */
    .search-bar {
        flex-direction: row;
    }
    
    .pagination-controls {
        justify-content: center;
        gap: var(--spacing-lg);
    }
    
    .pagination-controls button {
        min-width: 120px;
        padding: 12px 24px;
        font-size: var(--font-size-tabs, 15px);
    }
    
    #page-info {
        font-size: var(--font-size-tabs, 15px);
        min-width: 120px;
        text-align: center;
    }
}

/* Large Desktop (‚â•1200px) */
@media (min-width: 1200px) {
    .sidebar-nav {
        width: 280px;
    }
    
    #app {
        grid-template-columns: 280px 1fr;
    }
    
    .main-content {
        padding: var(--spacing-xl) 48px;
    }
}

/* ========================
   SHIPPING CALCULATOR STYLES
   ======================== */

.shipping-calculator-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    max-width: 100%;
    padding: 0;
    height: 100%;
}

/* Form nh·∫≠p li·ªáu */
.shipping-form {
    background: var(--surface);
    border-radius: var(--radius-sm);
    padding: 8px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    position: sticky;
    top: var(--spacing-sm);
    z-index: 10;
    margin-bottom: var(--spacing-sm);
    max-width: 100%;
}

.form-header {
    font-size: 13px;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 6px;
    text-align: center;
    padding-bottom: 4px;
    border-bottom: 1px solid var(--border);
}

.form-group {
    margin-bottom: 6px;
}

.form-group label {
    display: block;
    font-weight: 600;
    color: var(--on-surface);
    margin-bottom: 3px;
    font-size: 12px;
}

.form-group select,
.form-group input[type="number"] {
    width: 100%;
    padding: 6px 10px;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 13px;
    font-family: var(--font-family);
    background: var(--surface);
    color: var(--on-surface);
    transition: all var(--transition-fast);
}

.form-group select:focus,
.form-group input[type="number"]:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.1);
}

.form-group select:disabled {
    background: var(--surface-variant);
    cursor: not-allowed;
    opacity: 0.6;
}

.form-actions {
    display: flex;
    gap: 6px;
    margin-top: 8px;
}

.form-actions button {
    flex: 1;
    padding: 8px 12px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 600;
    font-family: var(--font-family);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    background: var(--surface-variant);
    color: var(--on-surface-variant);
}

.btn-secondary:hover {
    background: var(--border);
}

/* K·∫øt qu·∫£ */
.shipping-result {
    background: var(--surface);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    min-height: 150px;
    flex: 1;
    overflow-y: auto;
}

.result-message {
    text-align: center;
    color: var(--on-surface-variant);
    padding: var(--spacing-lg);
    font-size: var(--font-size-base);
}

.result-header {
    margin-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--border);
    padding-bottom: var(--spacing-sm);
}

.result-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.result-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-sm);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.info-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.info-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
}

/* Quy tr√¨nh t√≠nh to√°n chi ti·∫øt */
.calculation-process {
    background: linear-gradient(135deg, var(--surface-variant) 0%, var(--surface) 100%);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border: 2px solid var(--primary);
    box-shadow: var(--shadow-md);
}

.process-title {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-md);
    text-align: center;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.process-steps {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.process-step {
    display: flex;
    gap: var(--spacing-sm);
    align-items: flex-start;
    background: var(--surface);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--primary);
    transition: all var(--transition-base);
}

.process-step:hover {
    background: var(--surface-variant);
    transform: translateX(4px);
}

.step-number {
    min-width: 32px;
    height: 32px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-base);
    flex-shrink: 0;
}

.step-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.step-label {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 500;
}

.step-value {
    font-size: var(--font-size-base);
    color: var(--on-surface);
    font-weight: 600;
    line-height: 1.5;
}

.step-value strong {
    color: var(--primary);
    font-weight: 700;
}

/* Cards d·ªãch v·ª• */
.services-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.service-card {
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    border: 2px solid var(--border);
    transition: all var(--transition-base);
    animation: fadeInUp 0.4s ease-out both;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.service-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary);
}

.service-card.service-disabled {
    opacity: 0.6;
    background: var(--surface);
    border-color: var(--border);
    cursor: not-allowed;
}

.service-card.service-disabled:hover {
    transform: none;
    box-shadow: none;
    border-color: var(--border);
}

.service-card.service-clickable {
    cursor: pointer;
    position: relative;
}

.service-card.service-clickable:hover {
    border-color: var(--primary);
}

.service-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-sm);
}

.toggle-icon {
    font-size: var(--font-size-small);
    color: var(--primary);
    transition: transform var(--transition-base);
    user-select: none;
}

.service-card.process-expanded .toggle-icon {
    transform: rotate(180deg);
}

.process-toggle-hint {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    text-align: center;
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    border: 1px dashed var(--border);
}

.hint-icon {
    font-size: var(--font-size-base);
}

.hint-text {
    font-weight: 500;
}

.calculation-process-detail {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        max-height: 2000px;
        transform: translateY(0);
    }
}

.service-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border);
}

.service-icon {
    font-size: 24px;
}

.service-name {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--on-surface);
}

.service-body {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Ph√¢n t√≠ch gi√° */
.price-breakdown {
    background: var(--surface);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
}

.breakdown-title {
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-small);
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    font-size: var(--font-size-small);
}

.breakdown-label {
    color: var(--on-surface-variant);
}

.breakdown-value {
    font-weight: 600;
    color: var(--on-surface);
}

.breakdown-item.surcharge .breakdown-value {
    color: var(--warning);
}

.breakdown-item.total {
    margin-top: var(--spacing-xs);
    padding-top: var(--spacing-sm);
    font-size: var(--font-size-base);
    font-weight: 700;
}

.breakdown-item.total .breakdown-label {
    color: var(--on-surface);
}

.breakdown-item.total .breakdown-value {
    color: var(--primary);
    font-size: 18px;
}

.breakdown-separator {
    height: 1px;
    background: var(--border);
    margin: var(--spacing-xs) 0;
}

/* Disabled notice */
.service-disabled-notice {
    text-align: center;
    padding: var(--spacing-md);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border: 2px dashed var(--border);
}

.disabled-icon {
    font-size: 36px;
    margin-bottom: var(--spacing-xs);
}

.disabled-text {
    font-size: var(--font-size-large);
    font-weight: 700;
    color: var(--on-surface-variant);
    margin-bottom: var(--spacing-xs);
}

.disabled-reason {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-style: italic;
}

/* Th·ªùi gian giao h√†ng */
.service-time {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--surface);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--secondary);
}

.time-icon {
    font-size: 18px;
}

.time-text {
    font-size: var(--font-size-small);
    color: var(--on-surface-variant);
    font-weight: 600;
}

/* B·∫£ng so s√°nh */
.comparison-section {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 2px solid var(--border);
}

.comparison-title {
    font-size: var(--font-size-base);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}

.comparison-table {
    overflow-x: auto;
}

.comparison-table table {
    width: 100%;
    border-collapse: collapse;
    background: var(--surface-variant);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.comparison-table thead {
    background: var(--primary);
    color: white;
}

.comparison-table th,
.comparison-table td {
    padding: 8px 12px;
    text-align: left;
    font-size: var(--font-size-small);
}

.comparison-table th {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.comparison-table tbody tr {
    border-bottom: 1px solid var(--border);
    transition: background var(--transition-fast);
}

.comparison-table tbody tr:last-child {
    border-bottom: none;
}

.comparison-table tbody tr:hover {
    background: var(--surface);
}

.comparison-table .table-icon {
    margin-right: 8px;
}

.comparison-table .price-cell {
    font-weight: 700;
    color: var(--primary);
    font-size: var(--font-size-base);
}

.comparison-table .row-disabled {
    opacity: 0.5;
    font-style: italic;
}

.comparison-table .row-disabled .price-cell {
    color: var(--on-surface-variant);
    font-weight: 400;
}

/* Responsive cho mobile */
@media (max-width: 768px) {
    .shipping-calculator-container {
        gap: var(--spacing-sm);
        padding: 0;
    }
    
    .shipping-form {
        padding: 6px;
        border-radius: var(--radius-sm);
        top: 4px;
    }
    
    .shipping-result {
        padding: var(--spacing-sm);
        border-radius: var(--radius-sm);
    }
    
    .form-header {
        font-size: 12px;
        margin-bottom: 5px;
        padding-bottom: 3px;
    }
    
    .form-group {
        margin-bottom: 5px;
    }
    
    .form-group label {
        font-size: 11px;
        margin-bottom: 2px;
    }
    
    .form-group select,
    .form-group input[type="number"] {
        padding: 6px 8px;
        font-size: 12px;
    }
    
    .form-actions {
        flex-direction: column;
        gap: 5px;
        margin-top: 6px;
    }
    
    .form-actions button {
        width: 100%;
        padding: 8px 12px;
        font-size: 12px;
    }
    
    .result-title,
    .comparison-title {
        font-size: var(--font-size-base);
    }
    
    .services-container {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .service-card {
        padding: var(--spacing-xs);
    }
    
    .result-info {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
    }
    
    .comparison-table table {
        font-size: 11px;
    }
    
    .comparison-table th,
    .comparison-table td {
        padding: 6px 8px;
    }
}

```

ƒêang ki·ªÉm tra l·ªói:


ƒê√£ thu g·ªçn form tr√™n PC v√† mobile. C√°c thay ƒë·ªïi:

## Thay ƒë·ªïi cho PC:

1. **Padding form**: `8px` (thay v√¨ `var(--spacing-sm)`)
2. **Font-size header**: `13px` (thay v√¨ `var(--font-size-base)`)
3. **Margin form-group**: `6px` (thay v√¨ `var(--spacing-xs)`)
4. **Padding input/select**: `6px 10px` (thay v√¨ `8px 12px`)
5. **Font-size input**: `13px` (thay v√¨ `var(--font-size-small)`)
6. **Padding button**: `8px 12px` (thay v√¨ `10px 16px`)
7. **Font-size button**: `12px` (thay v√¨ `var(--font-size-small)`)
8. **Border**: `1px` (thay v√¨ `2px`)

## Thay ƒë·ªïi cho Mobile:

1. **Padding form**: `6px`
2. **Font-size header**: `12px`
3. **Font-size label**: `11px`
4. **Padding input**: `6px 8px`
5. **Font-size input**: `12px`
6. **Padding button**: `8px 12px`
7. **Top position**: `4px` (g·∫ßn top h∆°n)

Form ƒë√£ nh·ªè g·ªçn h∆°n tr√™n c·∫£ PC v√† mobile, v·∫´n sticky ·ªü tr√™n khi scroll v√† d·ªÖ s·ª≠ d·ª•ng.

---

**User**

L∆∞u √Ω c√°i n√†y , Ph√≠ ph√∫ xƒÉng d·∫ßu & VAT l√† nh√¢n cho 1.32 b·∫•t k·ªÅ di d·ªãch v·ª• n√†o tuy·∫øn n√†o ƒë·ªÅu ph·∫£i nh√¢n cho 1.32 tr∆∞·ªõc , sau ƒë√≥ m·ªõi xuy x√©t t·ªõi n·ªôi tuy·∫øn ho·∫∑c ngo·∫°i tuy·∫øn n·∫øu ngo·∫°i tuy·∫øn ƒë∆°n n√†o d∆∞·ªõi 100kg t·ª©c t·ªïng s·ªë kg g·ªëc c·ªßa n√≥ ch·ª© ko l·∫•y tr·ª´ 2 ho·∫∑c tr·ª´ 10 , ph·∫£i l·∫•y 100kg t·ªïng c·ªßa n√≥ , n·∫øu d∆∞·ªõi 100kg  t·ª©c 100kg tr·ªü xu·ªëng th√¨ nh√¢n cho 1.3 t·ª©c 30% , c√≤n n·∫øu t·ª´ 101-200kg th√¨ nh√¢n cho 1.2 t·ª©c 20% , c√≤n n·∫øu t·ª´ 201kg tr·ªü l√™n nh√¢n cho 1.1 t·ª©c 10% , , 





l∆∞u √Ω c√°i b·∫£ng ph√¢n v√πng c·ªßa ph√¢n v√πng c·ªßa ti·∫øt ki·ªám v√† b·ªô , n·∫øu tr√™n 10-50 t·ª©c 11 t·ªõi 50kg , 50-100 t·ª©c 51-100kg c·ª© nh∆∞ v·∫≠y t√≠nh l√™n

---

**Cursor**

ƒêang c·∫≠p nh·∫≠t logic t√≠nh to√°n theo y√™u c·∫ßu:
1. Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT: nh√¢n 1.32 tr∆∞·ªõc cho t·∫•t c·∫£ d·ªãch v·ª•
2. Ph·ª• ph√≠ ngo·∫°i tuy·∫øn: d·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´)
3. B·∫£ng ph√¢n v√πng: ƒëi·ªÅu ch·ªânh khung gi√°


ƒêang s·ª≠a logic x√°c ƒë·ªãnh khung gi√° v√† ph·ª• ph√≠ ngo·∫°i tuy·∫øn:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // L∆∞u √Ω: "Tr√™n 10-50kg" = 11-50kg, "Tr√™n 50-100kg" = 51-100kg
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (11-50kg)
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg (11-50kg)';
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (51-100kg)
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg (51-100kg)';
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (101-300kg)
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg (101-300kg)';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (301-500kg)
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg (301-500kg)';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (501-1000kg)
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg (501-1000kg)';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (1001-2000kg)
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg (1001-2000kg)';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg (2001kg+)';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn (gi·ªØ nguy√™n cho EXPRESS v√† HOATOC)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, kg, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        if (kg < 100) return Math.round(giaCoBan * 0.3); // +30%
        if (kg < 200) return Math.round(giaCoBan * 0.2); // +20%
        return Math.round(giaCoBan * 0.1); // +10%
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

S·ª≠a h√†m t√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // L∆∞u √Ω: "Tr√™n 10-50kg" = 11-50kg, "Tr√™n 50-100kg" = 51-100kg
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (11-50kg)
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg (11-50kg)';
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (51-100kg)
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg (51-100kg)';
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (101-300kg)
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg (101-300kg)';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (301-500kg)
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg (301-500kg)';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (501-1000kg)
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg (501-1000kg)';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (1001-2000kg)
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg (1001-2000kg)';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg (2001kg+)';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn - d·ª±a tr√™n T·ªîNG S·ªê KG G·ªêC (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, tongKgGoc, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        // D·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
        if (tongKgGoc <= 100) {
            return Math.round(giaCoBan * 0.3); // ‚â§100kg: +30% (nh√¢n 1.3)
        } else if (tongKgGoc <= 200) {
            return Math.round(giaCoBan * 0.2); // 101-200kg: +20% (nh√¢n 1.2)
        } else {
            return Math.round(giaCoBan * 0.1); // ‚â•201kg: +10% (nh√¢n 1.1)
        }
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
        const tongTruck = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATTruck * 1.3) : sauNhiLieuVATTruck;
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t logic t√≠nh to√°n cho t·∫•t c·∫£ d·ªãch v·ª•: nh√¢n 1.32 tr∆∞·ªõc, sau ƒë√≥ nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc.


C·∫≠p nh·∫≠t logic t√≠nh to√°n cho t·∫•t c·∫£ d·ªãch v·ª•: nh√¢n 1.32 tr∆∞·ªõc, sau ƒë√≥ nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc.


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // L∆∞u √Ω: "Tr√™n 10-50kg" = 11-50kg, "Tr√™n 50-100kg" = 51-100kg
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (11-50kg)
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg (11-50kg)';
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (51-100kg)
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg (51-100kg)';
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (101-300kg)
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg (101-300kg)';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (301-500kg)
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg (301-500kg)';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (501-1000kg)
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg (501-1000kg)';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (1001-2000kg)
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg (1001-2000kg)';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg (2001kg+)';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn - d·ª±a tr√™n T·ªîNG S·ªê KG G·ªêC (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, tongKgGoc, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        // D·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
        if (tongKgGoc <= 100) {
            return Math.round(giaCoBan * 0.3); // ‚â§100kg: +30% (nh√¢n 1.3)
        } else if (tongKgGoc <= 200) {
            return Math.round(giaCoBan * 0.2); // 101-200kg: +20% (nh√¢n 1.2)
        } else {
            return Math.round(giaCoBan * 0.1); // ‚â•201kg: +10% (nh√¢n 1.1)
        }
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenTruck = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenTruck = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenTruck = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenTruck = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongTruck = Math.round(sauNhiLieuVATTruck * heSoNgoaiTuyenTruck);
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë 1.3 (ngo·∫°i tuy·∫øn) sau (n·∫øu ngo·∫°i tuy·∫øn)
            const tongEco = loaiTuyen === 'ngoai' ? Math.round(sauNhiLieuVATEco * 1.3) : sauNhiLieuVATEco;
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t logic t√≠nh to√°n cho VIN-ECO:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // L∆∞u √Ω: "Tr√™n 10-50kg" = 11-50kg, "Tr√™n 50-100kg" = 51-100kg
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (11-50kg)
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg (11-50kg)';
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (51-100kg)
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg (51-100kg)';
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (101-300kg)
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg (101-300kg)';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (301-500kg)
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg (301-500kg)';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (501-1000kg)
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg (501-1000kg)';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (1001-2000kg)
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg (1001-2000kg)';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg (2001kg+)';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn - d·ª±a tr√™n T·ªîNG S·ªê KG G·ªêC (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, tongKgGoc, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        // D·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
        if (tongKgGoc <= 100) {
            return Math.round(giaCoBan * 0.3); // ‚â§100kg: +30% (nh√¢n 1.3)
        } else if (tongKgGoc <= 200) {
            return Math.round(giaCoBan * 0.2); // 101-200kg: +20% (nh√¢n 1.2)
        } else {
            return Math.round(giaCoBan * 0.1); // ‚â•201kg: +10% (nh√¢n 1.1)
        }
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenTruck = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenTruck = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenTruck = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenTruck = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongTruck = Math.round(sauNhiLieuVATTruck * heSoNgoaiTuyenTruck);
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
            let heSoNgoaiTuyenEco = 1;
            if (loaiTuyen === 'ngoai') {
                if (kgInput <= 100) {
                    heSoNgoaiTuyenEco = 1.3; // ‚â§100kg: +30%
                } else if (kgInput <= 200) {
                    heSoNgoaiTuyenEco = 1.2; // 101-200kg: +20%
                } else {
                    heSoNgoaiTuyenEco = 1.1; // ‚â•201kg: +10%
                }
            }
            const tongEco = Math.round(sauNhiLieuVATEco * heSoNgoaiTuyenEco);
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaExpress = chiTietExpress.giaCoBan;
        const phuPhiExpress = tinhPhuPhiNgoaiTuyen(giaExpress, kgInput, loaiTuyen);
        const truocThueVATExpress = giaExpress + phuPhiExpress;
        const phuPhiXangVATExpress = Math.round(truocThueVATExpress * 0.2);
        const tongExpress = truocThueVATExpress + phuPhiXangVATExpress;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            truocThueVAT: truocThueVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t logic t√≠nh to√°n cho VIN-EXPRESS v√† VIN-HOATOC:


C·∫≠p nh·∫≠t logic t√≠nh to√°n cho VIN-EXPRESS v√† VIN-HOATOC:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // L∆∞u √Ω: "Tr√™n 10-50kg" = 11-50kg, "Tr√™n 50-100kg" = 51-100kg
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (11-50kg)
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg (11-50kg)';
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (51-100kg)
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg (51-100kg)';
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (101-300kg)
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg (101-300kg)';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (301-500kg)
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg (301-500kg)';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (501-1000kg)
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg (501-1000kg)';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (1001-2000kg)
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg (1001-2000kg)';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg (2001kg+)';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn - d·ª±a tr√™n T·ªîNG S·ªê KG G·ªêC (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, tongKgGoc, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        // D·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
        if (tongKgGoc <= 100) {
            return Math.round(giaCoBan * 0.3); // ‚â§100kg: +30% (nh√¢n 1.3)
        } else if (tongKgGoc <= 200) {
            return Math.round(giaCoBan * 0.2); // 101-200kg: +20% (nh√¢n 1.2)
        } else {
            return Math.round(giaCoBan * 0.1); // ‚â•201kg: +10% (nh√¢n 1.1)
        }
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenTruck = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenTruck = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenTruck = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenTruck = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongTruck = Math.round(sauNhiLieuVATTruck * heSoNgoaiTuyenTruck);
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
            let heSoNgoaiTuyenEco = 1;
            if (loaiTuyen === 'ngoai') {
                if (kgInput <= 100) {
                    heSoNgoaiTuyenEco = 1.3; // ‚â§100kg: +30%
                } else if (kgInput <= 200) {
                    heSoNgoaiTuyenEco = 1.2; // 101-200kg: +20%
                } else {
                    heSoNgoaiTuyenEco = 1.1; // ‚â•201kg: +10%
                }
            }
            const tongEco = Math.round(sauNhiLieuVATEco * heSoNgoaiTuyenEco);
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaGocExpress = chiTietExpress.giaCoBan;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATExpress = Math.round(giaGocExpress * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenExpress = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenExpress = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenExpress = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenExpress = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongExpress = Math.round(sauNhiLieuVATExpress * heSoNgoaiTuyenExpress);
        const phuPhiXangVATExpress = sauNhiLieuVATExpress - giaGocExpress;
        const phuPhiNgoaiTuyenExpress = loaiTuyen === 'ngoai' ? tongExpress - sauNhiLieuVATExpress : 0;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            giaCoBan: giaGocExpress,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenExpress,
            sauNhiLieuVAT: sauNhiLieuVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaHoaToc = chiTietHoaToc.giaCoBan;
        const phuPhiHoaToc = tinhPhuPhiNgoaiTuyen(giaHoaToc, kgInput, loaiTuyen);
        const truocThueVATHoaToc = giaHoaToc + phuPhiHoaToc;
        const phuPhiXangVATHoaToc = Math.round(truocThueVATHoaToc * 0.2);
        const tongHoaToc = truocThueVATHoaToc + phuPhiXangVATHoaToc;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            truocThueVAT: truocThueVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t logic t√≠nh to√°n cho VIN-HOATOC:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // L∆∞u √Ω: "Tr√™n 10-50kg" = 11-50kg, "Tr√™n 50-100kg" = 51-100kg
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (11-50kg)
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg (11-50kg)';
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (51-100kg)
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg (51-100kg)';
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (101-300kg)
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg (101-300kg)';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (301-500kg)
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg (301-500kg)';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (501-1000kg)
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg (501-1000kg)';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (1001-2000kg)
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg (1001-2000kg)';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg (2001kg+)';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn - d·ª±a tr√™n T·ªîNG S·ªê KG G·ªêC (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, tongKgGoc, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        // D·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
        if (tongKgGoc <= 100) {
            return Math.round(giaCoBan * 0.3); // ‚â§100kg: +30% (nh√¢n 1.3)
        } else if (tongKgGoc <= 200) {
            return Math.round(giaCoBan * 0.2); // 101-200kg: +20% (nh√¢n 1.2)
        } else {
            return Math.round(giaCoBan * 0.1); // ‚â•201kg: +10% (nh√¢n 1.1)
        }
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenTruck = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenTruck = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenTruck = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenTruck = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongTruck = Math.round(sauNhiLieuVATTruck * heSoNgoaiTuyenTruck);
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
            let heSoNgoaiTuyenEco = 1;
            if (loaiTuyen === 'ngoai') {
                if (kgInput <= 100) {
                    heSoNgoaiTuyenEco = 1.3; // ‚â§100kg: +30%
                } else if (kgInput <= 200) {
                    heSoNgoaiTuyenEco = 1.2; // 101-200kg: +20%
                } else {
                    heSoNgoaiTuyenEco = 1.1; // ‚â•201kg: +10%
                }
            }
            const tongEco = Math.round(sauNhiLieuVATEco * heSoNgoaiTuyenEco);
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaGocExpress = chiTietExpress.giaCoBan;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATExpress = Math.round(giaGocExpress * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenExpress = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenExpress = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenExpress = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenExpress = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongExpress = Math.round(sauNhiLieuVATExpress * heSoNgoaiTuyenExpress);
        const phuPhiXangVATExpress = sauNhiLieuVATExpress - giaGocExpress;
        const phuPhiNgoaiTuyenExpress = loaiTuyen === 'ngoai' ? tongExpress - sauNhiLieuVATExpress : 0;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            giaCoBan: giaGocExpress,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenExpress,
            sauNhiLieuVAT: sauNhiLieuVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaGocHoaToc = chiTietHoaToc.giaCoBan;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATHoaToc = Math.round(giaGocHoaToc * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenHoaToc = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenHoaToc = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenHoaToc = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenHoaToc = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongHoaToc = Math.round(sauNhiLieuVATHoaToc * heSoNgoaiTuyenHoaToc);
        const phuPhiXangVATHoaToc = sauNhiLieuVATHoaToc - giaGocHoaToc;
        const phuPhiNgoaiTuyenHoaToc = loaiTuyen === 'ngoai' ? tongHoaToc - sauNhiLieuVATHoaToc : 0;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            giaCoBan: giaGocHoaToc,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenHoaToc,
            sauNhiLieuVAT: sauNhiLieuVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        `}
                        ${ct.phuPhiNgoaiTuyen > 0 ? `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ ngo·∫°i tuy·∫øn:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiNgoaiTuyen)} = <strong>${formatTien(ct.truocThueVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '6' : '5'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '7' : '6'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.truocThueVAT)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '4' : '3'}</div>
                            <div class="step-content">
                                <div class="step-label">Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 20% = <strong>${formatTien(ct.phuPhiXangVAT)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">${ct.buoc2 ? '5' : '4'}</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng c∆∞·ªõc:</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} + ${formatTien(ct.phuPhiXangVAT)} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n cho VIN-EXPRESS v√† VIN-HOATOC:


C·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh cho VIN-EXPRESS v√† VIN-HOATOC:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // L∆∞u √Ω: "Tr√™n 10-50kg" = 11-50kg, "Tr√™n 50-100kg" = 51-100kg
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (11-50kg)
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg (11-50kg)';
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (51-100kg)
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg (51-100kg)';
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (101-300kg)
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg (101-300kg)';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (301-500kg)
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg (301-500kg)';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (501-1000kg)
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg (501-1000kg)';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (1001-2000kg)
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg (1001-2000kg)';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg (2001kg+)';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn - d·ª±a tr√™n T·ªîNG S·ªê KG G·ªêC (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, tongKgGoc, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        // D·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
        if (tongKgGoc <= 100) {
            return Math.round(giaCoBan * 0.3); // ‚â§100kg: +30% (nh√¢n 1.3)
        } else if (tongKgGoc <= 200) {
            return Math.round(giaCoBan * 0.2); // 101-200kg: +20% (nh√¢n 1.2)
        } else {
            return Math.round(giaCoBan * 0.1); // ‚â•201kg: +10% (nh√¢n 1.1)
        }
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenTruck = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenTruck = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenTruck = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenTruck = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongTruck = Math.round(sauNhiLieuVATTruck * heSoNgoaiTuyenTruck);
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
            let heSoNgoaiTuyenEco = 1;
            if (loaiTuyen === 'ngoai') {
                if (kgInput <= 100) {
                    heSoNgoaiTuyenEco = 1.3; // ‚â§100kg: +30%
                } else if (kgInput <= 200) {
                    heSoNgoaiTuyenEco = 1.2; // 101-200kg: +20%
                } else {
                    heSoNgoaiTuyenEco = 1.1; // ‚â•201kg: +10%
                }
            }
            const tongEco = Math.round(sauNhiLieuVATEco * heSoNgoaiTuyenEco);
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaGocExpress = chiTietExpress.giaCoBan;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATExpress = Math.round(giaGocExpress * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenExpress = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenExpress = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenExpress = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenExpress = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongExpress = Math.round(sauNhiLieuVATExpress * heSoNgoaiTuyenExpress);
        const phuPhiXangVATExpress = sauNhiLieuVATExpress - giaGocExpress;
        const phuPhiNgoaiTuyenExpress = loaiTuyen === 'ngoai' ? tongExpress - sauNhiLieuVATExpress : 0;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            giaCoBan: giaGocExpress,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenExpress,
            sauNhiLieuVAT: sauNhiLieuVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaGocHoaToc = chiTietHoaToc.giaCoBan;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATHoaToc = Math.round(giaGocHoaToc * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenHoaToc = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenHoaToc = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenHoaToc = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenHoaToc = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongHoaToc = Math.round(sauNhiLieuVATHoaToc * heSoNgoaiTuyenHoaToc);
        const phuPhiXangVATHoaToc = sauNhiLieuVATHoaToc - giaGocHoaToc;
        const phuPhiNgoaiTuyenHoaToc = loaiTuyen === 'ngoai' ? tongHoaToc - sauNhiLieuVATHoaToc : 0;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            giaCoBan: giaGocHoaToc,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenHoaToc,
            sauNhiLieuVAT: sauNhiLieuVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                // X√°c ƒë·ªãnh h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc
                let heSoNgoaiTuyen = 1;
                let heSoNgoaiTuyenText = '';
                if (ketQua.tuyen === 'Ngo·∫°i tuy·∫øn') {
                    if (ketQua.trongLuong <= 100) {
                        heSoNgoaiTuyen = 1.3;
                        heSoNgoaiTuyenText = '1.3 (‚â§100kg: +30%)';
                    } else if (ketQua.trongLuong <= 200) {
                        heSoNgoaiTuyen = 1.2;
                        heSoNgoaiTuyenText = '1.2 (101-200kg: +20%)';
                    } else {
                        heSoNgoaiTuyen = 1.1;
                        heSoNgoaiTuyenText = '1.1 (‚â•201kg: +10%)';
                    }
                }
                
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó ${heSoNgoaiTuyenText}):</div>
                                <div class="step-value">T·ªïng kg g·ªëc: <strong>${ketQua.trongLuong} kg</strong> ‚Üí ${formatTien(ct.sauNhiLieuVAT)} √ó ${heSoNgoaiTuyen} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó ${heSoNgoaiTuyenText}):</div>
                                <div class="step-value">T·ªïng kg g·ªëc: <strong>${ketQua.trongLuong} kg</strong> ‚Üí ${formatTien(ct.sauNhiLieuVAT)} √ó ${heSoNgoaiTuyen} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh cho VIN-TRUCK v√† VIN-ECO ƒë·ªÉ hi·ªÉn th·ªã ƒë√∫ng h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc:


C·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh cho VIN-TRUCK v√† VIN-ECO ƒë·ªÉ hi·ªÉn th·ªã ƒë√∫ng h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // L∆∞u √Ω: "Tr√™n 10-50kg" = 11-50kg, "Tr√™n 50-100kg" = 51-100kg
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (11-50kg)
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg (11-50kg)';
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (51-100kg)
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg (51-100kg)';
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (101-300kg)
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg (101-300kg)';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (301-500kg)
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg (301-500kg)';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (501-1000kg)
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg (501-1000kg)';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (1001-2000kg)
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg (1001-2000kg)';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg (2001kg+)';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn - d·ª±a tr√™n T·ªîNG S·ªê KG G·ªêC (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, tongKgGoc, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        // D·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
        if (tongKgGoc <= 100) {
            return Math.round(giaCoBan * 0.3); // ‚â§100kg: +30% (nh√¢n 1.3)
        } else if (tongKgGoc <= 200) {
            return Math.round(giaCoBan * 0.2); // 101-200kg: +20% (nh√¢n 1.2)
        } else {
            return Math.round(giaCoBan * 0.1); // ‚â•201kg: +10% (nh√¢n 1.1)
        }
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenTruck = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenTruck = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenTruck = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenTruck = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongTruck = Math.round(sauNhiLieuVATTruck * heSoNgoaiTuyenTruck);
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
            let heSoNgoaiTuyenEco = 1;
            if (loaiTuyen === 'ngoai') {
                if (kgInput <= 100) {
                    heSoNgoaiTuyenEco = 1.3; // ‚â§100kg: +30%
                } else if (kgInput <= 200) {
                    heSoNgoaiTuyenEco = 1.2; // 101-200kg: +20%
                } else {
                    heSoNgoaiTuyenEco = 1.1; // ‚â•201kg: +10%
                }
            }
            const tongEco = Math.round(sauNhiLieuVATEco * heSoNgoaiTuyenEco);
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaGocExpress = chiTietExpress.giaCoBan;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATExpress = Math.round(giaGocExpress * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenExpress = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenExpress = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenExpress = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenExpress = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongExpress = Math.round(sauNhiLieuVATExpress * heSoNgoaiTuyenExpress);
        const phuPhiXangVATExpress = sauNhiLieuVATExpress - giaGocExpress;
        const phuPhiNgoaiTuyenExpress = loaiTuyen === 'ngoai' ? tongExpress - sauNhiLieuVATExpress : 0;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            giaCoBan: giaGocExpress,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenExpress,
            sauNhiLieuVAT: sauNhiLieuVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaGocHoaToc = chiTietHoaToc.giaCoBan;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATHoaToc = Math.round(giaGocHoaToc * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenHoaToc = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenHoaToc = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenHoaToc = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenHoaToc = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongHoaToc = Math.round(sauNhiLieuVATHoaToc * heSoNgoaiTuyenHoaToc);
        const phuPhiXangVATHoaToc = sauNhiLieuVATHoaToc - giaGocHoaToc;
        const phuPhiNgoaiTuyenHoaToc = loaiTuyen === 'ngoai' ? tongHoaToc - sauNhiLieuVATHoaToc : 0;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            giaCoBan: giaGocHoaToc,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenHoaToc,
            sauNhiLieuVAT: sauNhiLieuVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? (() => {
                                // X√°c ƒë·ªãnh h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc
                                let heSoNgoaiTuyen = 1;
                                let heSoNgoaiTuyenText = '';
                                if (ketQua.trongLuong <= 100) {
                                    heSoNgoaiTuyen = 1.3;
                                    heSoNgoaiTuyenText = '1.3 (‚â§100kg: +30%)';
                                } else if (ketQua.trongLuong <= 200) {
                                    heSoNgoaiTuyen = 1.2;
                                    heSoNgoaiTuyenText = '1.2 (101-200kg: +20%)';
                                } else {
                                    heSoNgoaiTuyen = 1.1;
                                    heSoNgoaiTuyenText = '1.1 (‚â•201kg: +10%)';
                                }
                                return `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó ${heSoNgoaiTuyenText}):</div>
                                    <div class="step-value">T·ªïng kg g·ªëc: <strong>${ketQua.trongLuong} kg</strong> ‚Üí ${formatTien(ct.sauNhiLieuVAT)} √ó ${heSoNgoaiTuyen} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `;
                            })() : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó 1.3):</div>
                                    <div class="step-value">${formatTien(ct.sauNhiLieuVAT)} √ó 1.3 = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            ` : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                // X√°c ƒë·ªãnh h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc
                let heSoNgoaiTuyen = 1;
                let heSoNgoaiTuyenText = '';
                if (ketQua.tuyen === 'Ngo·∫°i tuy·∫øn') {
                    if (ketQua.trongLuong <= 100) {
                        heSoNgoaiTuyen = 1.3;
                        heSoNgoaiTuyenText = '1.3 (‚â§100kg: +30%)';
                    } else if (ketQua.trongLuong <= 200) {
                        heSoNgoaiTuyen = 1.2;
                        heSoNgoaiTuyenText = '1.2 (101-200kg: +20%)';
                    } else {
                        heSoNgoaiTuyen = 1.1;
                        heSoNgoaiTuyenText = '1.1 (‚â•201kg: +10%)';
                    }
                }
                
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó ${heSoNgoaiTuyenText}):</div>
                                <div class="step-value">T·ªïng kg g·ªëc: <strong>${ketQua.trongLuong} kg</strong> ‚Üí ${formatTien(ct.sauNhiLieuVAT)} √ó ${heSoNgoaiTuyen} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó ${heSoNgoaiTuyenText}):</div>
                                <div class="step-value">T·ªïng kg g·ªëc: <strong>${ketQua.trongLuong} kg</strong> ‚Üí ${formatTien(ct.sauNhiLieuVAT)} √ó ${heSoNgoaiTuyen} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

C·∫≠p nh·∫≠t ph·∫ßn hi·ªÉn th·ªã quy tr√¨nh khi tr·ªçng l∆∞·ª£ng ‚â§ 10kg:


```javascript
document.addEventListener('DOMContentLoaded', () => {
    // --- UTILS ---
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);
    const df = (num) => {
        if (Math.round(num) === num) return num.toString();
        const fixed = num.toFixed(3);
        return parseFloat(fixed).toString();
    };

    // --- STATE ---
    let history = JSON.parse(localStorage.getItem('vinTransCBMHistory')) || [];
    let completedGroups = JSON.parse(localStorage.getItem('vinTransCBMGroups')) || [];
    let cbmCurrentIndex = 1;
    let cbmBuffer = [0, 0, 0, 0];
    let cbmCurrentGroup = completedGroups.length + 1;
    
    // --- HISTORY PAGINATION STATE ---
    let currentPage = 1;
    let itemsPerPage = 25;
    let totalPages = 1;

    // --- SHIPPING CALCULATOR DATA ---
    // B·∫£ng ph√¢n v√πng: 36 t·ªânh th√†nh (d√πng index 0-8 cho array gi√° c∆∞·ªõc)
    const duLieuTinh = {
        "TP.HCM": { vung: 0, vungHienThi: "N·ªôi T·ªânh", ten: "TP. H·ªì Ch√≠ Minh" },
        "B√¨nh D∆∞∆°ng": { vung: 1, vungHienThi: "V√πng 1", ten: "B√¨nh D∆∞∆°ng" },
        "ƒê·ªìng Nai": { vung: 1, vungHienThi: "V√πng 1", ten: "ƒê·ªìng Nai" },
        "Long An": { vung: 1, vungHienThi: "V√πng 1", ten: "Long An" },
        "B√† R·ªãa - V≈©ng T√†u": { vung: 2, vungHienThi: "V√πng 2", ten: "B√† R·ªãa - V≈©ng T√†u" },
        "B√¨nh Ph∆∞·ªõc": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Ph∆∞·ªõc" },
        "T√¢y Ninh": { vung: 2, vungHienThi: "V√πng 2", ten: "T√¢y Ninh" },
        "B√¨nh Thu·∫≠n": { vung: 2, vungHienThi: "V√πng 2", ten: "B√¨nh Thu·∫≠n" },
        "Ti·ªÅn Giang": { vung: 2, vungHienThi: "V√πng 2", ten: "Ti·ªÅn Giang" },
        "B·∫øn Tre": { vung: 2, vungHienThi: "V√πng 2", ten: "B·∫øn Tre" },
        "Vƒ©nh Long": { vung: 2, vungHienThi: "V√πng 2", ten: "Vƒ©nh Long" },
        "C·∫ßn Th∆°": { vung: 2, vungHienThi: "V√πng 2", ten: "C·∫ßn Th∆°" },
        "ƒê·ªìng Th√°p": { vung: 2, vungHienThi: "V√πng 2", ten: "ƒê·ªìng Th√°p" },
        "Tr√† Vinh": { vung: 2, vungHienThi: "V√πng 2", ten: "Tr√† Vinh" },
        "An Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "An Giang" },
        "Ki√™n Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "Ki√™n Giang" },
        "H·∫≠u Giang": { vung: 3, vungHienThi: "V√πng 3", ten: "H·∫≠u Giang" },
        "C√† Mau": { vung: 3, vungHienThi: "V√πng 3", ten: "C√† Mau" },
        "S√≥c TrƒÉng": { vung: 3, vungHienThi: "V√πng 3", ten: "S√≥c TrƒÉng" },
        "B·∫°c Li√™u": { vung: 3, vungHienThi: "V√πng 3", ten: "B·∫°c Li√™u" },
        "Ninh Thu·∫≠n": { vung: 3, vungHienThi: "V√πng 3", ten: "Ninh Thu·∫≠n" },
        "Kh√°nh H√≤a": { vung: 4, vungHienThi: "V√πng 4", ten: "Kh√°nh H√≤a" },
        "B√¨nh ƒê·ªãnh": { vung: 4, vungHienThi: "V√πng 4", ten: "B√¨nh ƒê·ªãnh" },
        "Ph√∫ Y√™n": { vung: 4, vungHienThi: "V√πng 4", ten: "Ph√∫ Y√™n" },
        "L√¢m ƒê·ªìng": { vung: 4, vungHienThi: "V√πng 4", ten: "L√¢m ƒê·ªìng" },
        "ƒê·∫Øk N√¥ng": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk N√¥ng" },
        "ƒê·∫Øk L·∫Øk": { vung: 4, vungHienThi: "V√πng 4", ten: "ƒê·∫Øk L·∫Øk" },
        "Kon Tum": { vung: 5, vungHienThi: "V√πng 5", ten: "Kon Tum" },
        "Gia Lai": { vung: 5, vungHienThi: "V√πng 5", ten: "Gia Lai" },
        "Hu·∫ø": { vung: 5, vungHienThi: "V√πng 5", ten: "Hu·∫ø" },
        "Qu·∫£ng Ng√£i": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Ng√£i" },
        "ƒê√† N·∫µng": { vung: 5, vungHienThi: "V√πng 5", ten: "ƒê√† N·∫µng" },
        "Qu·∫£ng Nam": { vung: 5, vungHienThi: "V√πng 5", ten: "Qu·∫£ng Nam" },
        "Ngh·ªá An": { vung: 6, vungHienThi: "V√πng 6", ten: "Ngh·ªá An" },
        "H√† Tƒ©nh": { vung: 6, vungHienThi: "V√πng 6", ten: "H√† Tƒ©nh" },
        "Qu·∫£ng B√¨nh": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng B√¨nh" },
        "Qu·∫£ng Tr·ªã": { vung: 6, vungHienThi: "V√πng 6", ten: "Qu·∫£ng Tr·ªã" },
        "H√† N·ªôi": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† N·ªôi" },
        "B·∫Øc Ninh": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Ninh" },
        "Vƒ©nh Ph√∫c": { vung: 7, vungHienThi: "V√πng 7", ten: "Vƒ©nh Ph√∫c" },
        "Th√°i B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i B√¨nh" },
        "H∆∞ng Y√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "H∆∞ng Y√™n" },
        "Ninh B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "Ninh B√¨nh" },
        "H·∫£i Ph√≤ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i Ph√≤ng" },
        "H·∫£i D∆∞∆°ng": { vung: 7, vungHienThi: "V√πng 7", ten: "H·∫£i D∆∞∆°ng" },
        "H√≤a B√¨nh": { vung: 7, vungHienThi: "V√πng 7", ten: "H√≤a B√¨nh" },
        "Nam ƒê·ªãnh": { vung: 7, vungHienThi: "V√πng 7", ten: "Nam ƒê·ªãnh" },
        "Th√°i Nguy√™n": { vung: 7, vungHienThi: "V√πng 7", ten: "Th√°i Nguy√™n" },
        "B·∫Øc Giang": { vung: 7, vungHienThi: "V√πng 7", ten: "B·∫Øc Giang" },
        "H√† Nam": { vung: 7, vungHienThi: "V√πng 7", ten: "H√† Nam" },
        "Thanh H√≥a": { vung: 7, vungHienThi: "V√πng 7", ten: "Thanh H√≥a" },
        "Qu·∫£ng Ninh": { vung: 8, vungHienThi: "V√πng 8", ten: "Qu·∫£ng Ninh" },
        "B·∫Øc K·∫°n": { vung: 8, vungHienThi: "V√πng 8", ten: "B·∫Øc K·∫°n" },
        "L·∫°ng S∆°n": { vung: 8, vungHienThi: "V√πng 8", ten: "L·∫°ng S∆°n" },
        "Cao B·∫±ng": { vung: 8, vungHienThi: "V√πng 8", ten: "Cao B·∫±ng" },
        "ƒêi·ªán Bi√™n": { vung: 8, vungHienThi: "V√πng 8", ten: "ƒêi·ªán Bi√™n" },
        "S∆°n La": { vung: 8, vungHienThi: "V√πng 8", ten: "S∆°n La" },
        "Y√™n B√°i": { vung: 8, vungHienThi: "V√πng 8", ten: "Y√™n B√°i" },
        "Lai Ch√¢u": { vung: 8, vungHienThi: "V√πng 8", ten: "Lai Ch√¢u" },
        "Tuy√™n Quang": { vung: 8, vungHienThi: "V√πng 8", ten: "Tuy√™n Quang" },
        "H√† Giang": { vung: 8, vungHienThi: "V√πng 8", ten: "H√† Giang" },
        "L√†o Cai": { vung: 8, vungHienThi: "V√πng 8", ten: "L√†o Cai" },
        "Ph√∫ Th·ªç": { vung: 8, vungHienThi: "V√πng 8", ten: "Ph√∫ Th·ªç" }
    };

    // Danh s√°ch huy·ªán theo t·ªânh (noi = n·ªôi tuy·∫øn, ngoai = ngo·∫°i tuy·∫øn)
    const duLieuHuyen = {
        "TP.HCM": [
            { ten: "Qu·∫≠n 1", loai: "noi" }, { ten: "Qu·∫≠n 2", loai: "noi" }, { ten: "Qu·∫≠n 3", loai: "noi" },
            { ten: "Qu·∫≠n 4", loai: "noi" }, { ten: "Qu·∫≠n 5", loai: "noi" }, { ten: "Qu·∫≠n 6", loai: "noi" },
            { ten: "Qu·∫≠n 7", loai: "noi" }, { ten: "Qu·∫≠n 8", loai: "noi" }, { ten: "Qu·∫≠n 9", loai: "noi" },
            { ten: "Qu·∫≠n 10", loai: "noi" }, { ten: "Qu·∫≠n 11", loai: "noi" }, { ten: "Qu·∫≠n 12", loai: "noi" },
            { ten: "Qu·∫≠n B√¨nh T√¢n", loai: "noi" }, { ten: "Qu·∫≠n B√¨nh Th·∫°nh", loai: "noi" },
            { ten: "Qu·∫≠n G√≤ V·∫•p", loai: "noi" }, { ten: "Qu·∫≠n Ph√∫ Nhu·∫≠n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢n B√¨nh", loai: "noi" }, { ten: "Qu·∫≠n T√¢n Ph√∫", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªß ƒê·ª©c", loai: "noi" }, { ten: "Huy·ªán B√¨nh Ch√°nh", loai: "noi" },
            { ten: "Huy·ªán C·∫ßn Gi·ªù", loai: "ngoai" }, { ten: "Huy·ªán C·ªß Chi", loai: "ngoai" },
            { ten: "Huy·ªán H√≥c M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nh√† B√®", loai: "ngoai" }
        ],
        "B·∫Øc K·∫°n": [
            { ten: "TX B·∫Øc K·∫°n", loai: "noi" },
            { ten: "Huy·ªán Ba B·ªÉ", loai: "ngoai" }, { ten: "Huy·ªán B·∫°ch Th√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ ƒê·ªìn", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Na R√¨", loai: "ngoai" }, { ten: "Huy·ªán Ng√¢n S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán P√°c N·∫∑m", loai: "ngoai" }
        ],
        "B·∫Øc Giang": [
            { ten: "TP B·∫Øc Giang", loai: "noi" },
            { ten: "Huy·ªán Hi·ªáp H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L·∫°ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán L·ª•c Nam", loai: "ngoai" }, { ten: "Huy·ªán L·ª•c Ng·∫°n", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Vi·ªát Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Y√™n D≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th·∫ø", loai: "ngoai" }
        ],
        "Cao B·∫±ng": [
            { ten: "TP Cao B·∫±ng", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° Lang", loai: "ngoai" }, { ten: "Huy·ªán H√† Qu·∫£ng", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a An", loai: "ngoai" }, { ten: "Huy·ªán Nguy√™n B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph·ª•c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch An", loai: "ngoai" }, { ten: "Huy·ªán Th√¥ng N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† Lƒ©nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√πng Kh√°nh", loai: "ngoai" }
        ],
        "H√† Giang": [
            { ten: "TP H√† Giang", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc M√™", loai: "ngoai" }, { ten: "Huy·ªán B·∫Øc Quang", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng VƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†ng Su Ph√¨", loai: "ngoai" },
            { ten: "Huy·ªán M√®o V·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£n B·∫°", loai: "ngoai" },
            { ten: "Huy·ªán Quang B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán V·ªã Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán X√≠n M·∫ßn", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Minh", loai: "ngoai" }
        ],
        "L·∫°ng S∆°n": [
            { ten: "TP L·∫°ng S∆°n", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc S∆°n", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh Gia", loai: "ngoai" },
            { ten: "Huy·ªán Cao L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Chi LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¨nh L·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán H·ªØu L≈©ng", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√†ng ƒê·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn L√£ng", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Quan", loai: "ngoai" }
        ],
        "Th√°i Nguy√™n": [
            { ten: "TP Th√°i Nguy√™n", loai: "noi" }, { ten: "TX S√¥ng C√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫°i T·ª´", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng H·ª∑", loai: "ngoai" }, { ten: "Huy·ªán Ph·ªï Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán V√µ Nhai", loai: "ngoai" }
        ],
        "B·∫Øc Ninh": [
            { ten: "TP B·∫Øc Ninh", loai: "noi" }, { ten: "TX T·ª´ S∆°n", loai: "noi" },
            { ten: "Huy·ªán Gia B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán L∆∞∆°ng T√†i", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø V√µ", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n Du", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Phong", loai: "ngoai" }
        ],
        "H√† Nam": [
            { ten: "TP Ph·ªß L√Ω", loai: "noi" },
            { ten: "Huy·ªán B√¨nh L·ª•c", loai: "ngoai" }, { ten: "Huy·ªán Duy Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán Kim B·∫£ng", loai: "ngoai" }, { ten: "Huy·ªán L√Ω Nh√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Li√™m", loai: "ngoai" }
        ],
        "H√† N·ªôi": [
            { ten: "Qu·∫≠n Ba ƒê√¨nh", loai: "noi" }, { ten: "Qu·∫≠n C·∫ßu Gi·∫•y", loai: "noi" },
            { ten: "Qu·∫≠n ƒê·ªëng ƒêa", loai: "noi" }, { ten: "Qu·∫≠n H√† ƒê√¥ng", loai: "noi" },
            { ten: "Qu·∫≠n Hai B√† Tr∆∞ng", loai: "noi" }, { ten: "Qu·∫≠n Ho√†n Ki·∫øm", loai: "noi" },
            { ten: "Qu·∫≠n Ho√†ng Mai", loai: "noi" }, { ten: "Qu·∫≠n Long Bi√™n", loai: "noi" },
            { ten: "Qu·∫≠n T√¢y H·ªì", loai: "noi" }, { ten: "Qu·∫≠n Thanh Xu√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Thanh Tr√¨", loai: "noi" }, { ten: "Qu·∫≠n T·ª´ Li√™m B·∫Øc", loai: "noi" },
            { ten: "Qu·∫≠n T·ª´ Li√™m Nam", loai: "noi" }, { ten: "TX S∆°n T√¢y", loai: "ngoai" },
            { ten: "Huy·ªán Ba V√¨", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞∆°ng M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán ƒêan Ph∆∞·ª£ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Anh", loai: "ngoai" },
            { ten: "Huy·ªán Gia L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán M√™ Linh", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫c Th·ªç", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ªëc Oai", loai: "ngoai" }, { ten: "Huy·ªán S√≥c S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Thanh Oai", loai: "ngoai" },
            { ten: "Huy·ªán Th∆∞·ªùng T√≠n", loai: "ngoai" }, { ten: "Huy·ªán ·ª®ng H√≤a", loai: "ngoai" }
        ],
        "H·∫£i D∆∞∆°ng": [
            { ten: "TP H·∫£i D∆∞∆°ng", loai: "noi" }, { ten: "TX Ch√≠ Linh", loai: "ngoai" },
            { ten: "Huy·ªán B√¨nh Giang", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Gi√†ng", loai: "ngoai" },
            { ten: "Huy·ªán Gia L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Kim Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Kinh M√¥n", loai: "ngoai" }, { ten: "Huy·ªán Nam S√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Giang", loai: "ngoai" }, { ten: "Huy·ªán Thanh H√†", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Mi·ªán", loai: "ngoai" }, { ten: "Huy·ªán T·ª© K·ª≥", loai: "ngoai" }
        ],
        "H·∫£i Ph√≤ng": [
            { ten: "Qu·∫≠n ƒê·ªì S∆°n", loai: "noi" }, { ten: "Qu·∫≠n D∆∞∆°ng Kinh", loai: "noi" },
            { ten: "Qu·∫≠n H·∫£i An", loai: "noi" }, { ten: "Qu·∫≠n H·ªìng B√†ng", loai: "noi" },
            { ten: "Qu·∫≠n Ki·∫øn An", loai: "noi" }, { ten: "Qu·∫≠n L√™ Ch√¢n", loai: "noi" },
            { ten: "Qu·∫≠n Ng√¥ Quy·ªÅn", loai: "noi" },
            { ten: "Huy·ªán An D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán An L√£o", loai: "ngoai" },
            { ten: "Huy·ªán B·∫°ch Long Vƒ©", loai: "ngoai" }, { ten: "Huy·ªán C√°t H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Th·ªßy Nguy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ti√™n L√£ng", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh B·∫£o", loai: "ngoai" }
        ],
        "H√≤a B√¨nh": [
            { ten: "TP H√≤a B√¨nh", loai: "noi" },
            { ten: "Huy·ªán Cao Phong", loai: "ngoai" }, { ten: "Huy·ªán ƒê√† B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán Kim B√¥i", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c S∆°n", loai: "ngoai" }, { ten: "Huy·ªán L·∫°c Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán L∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Mai Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n L·∫°c", loai: "ngoai" }, { ten: "Huy·ªán Y√™n Th·ªßy", loai: "ngoai" }
        ],
        "Kon Tum": [
            { ten: "TP Kon Tum", loai: "noi" },
            { ten: "Huy·ªán ƒê·∫Øk Glei", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk T√¥", loai: "ngoai" }, { ten: "Huy·ªán Kon Pl√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kon R·∫´y", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc H·ªìi", loai: "ngoai" },
            { ten: "Huy·ªán Sa Th·∫ßy", loai: "ngoai" }, { ten: "Huy·ªán Tu M∆° R√¥ng", loai: "ngoai" }
        ],
        "Qu·∫£ng Nam": [
            { ten: "TP H·ªôi An", loai: "noi" }, { ten: "TP Tam K·ª≥", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Tr√† My", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫°i L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒêi·ªán B√†n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng Giang", loai: "ngoai" },
            { ten: "Huy·ªán Duy Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Hi·ªáp ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nam Giang", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr√† My", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán N√∫i Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Ninh", loai: "ngoai" }, { ten: "Huy·ªán Ph∆∞·ªõc S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫ø S∆°n", loai: "ngoai" }, { ten: "Huy·ªán T√¢y Giang", loai: "ngoai" },
            { ten: "Huy·ªán ThƒÉng B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "Qu·∫£ng Ng√£i": [
            { ten: "TP Qu·∫£ng Ng√£i", loai: "noi" },
            { ten: "Huy·ªán Ba T∆°", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Ph·ªï", loai: "ngoai" }, { ten: "Huy·ªán L√Ω S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Minh Long", loai: "ngoai" }, { ten: "Huy·ªán M·ªô ƒê·ª©c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H√†nh", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√†", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n T√¢y", loai: "ngoai" }, { ten: "Huy·ªán S∆°n T·ªãnh", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y Tr√†", loai: "ngoai" }, { ten: "Huy·ªán Tr√† B·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán T∆∞ Nghƒ©a", loai: "ngoai" }
        ],
        "Qu·∫£ng Tr·ªã": [
            { ten: "TP ƒê√¥ng H√†", loai: "ngoai" }, { ten: "TX Qu·∫£ng Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tri·ªáu Phong", loai: "noi" }, { ten: "Huy·ªán Cam L·ªô", loai: "ngoai" },
            { ten: "Huy·ªán C·ªìn C·ªè", loai: "ngoai" }, { ten: "Huy·ªán ƒêakr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Gio Linh", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i LƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞·ªõng H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Linh", loai: "ngoai" }
        ],
        "B√¨nh ƒê·ªãnh": [
            { ten: "TP Quy Nh∆°n", loai: "noi" }, { ten: "Huy·ªán Tuy Ph∆∞·ªõc", loai: "noi" },
            { ten: "Huy·ªán An L√£o", loai: "ngoai" }, { ten: "Huy·ªán An Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†i √Çn", loai: "ngoai" }, { ten: "Huy·ªán Ho√†i Nh∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C√°t", loai: "ngoai" }, { ten: "Huy·ªán Ph√π M·ªπ", loai: "ngoai" },
            { ten: "Huy·ªán T√¢y S∆°n", loai: "ngoai" }, { ten: "Huy·ªán V√¢n Canh", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "Ninh B√¨nh": [
            { ten: "TP Ninh B√¨nh", loai: "noi" }, { ten: "TX Tam ƒêi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán Gia Vi·ªÖn", loai: "ngoai" }, { ten: "Huy·ªán Hoa L∆∞", loai: "ngoai" },
            { ten: "Huy·ªán Kim S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Nho Quan", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Y√™n M√¥", loai: "ngoai" }
        ],
        "Qu·∫£ng B√¨nh": [
            { ten: "TP ƒê·ªìng H·ªõi", loai: "noi" },
            { ten: "Huy·ªán B·ªë Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán L·ªá Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Minh H√≥a", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng Ninh", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán Tuy√™n H√≥a", loai: "ngoai" }
        ],
        "Thanh H√≥a": [
            { ten: "TP Thanh H√≥a", loai: "noi" }, { ten: "TX B·ªâm S∆°n", loai: "ngoai" },
            { ten: "TX S·∫ßm S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán B√° Th∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán C·∫©m Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán H√† Trung", loai: "ngoai" },
            { ten: "Huy·ªán H·∫≠u L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ho·∫±ng H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Lang Ch√°nh", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng L√°t", loai: "ngoai" },
            { ten: "Huy·ªán Nga S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc L·∫∑c", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆∞ Thanh", loai: "ngoai" }, { ten: "Huy·ªán Nh∆∞ Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán N√¥ng C·ªëng", loai: "ngoai" }, { ten: "Huy·ªán Quan H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Quan S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫£ng X∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Thi·ªáu H√≥a", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªç Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th∆∞·ªùng Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Tƒ©nh Gia", loai: "ngoai" }, { ten: "Huy·ªán Tri·ªáu S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Y√™n ƒê·ªãnh", loai: "ngoai" }
        ],
        "ƒê√† N·∫µng": [
            { ten: "Qu·∫≠n C·∫©m L·ªá", loai: "noi" }, { ten: "Qu·∫≠n H·∫£i Ch√¢u", loai: "noi" },
            { ten: "Qu·∫≠n Li√™n Chi·ªÉu", loai: "noi" }, { ten: "Qu·∫≠n Ng≈© H√†nh S∆°n", loai: "noi" },
            { ten: "Qu·∫≠n S∆°n Tr√†", loai: "noi" }, { ten: "Qu·∫≠n Thanh Kh√™", loai: "noi" },
            { ten: "Huy·ªán H√≤a Vang", loai: "ngoai" }
        ],
        "Hu·∫ø": [
            { ten: "TP Hu·∫ø", loai: "noi" }, { ten: "TX H∆∞∆°ng Th·ªßy", loai: "ngoai" },
            { ten: "TX H∆∞∆°ng Tr√†", loai: "ngoai" },
            { ten: "Huy·ªán A L∆∞·ªõi", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Vang", loai: "ngoai" },
            { ten: "Huy·ªán Qu·∫£ng ƒêi·ªÅn", loai: "ngoai" }
        ],
        "Ph√∫ Y√™n": [
            { ten: "TP Tuy H√≤a", loai: "noi" }, { ten: "TX S√¥ng C·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Xu√¢n", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ng H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ H√≤a", loai: "ngoai" }, { ten: "Huy·ªán S∆°n H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng Hinh", loai: "ngoai" }, { ten: "Huy·ªán T√¢y H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Tuy An", loai: "ngoai" }
        ],
        "B·∫øn Tre": [
            { ten: "TP B·∫øn Tre", loai: "noi" },
            { ten: "Huy·ªán Ba Tri", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh ƒê·∫°i", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ L√°ch", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Tr√¥m", loai: "ngoai" }, { ten: "Huy·ªán M·ªè C√†y B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán M·ªè C√†y Nam", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Ph√∫", loai: "ngoai" }
        ],
        "B√¨nh D∆∞∆°ng": [
            { ten: "TP Th·ªß D·∫ßu M·ªôt", loai: "noi" }, { ten: "TX Dƒ© An", loai: "noi" },
            { ten: "TX Thu·∫≠n An", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C√°t", loai: "ngoai" }, { ten: "Huy·ªán D·∫ßu Ti·∫øng", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ Gi√°o", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" }
        ],
        "B√¨nh Ph∆∞·ªõc": [
            { ten: "TX ƒê·ªìng Xo√†i", loai: "noi" }, { ten: "TX B√¨nh Long", loai: "ngoai" },
            { ten: "TX Ph∆∞·ªõc Long", loai: "ngoai" },
            { ten: "Huy·ªán B√π ƒêƒÉng", loai: "ngoai" }, { ten: "Huy·ªán B√π ƒê·ªëp", loai: "ngoai" },
            { ten: "Huy·ªán B√π Gia M·∫≠p", loai: "ngoai" }, { ten: "Huy·ªán Ch∆°n Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ªìng Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán H·ªõn Qu·∫£n", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc Ninh", loai: "ngoai" }
        ],
        "ƒê·∫Øk N√¥ng": [
            { ten: "TX Gia Nghƒ©a", loai: "noi" },
            { ten: "Huy·ªán C∆∞ J√∫t", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Song", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Glong", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫Øk Mil", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫Øk Rl·∫•p", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng N√¥", loai: "ngoai" },
            { ten: "Huy·ªán Tuy ƒê·ª©c", loai: "ngoai" }
        ],
        "ƒê·ªìng Nai": [
            { ten: "TP Bi√™n H√≤a", loai: "noi" },
            { ten: "Huy·ªán C·∫©m M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ªãnh Qu√°n", loai: "ngoai" },
            { ten: "Huy·ªán Long Kh√°nh", loai: "ngoai" }, { ten: "Huy·ªán Long Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Nh∆°n Tr·∫°ch", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªëng Nh·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng Bom", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh C·ª≠u", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n L·ªôc", loai: "ngoai" }
        ],
        "ƒê·ªìng Th√°p": [
            { ten: "TP Cao L√£nh", loai: "noi" }, { ten: "TX H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "TX Sa ƒê√©c", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng Ng·ª±", loai: "ngoai" },
            { ten: "Huy·ªán Lai Vung", loai: "ngoai" }, { ten: "Huy·ªán L·∫•p V√≤", loai: "ngoai" },
            { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n H·ªìng", loai: "ngoai" },
            { ten: "Huy·ªán Thanh B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Th√°p M∆∞·ªùi", loai: "ngoai" }
        ],
        "H·∫≠u Giang": [
            { ten: "TP V·ªã Thanh", loai: "noi" }, { ten: "TX Ng√£ B·∫£y", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh A", loai: "ngoai" },
            { ten: "Huy·ªán Long M·ªπ", loai: "ngoai" }, { ten: "Huy·ªán Ph·ª•ng Hi·ªáp", loai: "ngoai" },
            { ten: "Huy·ªán V·ªã Th·ªßy", loai: "ngoai" }
        ],
        "Ki√™n Giang": [
            { ten: "TP R·∫°ch Gi√°", loai: "noi" }, { ten: "TX H√† Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán An Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán An Minh", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Giang Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Gi·ªìng Ri·ªÅng", loai: "ngoai" }, { ten: "Huy·ªán G√≤ Quao", loai: "ngoai" },
            { ten: "Huy·ªán H√≤n ƒê·∫•t", loai: "ngoai" }, { ten: "Huy·ªán Ki√™n H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ki√™n L∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu·ªëc", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Hi·ªáp", loai: "ngoai" }, { ten: "Huy·ªán U Minh Th∆∞·ª£ng", loai: "ngoai" },
            { ten: "Huy·ªán Vƒ©nh Thu·∫≠n", loai: "ngoai" }
        ],
        "S√≥c TrƒÉng": [
            { ten: "TP S√≥c TrƒÉng", loai: "noi" }, { ten: "TX Vƒ©nh Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán C√π Lao Dung", loai: "ngoai" },
            { ten: "Huy·ªán K·∫ø S√°ch", loai: "ngoai" }, { ten: "Huy·ªán Long Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ T√∫", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ Xuy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Ng√£ NƒÉm", loai: "ngoai" }, { ten: "Huy·ªán Th·∫°nh Tr·ªã", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn ƒê·ªÅ", loai: "ngoai" }
        ],
        "Tr√† Vinh": [
            { ten: "TP Tr√† Vinh", loai: "noi" },
            { ten: "Huy·ªán C√†ng Long", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßu K√®", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßu Ngang", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Duy√™n H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÉu C·∫ßn", loai: "ngoai" },
            { ten: "Huy·ªán Tr√† C√∫", loai: "ngoai" }
        ],
        "Vƒ©nh Long": [
            { ten: "TP Vƒ©nh Long", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Minh", loai: "ngoai" }, { ten: "Huy·ªán B√¨nh T√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Long H·ªì", loai: "ngoai" }, { ten: "Huy·ªán Mang Th√≠t", loai: "ngoai" },
            { ten: "Huy·ªán Tam B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Tr√† √în", loai: "ngoai" },
            { ten: "Huy·ªán V≈©ng Li√™m", loai: "ngoai" }
        ],
        "B√¨nh Thu·∫≠n": [
            { ten: "TP Phan Thi·∫øt", loai: "noi" }, { ten: "TX La Gi", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Linh", loai: "ngoai" },
            { ten: "Huy·ªán H√†m T√¢n", loai: "ngoai" }, { ten: "Huy·ªán H√†m Thu·∫≠n B·∫Øc", loai: "ngoai" },
            { ten: "Huy·ªán H√†m Thu·∫≠n Nam", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Qu√Ω", loai: "ngoai" },
            { ten: "Huy·ªán T√°nh Linh", loai: "ngoai" }, { ten: "Huy·ªán Tuy Phong", loai: "ngoai" }
        ],
        "Long An": [
            { ten: "Huy·ªán B·∫øn L·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C·∫ßn ƒê∆∞·ªõc", loai: "ngoai" },
            { ten: "Huy·ªán C·∫ßn Giu·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c H√≤a", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Hu·ªá", loai: "ngoai" }
        ],
        "B√† R·ªãa - V≈©ng T√†u": [
            { ten: "TP V≈©ng T√†u", loai: "noi" }, { ten: "TP B√† R·ªãa", loai: "noi" },
            { ten: "Huy·ªán Ch√¢u ƒê·ª©c", loai: "ngoai" }, { ten: "Huy·ªán C√¥n ƒê·∫£o", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫•t ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Long ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Xuy√™n M·ªôc", loai: "ngoai" }
        ],
        "T√¢y Ninh": [
            { ten: "TP T√¢y Ninh", loai: "noi" },
            { ten: "Huy·ªán B·∫øn C·∫ßu", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán D∆∞∆°ng Minh Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán G√≤ D·∫ßu", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Bi√™n", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫£ng B√†ng", loai: "ngoai" }
        ],
        "Ti·ªÅn Giang": [
            { ten: "TP M·ªπ Tho", loai: "noi" }, { ten: "TX G√≤ C√¥ng", loai: "noi" },
            { ten: "Huy·ªán Cai L·∫≠y", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" },
            { ten: "Huy·ªán Ch·ª£ G·∫°o", loai: "ngoai" }, { ten: "Huy·ªán G√≤ C√¥ng ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán G√≤ C√¥ng T√¢y", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Ph√∫ ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n Ph∆∞·ªõc", loai: "ngoai" }
        ],
        "C·∫ßn Th∆°": [
            { ten: "Qu·∫≠n B√¨nh Th·ªßy", loai: "noi" }, { ten: "Qu·∫≠n C√°i RƒÉng", loai: "noi" },
            { ten: "Qu·∫≠n Ninh Ki·ªÅu", loai: "noi" }, { ten: "Qu·∫≠n √î M√¥n", loai: "noi" },
            { ten: "Qu·∫≠n Th·ªët N·ªët", loai: "noi" },
            { ten: "Huy·ªán C·ªù ƒê·ªè", loai: "ngoai" }, { ten: "Huy·ªán Phong ƒêi·ªÅn", loai: "ngoai" },
            { ten: "Huy·ªán Th·ªõi Lai", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh Th·∫°nh", loai: "ngoai" }
        ],
        "An Giang": [
            { ten: "TP Long Xuy√™n", loai: "noi" }, { ten: "TP Ch√¢u ƒê·ªëc", loai: "noi" },
            { ten: "Huy·ªán An Ph√∫", loai: "ngoai" }, { ten: "Huy·ªán Ch√¢u Ph√∫", loai: "ngoai" },
            { ten: "Huy·ªán Ch√¢u Th√†nh", loai: "ngoai" }, { ten: "Huy·ªán Ch·ª£ M·ªõi", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Tho·∫°i S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán T·ªãnh Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán Tri T√¥n", loai: "ngoai" }
        ],
        "C√† Mau": [
            { ten: "TP C√† Mau", loai: "noi" },
            { ten: "Huy·ªán C√°i N∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm D∆°i", loai: "ngoai" },
            { ten: "Huy·ªán NƒÉm CƒÉn", loai: "ngoai" }, { ten: "Huy·ªán Ng·ªçc Hi·ªÉn", loai: "ngoai" },
            { ten: "Huy·ªán Ph√∫ T√¢n", loai: "ngoai" }, { ten: "Huy·ªán Th·ªõi B√¨nh", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫ßn VƒÉn Th·ªùi", loai: "ngoai" }, { ten: "Huy·ªán U Minh", loai: "ngoai" }
        ],
        "B·∫°c Li√™u": [
            { ten: "TP B·∫°c Li√™u", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H·∫£i", loai: "ngoai" }, { ten: "Huy·ªán Gi√° Rai", loai: "ngoai" },
            { ten: "Huy·ªán H√≤a B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán H·ªìng D√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Ph∆∞·ªõc Long", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh L·ª£i", loai: "ngoai" }
        ],
        "Ninh Thu·∫≠n": [
            { ten: "TP Phan Rang-Th√°p Ch√†m", loai: "noi" },
            { ten: "Huy·ªán B√°c √Åi", loai: "ngoai" }, { ten: "Huy·ªán Ninh H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Ninh Ph∆∞·ªõc", loai: "ngoai" }, { ten: "Huy·ªán Ninh S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n B·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán Thu·∫≠n Nam", loai: "ngoai" }
        ],
        "Kh√°nh H√≤a": [
            { ten: "TP Nha Trang", loai: "noi" }, { ten: "TP Cam Ranh", loai: "noi" },
            { ten: "Huy·ªán Cam L√¢m", loai: "ngoai" }, { ten: "Huy·ªán Di√™n Kh√°nh", loai: "ngoai" },
            { ten: "Huy·ªán Kh√°nh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Kh√°nh Vƒ©nh", loai: "ngoai" },
            { ten: "Huy·ªán Ninh H√≤a", loai: "ngoai" }, { ten: "Huy·ªán Tr∆∞·ªùng Sa", loai: "ngoai" },
            { ten: "Huy·ªán V·∫°n Ninh", loai: "ngoai" }
        ],
        "L√¢m ƒê·ªìng": [
            { ten: "TP ƒê√† L·∫°t", loai: "noi" }, { ten: "TP B·∫£o L·ªôc", loai: "noi" },
            { ten: "Huy·ªán B·∫£o L√¢m", loai: "ngoai" }, { ten: "Huy·ªán C√°t Ti√™n", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·∫° Huoai", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫° T·∫ªh", loai: "ngoai" },
            { ten: "Huy·ªán ƒêam R√¥ng", loai: "ngoai" }, { ten: "Huy·ªán Di Linh", loai: "ngoai" },
            { ten: "Huy·ªán ƒê∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán ƒê·ª©c Tr·ªçng", loai: "ngoai" },
            { ten: "Huy·ªán L·∫°c D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán L√¢m H√†", loai: "ngoai" }
        ],
        "ƒê·∫Øk L·∫Øk": [
            { ten: "TP Bu√¥n Ma Thu·ªôt", loai: "noi" },
            { ten: "Huy·ªán Bu√¥n ƒê√¥n", loai: "ngoai" }, { ten: "Huy·ªán C∆∞ Kuin", loai: "ngoai" },
            { ten: "Huy·ªán C∆∞ M'gar", loai: "ngoai" }, { ten: "Huy·ªán Ea H'leo", loai: "ngoai" },
            { ten: "Huy·ªán Ea Kar", loai: "ngoai" }, { ten: "Huy·ªán Ea S√∫p", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng Ana", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng B√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng B√∫k", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng NƒÉng", loai: "ngoai" },
            { ten: "Huy·ªán Kr√¥ng P·∫Øc", loai: "ngoai" }, { ten: "Huy·ªán L·∫Øk", loai: "ngoai" },
            { ten: "Huy·ªán M'ƒêr·∫Øk", loai: "ngoai" }
        ],
        "Gia Lai": [
            { ten: "TP Pleiku", loai: "noi" }, { ten: "TX An Kh√™", loai: "noi" },
            { ten: "Huy·ªán Ch∆∞ PƒÉh", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ Pr√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Ch∆∞ P∆∞h", loai: "ngoai" }, { ten: "Huy·ªán Ch∆∞ S√™", loai: "ngoai" },
            { ten: "Huy·ªán ƒêƒÉk ƒêoa", loai: "ngoai" }, { ten: "Huy·ªán ƒêƒÉk P∆°", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c C∆°", loai: "ngoai" }, { ten: "Huy·ªán Ia Grai", loai: "ngoai" },
            { ten: "Huy·ªán Ia Pa", loai: "ngoai" }, { ten: "Huy·ªán Kbang", loai: "ngoai" },
            { ten: "Huy·ªán K√¥ng Chro", loai: "ngoai" }, { ten: "Huy·ªán Kr√¥ng Pa", loai: "ngoai" },
            { ten: "Huy·ªán Mang Yang", loai: "ngoai" }, { ten: "Huy·ªán Ph√∫ Thi·ªán", loai: "ngoai" }
        ],
        "Ngh·ªá An": [
            { ten: "TP Vinh", loai: "noi" }, { ten: "TX C·ª≠a L√≤", loai: "noi" },
            { ten: "TX Th√°i H√≤a", loai: "ngoai" },
            { ten: "Huy·ªán Anh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Con Cu√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán Di·ªÖn Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán ƒê√¥ L∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞ng Nguy√™n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán Nam ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Nghi L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a ƒê√†n", loai: "ngoai" }, { ten: "Huy·ªán Qu·∫ø Phong", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥ Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥ H·ª£p", loai: "ngoai" },
            { ten: "Huy·ªán Qu·ª≥nh L∆∞u", loai: "ngoai" }, { ten: "Huy·ªán T√¢n K·ª≥", loai: "ngoai" },
            { ten: "Huy·ªán Thanh Ch∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán T∆∞∆°ng D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Th√†nh", loai: "ngoai" }
        ],
        "H√† Tƒ©nh": [
            { ten: "TP H√† Tƒ©nh", loai: "noi" }, { ten: "TX H·ªìng Lƒ©nh", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán Can L·ªôc", loai: "ngoai" },
            { ten: "Huy·ªán ƒê·ª©c Th·ªç", loai: "ngoai" }, { ten: "Huy·ªán H∆∞∆°ng Kh√™", loai: "ngoai" },
            { ten: "Huy·ªán H∆∞∆°ng S∆°n", loai: "ngoai" }, { ten: "Huy·ªán K·ª≥ Anh", loai: "ngoai" },
            { ten: "Huy·ªán L·ªôc H√†", loai: "ngoai" }, { ten: "Huy·ªán Nghi Xu√¢n", loai: "ngoai" },
            { ten: "Huy·ªán Th·∫°ch H√†", loai: "ngoai" }, { ten: "Huy·ªán V≈© Quang", loai: "ngoai" }
        ],
        "Qu·∫£ng Ninh": [
            { ten: "TP H·∫° Long", loai: "noi" }, { ten: "TP M√≥ng C√°i", loai: "noi" },
            { ten: "TP C·∫©m Ph·∫£", loai: "noi" }, { ten: "TP U√¥ng B√≠", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Li√™u", loai: "ngoai" }, { ten: "Huy·ªán Ba Ch·∫Ω", loai: "ngoai" },
            { ten: "Huy·ªán C√¥ T√¥", loai: "ngoai" }, { ten: "Huy·ªán ƒê·∫ßm H√†", loai: "ngoai" },
            { ten: "Huy·ªán ƒê√¥ng Tri·ªÅu", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ho√†nh B·ªì", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán V√¢n ƒê·ªìn", loai: "ngoai" }
        ],
        "ƒêi·ªán Bi√™n": [
            { ten: "TP ƒêi·ªán Bi√™n Ph·ªß", loai: "noi" },
            { ten: "Huy·ªán ƒêi·ªán Bi√™n", loai: "ngoai" }, { ten: "Huy·ªán ƒêi·ªán Bi√™n ƒê√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng ·∫¢ng", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Ch√†", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Lay", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng Nh√©", loai: "ngoai" },
            { ten: "Huy·ªán N·∫≠m P·ªì", loai: "ngoai" }, { ten: "Huy·ªán T·ªßa Ch√πa", loai: "ngoai" },
            { ten: "Huy·ªán Tu·∫ßn Gi√°o", loai: "ngoai" }
        ],
        "S∆°n La": [
            { ten: "TP S∆°n La", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Mai S∆°n", loai: "ngoai" },
            { ten: "Huy·ªán M·ªôc Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán M∆∞·ªùng La", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Y√™n", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Nhai", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng M√£", loai: "ngoai" }, { ten: "Huy·ªán S·ªëp C·ªôp", loai: "ngoai" },
            { ten: "Huy·ªán Thu·∫≠n Ch√¢u", loai: "ngoai" }, { ten: "Huy·ªán V√¢n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n Ch√¢u", loai: "ngoai" }
        ],
        "Y√™n B√°i": [
            { ten: "TP Y√™n B√°i", loai: "noi" },
            { ten: "Huy·ªán L·ª•c Y√™n", loai: "ngoai" }, { ten: "Huy·ªán M√π Cang Ch·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán Tr·∫°m T·∫•u", loai: "ngoai" }, { ten: "Huy·ªán Tr·∫•n Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Ch·∫•n", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n B√¨nh", loai: "ngoai" }
        ],
        "Lai Ch√¢u": [
            { ten: "TP Lai Ch√¢u", loai: "noi" },
            { ten: "Huy·ªán M∆∞·ªùng T√®", loai: "ngoai" }, { ten: "Huy·ªán N·∫≠m Nh√πn", loai: "ngoai" },
            { ten: "Huy·ªán Phong Th·ªï", loai: "ngoai" }, { ten: "Huy·ªán S√¨n H·ªì", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê∆∞·ªùng", loai: "ngoai" }, { ten: "Huy·ªán T√¢n Uy√™n", loai: "ngoai" },
            { ten: "Huy·ªán Than Uy√™n", loai: "ngoai" }
        ],
        "Tuy√™n Quang": [
            { ten: "TP Tuy√™n Quang", loai: "noi" },
            { ten: "Huy·ªán Chi√™m H√≥a", loai: "ngoai" }, { ten: "Huy·ªán H√†m Y√™n", loai: "ngoai" },
            { ten: "Huy·ªán L√¢m B√¨nh", loai: "ngoai" }, { ten: "Huy·ªán Na Hang", loai: "ngoai" },
            { ten: "Huy·ªán S∆°n D∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Y√™n S∆°n", loai: "ngoai" }
        ],
        "L√†o Cai": [
            { ten: "TP L√†o Cai", loai: "noi" },
            { ten: "Huy·ªán B·∫Øc H√†", loai: "ngoai" }, { ten: "Huy·ªán B·∫£o Th·∫Øng", loai: "ngoai" },
            { ten: "Huy·ªán B·∫£o Y√™n", loai: "ngoai" }, { ten: "Huy·ªán B√°t X√°t", loai: "ngoai" },
            { ten: "Huy·ªán M∆∞·ªùng Kh∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Sa Pa", loai: "ngoai" },
            { ten: "Huy·ªán Si Ma Cai", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn B√†n", loai: "ngoai" }
        ],
        "Ph√∫ Th·ªç": [
            { ten: "TP Vi·ªát Tr√¨", loai: "noi" },
            { ten: "Huy·ªán C·∫©m Kh√™", loai: "ngoai" }, { ten: "Huy·ªán ƒêoan H√πng", loai: "ngoai" },
            { ten: "Huy·ªán H·∫° H√≤a", loai: "ngoai" }, { ten: "Huy·ªán L√¢m Thao", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π Ninh", loai: "ngoai" }, { ten: "Huy·ªán Tam N√¥ng", loai: "ngoai" },
            { ten: "Huy·ªán T√¢n S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Ba", loai: "ngoai" },
            { ten: "Huy·ªán Thanh S∆°n", loai: "ngoai" }, { ten: "Huy·ªán Thanh Th·ªßy", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫≠p", loai: "ngoai" }
        ],
        "Vƒ©nh Ph√∫c": [
            { ten: "TP Vƒ©nh Y√™n", loai: "noi" }, { ten: "TP Ph√∫c Y√™n", loai: "noi" },
            { ten: "Huy·ªán B√¨nh Xuy√™n", loai: "ngoai" }, { ten: "Huy·ªán L·∫≠p Th·∫°ch", loai: "ngoai" },
            { ten: "Huy·ªán S√¥ng L√¥", loai: "ngoai" }, { ten: "Huy·ªán Tam D∆∞∆°ng", loai: "ngoai" },
            { ten: "Huy·ªán Tam ƒê·∫£o", loai: "ngoai" }, { ten: "Huy·ªán Vƒ©nh T∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n L·∫°c", loai: "ngoai" }
        ],
        "Th√°i B√¨nh": [
            { ten: "TP Th√°i B√¨nh", loai: "noi" },
            { ten: "Huy·ªán ƒê√¥ng H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán H∆∞ng H√†", loai: "ngoai" },
            { ten: "Huy·ªán Ki·∫øn X∆∞∆°ng", loai: "ngoai" }, { ten: "Huy·ªán Qu·ª≥nh Ph·ª•", loai: "ngoai" },
            { ten: "Huy·ªán Th√°i Th·ª•y", loai: "ngoai" }, { ten: "Huy·ªán Ti·ªÅn H·∫£i", loai: "ngoai" },
            { ten: "Huy·ªán V≈© Th∆∞", loai: "ngoai" }
        ],
        "H∆∞ng Y√™n": [
            { ten: "TP H∆∞ng Y√™n", loai: "noi" },
            { ten: "Huy·ªán √Çn Thi", loai: "ngoai" }, { ten: "Huy·ªán Kho√°i Ch√¢u", loai: "ngoai" },
            { ten: "Huy·ªán Kim ƒê·ªông", loai: "ngoai" }, { ten: "Huy·ªán M·ªπ H√†o", loai: "ngoai" },
            { ten: "Huy·ªán Ph√π C·ª´", loai: "ngoai" }, { ten: "Huy·ªán Ti√™n L·ªØ", loai: "ngoai" },
            { ten: "Huy·ªán VƒÉn Giang", loai: "ngoai" }, { ten: "Huy·ªán VƒÉn L√¢m", loai: "ngoai" },
            { ten: "Huy·ªán Y√™n M·ªπ", loai: "ngoai" }
        ],
        "Nam ƒê·ªãnh": [
            { ten: "TP Nam ƒê·ªãnh", loai: "noi" },
            { ten: "Huy·ªán Giao Th·ªßy", loai: "ngoai" }, { ten: "Huy·ªán H·∫£i H·∫≠u", loai: "ngoai" },
            { ten: "Huy·ªán M·ªπ L·ªôc", loai: "ngoai" }, { ten: "Huy·ªán Nam Tr·ª±c", loai: "ngoai" },
            { ten: "Huy·ªán Nghƒ©a H∆∞ng", loai: "ngoai" }, { ten: "Huy·ªán Tr·ª±c Ninh", loai: "ngoai" },
            { ten: "Huy·ªán V·ª• B·∫£n", loai: "ngoai" }, { ten: "Huy·ªán Xu√¢n Tr∆∞·ªùng", loai: "ngoai" },
            { ten: "Huy·ªán √ù Y√™n", loai: "ngoai" }
        ]
    };

    // B·∫£ng gi√° VIN-TRUCK (ƒê∆∞·ªùng B·ªô) - ƒë∆°n v·ªã: VNƒê
    const bangGiaVinTruck = {
        10: [50000, 70000, 90000, 100000, 110000, 120000, 125000, 140000, 180000], // ‚â§10kg
        50: [2900, 3500, 4500, 4700, 4900, 5400, 5500, 5900, 9200],   // >10-50kg (m·ªói kg)
        100: [2700, 3400, 4200, 4500, 4700, 5200, 5200, 5700, 9000],  // >50-100kg (m·ªói kg)
        300: [2400, 3200, 3700, 4100, 4500, 5000, 5000, 5400, 8500],  // >100-300kg
        500: [2200, 2600, 3200, 3900, 4300, 4500, 4700, 5000, 8300],  // >300-500kg
        1000: [1700, 2400, 2800, 3700, 4000, 4200, 4300, 4700, 7500], // >500-1000kg
        2000: [1200, 1900, 2500, 3400, 3800, 3900, 4100, 4600, 6000], // >1000-2000kg
        max: [1000, 1700, 2000, 3000, 3600, 3600, 4000, 4300, 5700]   // >2000kg
    };

    // B·∫£ng gi√° VIN-ECO (Ti·∫øt Ki·ªám) - t·ªëi thi·ªÉu 30kg
    const bangGiaVinEco = {
        10: [66000, 100000, 109000, 170000, 180000, 180000, 180000, 190000, 200000],
        50: [3200, 4700, 7200, 7800, 8500, 10300, 16000, 17000, 19000],
        100: [3100, 4300, 6900, 7500, 8200, 10000, 15000, 16000, 18000],
        300: [3000, 3800, 5500, 6900, 7400, 8000, 14000, 15000, 16500],
        500: [2500, 3500, 4900, 6500, 6500, 7100, 12500, 13500, 15000],
        1000: [2100, 2900, 4000, 5600, 5900, 6500, 10000, 11000, 13000],
        2000: [1500, 2100, 2800, 3800, 5500, 6100, 8500, 10000, 12000],
        max: [1200, 1900, 2200, 3300, 5000, 5600, 7500, 8000, 10500]
    };

    // B·∫£ng gi√° VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)
    const bangGiaVinExpress = {
        1: [24700, 40300, 45500, 48100, 52000, 57400, 61500, 63000, 73000],   // ‚â§1kg
        2: [29000, 55900, 61100, 66300, 76700, 82600, 88500, 96000, 102000], // ‚â§2kg
        step: [2500, 3900, 5000, 8000, 10000, 12000, 12500, 13000, 14000]   // m·ªói 0.5kg ti·∫øp
    };

    // B·∫£ng gi√° VIN-SUPPER EXPRESS (H·ªèa T·ªëc)
    const bangGiaVinHoaToc = {
        2: [50000, 89700, 91000, 93600, 100100, 120000, 120000, 153000, 170000], // ‚â§2kg
        step: [4000, 5000, 6000, 10450, 10450, 13500, 13700, 13750, 17000]      // m·ªói 0.5kg ti·∫øp
    };

    // Th·ªùi gian giao h√†ng (d·ªãch v·ª• x v√πng)
    const thoiGianGiaoHang = {
        "VIN-TRUCK": ["1-2 ng√†y", "1-2 ng√†y", "2-3 ng√†y", "3-3.5 ng√†y", "3-4.5 ng√†y", "4-5 ng√†y", "4-6 ng√†y", "4-6 ng√†y", "5-7 ng√†y"],
        "VIN-ECO": ["1-1.5 ng√†y", "1-1.5 ng√†y", "1-2 ng√†y", "2 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-2.5 ng√†y", "2-3 ng√†y", "2-4 ng√†y"],
        "VIN-EXPRESS": ["24h", "24h", "24h", "36h", "36-48h", "36-48h", "36-48h", "36-48h", "72-80h"],
        "VIN-HOATOC": ["12-20h", "20h", "21h", "24h", "36h", "24h", "24h", "24h", "48-72h"]
    };

    // --- DOM ELEMENTS ---
    const sidebarNavItems = $$('.nav-item');
    const bottomNavItems = $$('.bottom-nav-item');
    const tabContents = $$('.tab-content');
    const cbmInput = $('#cbm-input');
    const btnBack1 = $('#btn-back1');
    const btnBack2 = $('#btn-back2');
    const btnReset = $('#btn-reset');
    const groupsDisplay = $('#groups-display');
    const mainContent = $('#cbm-main-content');
    const historyListDiv = $('#history-list');
    const clearHistoryBtn = $('#clear-history-button');
    const searchHistoryInput = $('#search-history-input');
    const clearSearchBtn = $('#clear-search-button');
    const prevPageBtn = $('#prev-page-button');
    const nextPageBtn = $('#next-page-button');
    const pageInfoSpan = $('#page-info');
    // Province Checker DOM elements
    const provinceInput = $('#province-input');
    const provinceResultDiv = $('#province-result');
    const btnClearProvince = $('#btn-clear-province');
    // Hamburger menu DOM elements
    const hamburgerMenu = $('#hamburger-menu');
    const slideMenu = $('#slide-menu');
    const menuOverlay = $('#menu-overlay');
    const closeMenuBtn = $('#close-menu');
    const slideMenuItems = $$('.slide-menu-item');
    // Shipping Calculator DOM elements
    const shippingTinhSelect = $('#shipping-tinh-select');
    const shippingHuyenSelect = $('#shipping-huyen-select');
    const shippingWeightInput = $('#shipping-weight-input');
    const btnCalculateShipping = $('#btn-calculate-shipping');
    const btnResetShipping = $('#btn-reset-shipping');
    const shippingResultDiv = $('#shipping-result');

    // --- PROVINCE CHECKER STATE ---
    // Danh s√°ch 32 t·ªânh H√ÄNG BAY (t·ª´ Android app)
    const hangBayProvinces = [
        "ha noi", "son la", "quang binh", "cao bang", "quang tri", "hue",
        "da nang", "quang nam", "quang ngai", "ha giang", "bac kan", "tuyen quang",
        "lao cai", "dien bien", "lai chau", "thai binh", "ha nam", "nam dinh",
        "ninh binh", "thanh hoa", "yen bai", "hoa binh", "thai nguyen", "lang son",
        "quang ninh", "bac giang", "phu tho", "vinh phuc", "bac ninh", "hai duong",
        "hai phong", "hung yen"
    ];
    
    // Danh s√°ch ƒë·∫ßy ƒë·ªß 63 t·ªânh th√†nh Vi·ªát Nam (ƒë·ªÉ check "Kh√¥ng t√¨m th·∫•y")
    const allProvinces = [
        "ha noi", "ho chi minh", "da nang", "hai phong", "can tho",
        "an giang", "ba ria vung tau", "bac giang", "bac kan", "bac lieu", "bac ninh",
        "ben tre", "binh dinh", "binh duong", "binh phuoc", "binh thuan",
        "ca mau", "cao bang", "dak lak", "dak nong", "dien bien", "dong nai", "dong thap",
        "gia lai", "ha giang", "ha nam", "ha tinh", "hai duong", "hau giang", "hoa binh", "hung yen",
        "khanh hoa", "kien giang", "kon tum", "lai chau", "lam dong", "lang son", "lao cai",
        "long an", "nam dinh", "nghe an", "ninh binh", "ninh thuan",
        "phu tho", "phu yen", "quang binh", "quang nam", "quang ngai", "quang ninh", "quang tri",
        "soc trang", "son la", "tay ninh", "thai binh", "thai nguyen", "thanh hoa",
        "thua thien hue", "tien giang", "tra vinh", "tuyen quang",
        "vinh long", "vinh phuc", "yen bai"
    ];

    // --- HAMBURGER MENU STATE ---
    let hideMenuTimer;
    const MENU_HIDE_DELAY = 2000; // 2 seconds

    // --- FUNCTIONS ---
    
    // --- SECURITY FUNCTIONS ---
    // Sanitize input ƒë·ªÉ ngƒÉn XSS
    const sanitizeInput = (str) => {
        if (typeof str !== 'string') return '';
        return str
            .replace(/[<>\"']/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    };
    
    const sanitizeNumber = (str) => {
        if (typeof str !== 'string') return '';
        return str.replace(/[^0-9.,]/g, '');
    };
    
    // --- THEME & SETTINGS FUNCTIONS ---
    const loadSettings = () => {
        const savedTheme = localStorage.getItem('vinTransCBMTheme') || 'light';
        const savedSize = localStorage.getItem('vinTransCBMSize') || 'medium';
        const savedAnimations = localStorage.getItem('vinTransCBMAnimations') !== 'false';
        const savedTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        applyTheme(savedTheme);
        applySize(savedSize);
        applyAnimations(savedAnimations);
        applyTabFontSize(savedTabSize);
        
        // Update UI states
        updateThemeButtons(savedTheme);
        updateSizeButtons(savedSize);
        updateTabFontSizeButtons(savedTabSize);
        document.getElementById('animations-toggle').checked = savedAnimations;
    };
    
    const saveSettings = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const currentSize = document.documentElement.getAttribute('data-size') || 'medium';
        const currentAnimations = !document.body.classList.contains('no-animations');
        const currentTabSize = localStorage.getItem('vinTransCBMTabSize') || 'medium';
        
        localStorage.setItem('vinTransCBMTheme', currentTheme);
        localStorage.setItem('vinTransCBMSize', currentSize);
        localStorage.setItem('vinTransCBMAnimations', currentAnimations.toString());
        localStorage.setItem('vinTransCBMTabSize', currentTabSize);
    };
    
    const applyTheme = (theme) => {
        document.documentElement.setAttribute('data-theme', theme);
    };
    
    const applySize = (size) => {
        document.documentElement.setAttribute('data-size', size);
    };
    
    const applyAnimations = (enabled) => {
        if (enabled) {
            document.body.classList.remove('no-animations');
        } else {
            document.body.classList.add('no-animations');
        }
    };
    
    const updateThemeButtons = (theme) => {
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-theme') === theme);
        });
    };
    
    const updateSizeButtons = (size) => {
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const toggleTheme = () => {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        applyTheme(newTheme);
        updateThemeButtons(newTheme);
        saveSettings();
    };
    
    const applyTabFontSize = (size) => {
        console.log('Applying tab font size:', size);
        document.documentElement.setAttribute('data-tab-size', size);
        console.log('Current data-tab-size:', document.documentElement.getAttribute('data-tab-size'));
    };
    
    const updateTabFontSizeButtons = (size) => {
        document.querySelectorAll('.font-size-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-size') === size);
        });
    };
    
    const resetSettings = () => {
        if (confirm('Kh√¥i ph·ª•c t·∫•t c·∫£ c√†i ƒë·∫∑t v·ªÅ m·∫∑c ƒë·ªãnh?')) {
            localStorage.removeItem('vinTransCBMTheme');
            localStorage.removeItem('vinTransCBMSize');
            localStorage.removeItem('vinTransCBMAnimations');
            localStorage.removeItem('vinTransCBMTabSize');
            loadSettings();
        }
    };
    
    // --- HAMBURGER MENU FUNCTIONS ---
    const startHideTimer = () => {
        clearTimeout(hideMenuTimer);
        hideMenuTimer = setTimeout(() => {
            if (hamburgerMenu && !slideMenu.classList.contains('open')) {
                hamburgerMenu.classList.add('hidden');
            }
        }, MENU_HIDE_DELAY);
    };

    const showHamburger = () => {
        if (hamburgerMenu) {
            hamburgerMenu.classList.remove('hidden');
            startHideTimer();
        }
    };

    const openSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.add('open');
            menuOverlay.classList.add('visible');
            clearTimeout(hideMenuTimer);
            // Keep hamburger visible when menu is open
            if (hamburgerMenu) {
                hamburgerMenu.classList.remove('hidden');
            }
        }
    };

    const closeSlideMenu = () => {
        if (slideMenu && menuOverlay) {
            slideMenu.classList.remove('open');
            menuOverlay.classList.remove('visible');
            // Start hide timer after closing menu
            startHideTimer();
        }
    };

    const handleSlideMenuItemClick = (tabName) => {
        switchTab(tabName);
        closeSlideMenu();
    };

    // --- HISTORY FUNCTIONS ---
    const formatHistoryEntry = (entry) => {
        if (typeof entry === 'string') return entry; // Legacy format
        
        if (entry.type === 'cbm') {
            const { timestamp, groupNumber, inputs, calculatedOutputs } = entry;
            const { v1, v2, v3, v4 } = inputs;
            const { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc } = calculatedOutputs;
            
            return `üì¶ [${timestamp}] Ki·ªán ${groupNumber}:\n` +
                   `D√†i: ${df(v1)}, R·ªông: ${df(v2)}, Cao: ${df(v3)}, S·ªë ki·ªán: ${df(v4)}\n` +
                   `‚ú® CBM = ${df(cbm)}\n` +
                   `üöõ Kg (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}\n` +
                   `üöê Kg (VIN-ECO) = ${df(kgVinEco)}\n` +
                   `‚úàÔ∏è Kg (CPN) = ${df(kgCpn)}\n` +
                   `üöÄ Kg (H·ªéA T·ªêC) = ${df(kgHoaToc)}`;
        } else if (entry.type === 'province') {
            return `üèôÔ∏è [${entry.timestamp}] Ki·ªÉm tra t·ªânh: ${entry.province} ‚Üí ${entry.result}`;
        } else if (entry.type === 'shipping') {
            const { timestamp, data } = entry;
            const { tinh, huyen, vung, tuyen, trongLuong, danhSachDichVu } = data;
            
            let result = `üí∞ [${timestamp}] T√≠nh c∆∞·ªõc ph√≠:\n`;
            result += `üìç ${huyen}, ${tinh} (${vung} - ${tuyen})\n`;
            result += `‚öñÔ∏è Tr·ªçng l∆∞·ª£ng: ${trongLuong} kg\n`;
            result += `\nüìä B·∫£ng gi√°:\n`;
            
            danhSachDichVu.forEach(dichVu => {
                if (dichVu.disabled) {
                    result += `${dichVu.icon} ${dichVu.ten}: Kh√¥ng √°p d·ª•ng (${dichVu.lyDo})\n`;
                } else {
                    result += `${dichVu.icon} ${dichVu.ten}: ${dichVu.tongCuoc.toLocaleString('vi-VN')} ƒë (${dichVu.thoiGian})\n`;
                }
            });
            
            return result.trim();
        }
        return JSON.stringify(entry);
    };
    
    const renderHistory = () => {
        if (history.length === 0) {
            historyListDiv.innerHTML = '<p>üìã L·ªäCH S·ª¨ T√çNH TO√ÅN:\n\nCh∆∞a c√≥ d·ªØ li·ªáu t√≠nh to√°n n√†o.</p>';
            pageInfoSpan.textContent = 'Trang 1/1';
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = true;
            return;
        }
        
        // T√≠nh to√°n ph√¢n trang
        totalPages = Math.ceil(history.length / itemsPerPage) || 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, history.length);
        
        let html = `<div class="history-header">üìã L·ªäCH S·ª¨ T√çNH TO√ÅN</div>`;
        html += `<div class="history-stats">üìä Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} tr√™n t·ªïng ${history.length} m·ª•c</div>`;
        
        // Hi·ªÉn th·ªã c√°c m·ª•c trong trang hi·ªán t·∫°i
        for (let i = startIndex; i < endIndex; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            html += `<div class="history-item">${formattedEntry.replace(/\n/g, '<br>')}</div>`;
        }
        
        historyListDiv.innerHTML = html;
        
        // C·∫≠p nh·∫≠t th√¥ng tin trang
        pageInfoSpan.textContent = `Trang ${currentPage}/${totalPages}`;
        prevPageBtn.disabled = currentPage <= 1;
        nextPageBtn.disabled = currentPage >= totalPages;
        
        // Cu·ªôn l√™n ƒë·∫ßu
        historyListDiv.scrollTop = 0;
    };

    const switchTab = (tabName) => {
        // Hide all tabs
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = $(`#${tabName}`);
        if (selectedTab) {
            selectedTab.classList.add('active');
        }
        
        // Update sidebar nav items
        sidebarNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update bottom nav items
        bottomNavItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
        
        // Update slide menu items
        slideMenuItems.forEach(item => {
            item.classList.toggle('active', item.dataset.tab === tabName);
        });
    };

    
    // --- CBM Calculator ---
    const renderCBM = (isNewGroup = false) => {
        let groupHtml = '';
        let totalCbm = 0, totalKgDuongBo = 0, totalKgVinEco = 0, totalKgCpn = 0, totalKgHoaToc = 0, totalPieces = 0;

        completedGroups.forEach((group, index) => {
            const [v1, v2, v3, v4] = group.nums;
            
            const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
            const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
            const kgVinEco = kgDuongBo;
            const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
            const kgHoaToc = kgCpn;

            totalCbm += cbm;
            totalKgDuongBo += kgDuongBo;
            totalKgVinEco += kgVinEco;
            totalKgCpn += kgCpn;
            totalKgHoaToc += kgHoaToc;
            totalPieces += v4;
            
            const isLast = isNewGroup && index === completedGroups.length - 1;

            groupHtml += `
                <div class="group-item${isLast ? ' new-item' : ''}" data-group-index="${index}">
                    <p class="group-title">‚òÄÔ∏è Ki·ªán ${group.groupNumber}:</p>
                    <p>D√†i: <span class="value">${df(v1)}</span></p>
                    <p>R·ªông: <span class="value">${df(v2)}</span></p>
                    <p>Cao: <span class="value">${df(v3)}</span></p>
                    <p>S·ªë ki·ªán: <span class="value">${df(v4)}</span></p>
                    <hr>
                    <p>‚ú® CBM ki·ªán ${group.groupNumber} = ${df(cbm)}, T·ªïng: ${df(totalCbm)}, S·ªë Ki·ªán: ${df(totalPieces)}</p>
                    <p>üöõ Kg ki·ªán ${group.groupNumber} (ƒê∆Ø·ªúNG B·ªò) = ${df(kgDuongBo)}, T·ªïng: ${df(totalKgDuongBo)}</p>
                    <p>üöê Kg ki·ªán ${group.groupNumber} (VIN-ECO) = ${df(kgVinEco)}, T·ªïng: ${df(totalKgVinEco)}</p>
                    <p>‚úàÔ∏è Kg ki·ªán ${group.groupNumber} (CPN) = ${df(kgCpn)}, T·ªïng: ${df(totalKgCpn)}</p>
                    <p>üöÄ Kg ki·ªán ${group.groupNumber} (H·ªéA T·ªêC) = ${df(kgHoaToc)}, T·ªïng: ${df(totalKgHoaToc)}</p>
                </div>`;
        });
        
        const labels = ["D√†i", "R·ªông", "Cao", "S·ªë ki·ªán"];
        if (cbmCurrentIndex > 1) {
            let currentInputHtml = '';
            for(let i=0; i < cbmCurrentIndex - 1; i++) {
                currentInputHtml += `${labels[i]}: <span class="value">${df(cbmBuffer[i])}</span>, `;
            }
            groupHtml += `<div class="group-item current-input"><strong>‚òÄÔ∏è Ki·ªán ${cbmCurrentGroup} (ƒëang nh·∫≠p):</strong><br>${currentInputHtml.slice(0, -2)}</div>`;
        }
        
        groupsDisplay.innerHTML = groupHtml || '<p class="empty-message">Ch∆∞a c√≥ l√¥ h√†ng n√†o.</p>';

        // Auto-scroll to show current input after every render (Mobile & PC)
        setTimeout(() => {
            if (mainContent) {
                // Smooth scroll to bottom
                mainContent.scrollTo({
                    top: mainContent.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }, 50);
    };
    
    const handleCBMInput = () => {
        const rawValue = sanitizeNumber(cbmInput.value);
        if (!rawValue) return;
        const value = parseFloat(rawValue);
        if (isNaN(value) || value <= 0) {
            cbmInput.style.animation = 'shake 0.5s';
            setTimeout(()=> cbmInput.style.animation = '', 500);
            cbmInput.value = "";
            return;
        }

        cbmBuffer[cbmCurrentIndex - 1] = value;
        cbmCurrentIndex++;

        if (cbmCurrentIndex > 4) {
            const newGroup = { groupNumber: cbmCurrentGroup, nums: [...cbmBuffer] };
            completedGroups.push(newGroup);
            saveGroupToHistory(newGroup);
            
            cbmCurrentGroup++;
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM(true);
        } else {
            saveState();
            renderCBM();
        }
        
        cbmInput.value = "";
        cbmInput.focus();
    };

    const saveState = () => {
        localStorage.setItem('vinTransCBMHistory', JSON.stringify(history));
        localStorage.setItem('vinTransCBMGroups', JSON.stringify(completedGroups));
    };
    
    const addToHistory = (entry) => {
        history.push(entry);
        saveState();
    };
    
    const saveGroupToHistory = (group) => {
        const [v1, v2, v3, v4] = group.nums;
        const cbm = ((v1 * v2 * v3 * v4) / 3000.0) / 333.0;
        const kgDuongBo = ((v1 * v2 * v3) / 4000.0) * v4;
        const kgVinEco = kgDuongBo;
        const kgCpn = ((v1 * v2 * v3) / 6000.0) * v4;
        const kgHoaToc = kgCpn;

        const historyEntry = {
            type: 'cbm',
            timestamp: new Date().toLocaleString('vi-VN'),
            groupNumber: group.groupNumber,
            inputs: { v1, v2, v3, v4 },
            calculatedOutputs: { cbm, kgDuongBo, kgVinEco, kgCpn, kgHoaToc }
        };
        addToHistory(historyEntry);
    };

    const handleBack1 = () => {
        if (cbmCurrentIndex > 1) {
            cbmCurrentIndex--;
            cbmBuffer[cbmCurrentIndex - 1] = 0;
            renderCBM();
            saveState();
        }
    };
    
    const handleBack2 = () => {
         if (cbmCurrentIndex > 1) {
            cbmBuffer = [0, 0, 0, 0];
            cbmCurrentIndex = 1;
            renderCBM();
            saveState();
        } else if (completedGroups.length > 0) {
            const lastGroupEl = $(`[data-group-index="${completedGroups.length - 1}"]`);
            if (lastGroupEl) {
                 if (confirm("X√≥a l√¥ h√†ng cu·ªëi c√πng?")) {
                    lastGroupEl.style.animation = 'fadeOutUp 0.4s ease-out forwards';
                    setTimeout(() => {
                        completedGroups.pop();
                        cbmCurrentGroup--;
                        saveState();
                        renderCBM();
                    }, 400);
                }
            }
        }
    };

    const handleReset = () => {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√°c l√¥ h√†ng?")) {
            groupsDisplay.style.animation = 'fadeOutUp 0.5s ease-out forwards';
            setTimeout(() => {
                completedGroups = [];
                cbmBuffer = [0, 0, 0, 0];
                cbmCurrentIndex = 1;
                cbmCurrentGroup = 1;
                saveState();
                renderCBM();
                groupsDisplay.style.animation = 'fadeIn 0.5s ease-in';
                 setTimeout(()=> groupsDisplay.style.animation = '', 500);
            }, 500);
        }
    };

    // --- PROVINCE CHECKER FUNCTIONS ---
    const removeAccents = (str) => {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ƒë/g, "d").replace(/ƒê/g, "D");
    };

    const checkProvince = () => {
        const sanitizedInput = sanitizeInput(provinceInput.value);
        const inputProvince = removeAccents(sanitizedInput.toLowerCase()).trim();
        const originalName = sanitizedInput.trim();

        if (inputProvince === "") {
            return;
        }

        let resultText = '';
        let resultClass = '';

        // Ki·ªÉm tra xem t·ªânh c√≥ trong danh s√°ch 63 t·ªânh kh√¥ng
        if (!allProvinces.includes(inputProvince)) {
            // Kh√¥ng c√≥ trong danh s√°ch ‚Üí Kh√¥ng t√¨m th·∫•y
            resultText = '‚ùì Kh√¥ng t√¨m th·∫•y';
            resultClass = '';
        } else if (hangBayProvinces.includes(inputProvince)) {
            // C√≥ trong danh s√°ch 32 t·ªânh H√†ng Bay
            resultText = '‚úàÔ∏è H√†ng Bay';
            resultClass = 'hang-bay';
        } else {
            // C√≥ trong 63 t·ªânh nh∆∞ng kh√¥ng ph·∫£i H√†ng Bay ‚Üí H√†ng B·ªô
            resultText = 'üöõ H√†ng B·ªô';
            resultClass = 'hang-bo';
        }

        // Get current time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });

        // Remove message if exists
        const message = provinceResultDiv.querySelector('.province-message');
        if (message) {
            message.remove();
        }

        // Create new item
        const item = document.createElement('div');
        item.className = `province-item ${resultClass}`;
        item.innerHTML = `
            <span class="time">[${timeStr}]</span>
            <span class="name">${originalName}</span>
            <span class="arrow">‚Üí</span>
            <span class="result">${resultText}</span>
        `;

        // Insert after header
        const header = provinceResultDiv.querySelector('.province-header');
        if (header && header.nextSibling) {
            provinceResultDiv.insertBefore(item, header.nextSibling);
        } else {
            provinceResultDiv.appendChild(item);
        }

        // Scroll to top to see new item
        provinceResultDiv.scrollTop = 0;

        // Add to history
        const historyEntry = {
            type: 'province',
            timestamp: now.toLocaleString('vi-VN'),
            province: originalName,
            result: resultText
        };
        addToHistory(historyEntry);

        // Clear input
        provinceInput.value = '';
    };

    const clearProvinceResults = () => {
        // Keep header, remove all items
        const header = provinceResultDiv.querySelector('.province-header');
        provinceResultDiv.innerHTML = '';
        if (header) {
            provinceResultDiv.appendChild(header);
        }
        // Add message back
        const message = document.createElement('div');
        message.className = 'province-message';
        message.textContent = 'Nh·∫≠p t√™n t·ªânh ƒë·ªÉ ki·ªÉm tra lo·∫°i v·∫≠n chuy·ªÉn.';
        provinceResultDiv.appendChild(message);
    };

    // --- SHIPPING CALCULATOR FUNCTIONS ---
    
    // Kh·ªüi t·∫°o dropdown t·ªânh
    const khoiTaoDropdownTinh = () => {
        if (!shippingTinhSelect) return;
        
        const danhSachTinh = Object.keys(duLieuTinh).sort((a, b) => {
            return duLieuTinh[a].ten.localeCompare(duLieuTinh[b].ten, 'vi');
        });
        
        danhSachTinh.forEach(maTinh => {
            const option = document.createElement('option');
            option.value = maTinh;
            option.textContent = duLieuTinh[maTinh].ten;
            shippingTinhSelect.appendChild(option);
        });
    };
    
    // C·∫≠p nh·∫≠t dropdown huy·ªán khi ch·ªçn t·ªânh
    const capNhatDropdownHuyen = () => {
        if (!shippingTinhSelect || !shippingHuyenSelect) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        
        // Reset dropdown huy·ªán
        shippingHuyenSelect.innerHTML = '<option value="">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>';
        
        if (!tinhDaChon || !duLieuHuyen[tinhDaChon]) {
            shippingHuyenSelect.disabled = true;
            return;
        }
        
        shippingHuyenSelect.disabled = false;
        
        // Th√™m c√°c huy·ªán
        duLieuHuyen[tinhDaChon].forEach(huyen => {
            const option = document.createElement('option');
            option.value = JSON.stringify(huyen); // L∆∞u c·∫£ object ƒë·ªÉ l·∫•y lo·∫°i tuy·∫øn
            option.textContent = huyen.ten;
            shippingHuyenSelect.appendChild(option);
        });
    };
    
    // T√≠nh gi√° cho VIN-TRUCK v√† VIN-ECO theo quy ƒë·ªãnh m·ªõi (2025)
    // Quy t·∫Øc: X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n S·ªê KG C√íN L·∫†I (W_d∆∞ = kg - 10)
    // Tr·∫£ v·ªÅ object ch·ª©a th√¥ng tin chi ti·∫øt ƒë·ªÉ hi·ªÉn th·ªã quy tr√¨nh t√≠nh to√°n
    const tinhGiaTheoBangMoi = (bangGia, kg, vung) => {
        // Gi√° 10kg ƒë·∫ßu ti√™n
        const gia10kgDau = bangGia[10][vung];
        
        // N·∫øu ‚â§ 10kg, ch·ªâ tr·∫£ v·ªÅ gi√° 10kg ƒë·∫ßu
        if (kg <= 10) {
            return {
                giaGoc: gia10kgDau,
                gia10kgDau: gia10kgDau,
                wDu: 0,
                donGiaKhung: 0,
                khungGiaTen: '‚â§ 10kg',
                tienPhanDu: 0
            };
        }
        
        // T√≠nh s·ªë kg c√≤n l·∫°i (W_d∆∞)
        const wDu = kg - 10;
        
        // X√°c ƒë·ªãnh khung gi√° d·ª±a tr√™n W_d∆∞ (KH√îNG ph·∫£i t·ªïng kg)
        // L∆∞u √Ω: "Tr√™n 10-50kg" = 11-50kg, "Tr√™n 50-100kg" = 51-100kg
        let donGiaKhung = 0;
        let khungGiaTen = '';
        
        if (wDu <= 40) { // 0 < W_d∆∞ ‚â§ 40 ‚Üí khung "Tr√™n 10 - 50 kg" (11-50kg)
            donGiaKhung = bangGia[50][vung];
            khungGiaTen = 'Tr√™n 10 - 50 kg (11-50kg)';
        } else if (wDu <= 90) { // 40 < W_d∆∞ ‚â§ 90 ‚Üí khung "Tr√™n 50 - 100 kg" (51-100kg)
            donGiaKhung = bangGia[100][vung];
            khungGiaTen = 'Tr√™n 50 - 100 kg (51-100kg)';
        } else if (wDu <= 290) { // 90 < W_d∆∞ ‚â§ 290 ‚Üí khung "Tr√™n 100 - 300 kg" (101-300kg)
            donGiaKhung = bangGia[300][vung];
            khungGiaTen = 'Tr√™n 100 - 300 kg (101-300kg)';
        } else if (wDu <= 490) { // 290 < W_d∆∞ ‚â§ 490 ‚Üí khung "Tr√™n 300 - 500 kg" (301-500kg)
            donGiaKhung = bangGia[500][vung];
            khungGiaTen = 'Tr√™n 300 - 500 kg (301-500kg)';
        } else if (wDu <= 990) { // 490 < W_d∆∞ ‚â§ 990 ‚Üí khung "Tr√™n 500 - 1000 kg" (501-1000kg)
            donGiaKhung = bangGia[1000][vung];
            khungGiaTen = 'Tr√™n 500 - 1000 kg (501-1000kg)';
        } else if (wDu <= 1990) { // 990 < W_d∆∞ ‚â§ 1990 ‚Üí khung "Tr√™n 1000 - 2000 kg" (1001-2000kg)
            donGiaKhung = bangGia[2000][vung];
            khungGiaTen = 'Tr√™n 1000 - 2000 kg (1001-2000kg)';
        } else { // W_d∆∞ > 1990 ‚Üí khung "Tr√™n 2000 kg" (2001kg tr·ªü l√™n)
            donGiaKhung = bangGia.max[vung];
            khungGiaTen = 'Tr√™n 2000 kg (2001kg+)';
        }
        
        // T√≠nh ti·ªÅn ph·∫ßn d∆∞: W_d∆∞ √ó ƒêG_khung
        const tienPhanDu = wDu * donGiaKhung;
        
        // T√≠nh gi√° g·ªëc: P_10 + W_d∆∞ √ó ƒêG_khung
        const giaGoc = gia10kgDau + tienPhanDu;
        
        return {
            giaGoc: Math.round(giaGoc),
            gia10kgDau: gia10kgDau,
            wDu: wDu,
            donGiaKhung: donGiaKhung,
            khungGiaTen: khungGiaTen,
            tienPhanDu: Math.round(tienPhanDu)
        };
    };
    
    // Format s·ªë ti·ªÅn (helper function)
    const formatTien = (soTien) => {
        return soTien.toLocaleString('vi-VN') + ' ƒë';
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-EXPRESS
    const tinhGiaChiTietExpress = (kg, vung) => {
        const bangGia = bangGiaVinExpress;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 1) {
            giaCoBan = bangGia[1][vung];
            chiTiet.buoc1 = `‚â§ 1kg: ${formatTien(bangGia[1][vung])}`;
            chiTiet.buoc2 = '';
        } else if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° chi ti·∫øt cho VIN-HOATOC
    const tinhGiaChiTietHoaToc = (kg, vung) => {
        const bangGia = bangGiaVinHoaToc;
        let giaCoBan = 0;
        let chiTiet = {
            giaCoBan: 0,
            buoc1: '',
            buoc2: '',
            kgVuot: 0,
            soBuoc: 0,
            tienBuoc: 0
        };
        
        if (kg <= 2) {
            giaCoBan = bangGia[2][vung];
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.buoc2 = '';
        } else {
            giaCoBan = bangGia[2][vung];
            const kgVuot = kg - 2;
            const soBuoc = Math.ceil(kgVuot / 0.5);
            const tienBuoc = soBuoc * bangGia.step[vung];
            giaCoBan += tienBuoc;
            
            chiTiet.buoc1 = `‚â§ 2kg: ${formatTien(bangGia[2][vung])}`;
            chiTiet.kgVuot = kgVuot;
            chiTiet.soBuoc = soBuoc;
            chiTiet.tienBuoc = tienBuoc;
            chiTiet.buoc2 = `Ph·∫ßn v∆∞·ª£t: ${kgVuot.toFixed(1)} kg √∑ 0.5 = ${soBuoc} b∆∞·ªõc √ó ${formatTien(bangGia.step[vung])} = ${formatTien(tienBuoc)}`;
        }
        
        chiTiet.giaCoBan = Math.round(giaCoBan);
        return chiTiet;
    };
    
    // T√≠nh gi√° cho EXPRESS v√† H·ªéA T·ªêC (gi·ªØ nguy√™n logic c≈©)
    const tinhGiaTheoBang = (bangGia, kg, vung) => {
        let giaCoBan = 0;
        
        // X·ª≠ l√Ω ri√™ng cho EXPRESS v√† H·ªéA T·ªêC (t√≠nh theo 0.5kg)
        if (bangGia === bangGiaVinExpress) {
            if (kg <= 1) {
                giaCoBan = bangGia[1][vung];
            } else if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        if (bangGia === bangGiaVinHoaToc) {
            if (kg <= 2) {
                giaCoBan = bangGia[2][vung];
            } else {
                giaCoBan = bangGia[2][vung];
                const kgVuot = kg - 2;
                const soBuoc = Math.ceil(kgVuot / 0.5);
                giaCoBan += soBuoc * bangGia.step[vung];
            }
            return giaCoBan;
        }
        
        // VIN-TRUCK v√† VIN-ECO s·ª≠ d·ª•ng h√†m m·ªõi
        return tinhGiaTheoBangMoi(bangGia, kg, vung);
    };
    
    // T√≠nh ph·ª• ph√≠ ngo·∫°i tuy·∫øn - d·ª±a tr√™n T·ªîNG S·ªê KG G·ªêC (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
    const tinhPhuPhiNgoaiTuyen = (giaCoBan, tongKgGoc, loaiTuyen) => {
        if (loaiTuyen === 'noi') return 0;
        
        // D·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
        if (tongKgGoc <= 100) {
            return Math.round(giaCoBan * 0.3); // ‚â§100kg: +30% (nh√¢n 1.3)
        } else if (tongKgGoc <= 200) {
            return Math.round(giaCoBan * 0.2); // 101-200kg: +20% (nh√¢n 1.2)
        } else {
            return Math.round(giaCoBan * 0.1); // ‚â•201kg: +10% (nh√¢n 1.1)
        }
    };
    
    // H√†m t√≠nh to√°n ch√≠nh
    const tinhToanCuocPhi = () => {
        // Validate input
        if (!shippingTinhSelect || !shippingHuyenSelect || !shippingWeightInput) return;
        
        const tinhDaChon = shippingTinhSelect.value;
        const huyenJson = shippingHuyenSelect.value;
        const kgInput = parseFloat(shippingWeightInput.value);
        
        // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
        if (!tinhDaChon) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!');
            shippingTinhSelect.focus();
            return;
        }
        
        if (!huyenJson) {
            alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!');
            shippingHuyenSelect.focus();
            return;
        }
        
        if (!kgInput || kgInput <= 0) {
            alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p tr·ªçng l∆∞·ª£ng h·ª£p l·ªá (> 0 kg)!');
            shippingWeightInput.focus();
            return;
        }
        
        // Parse d·ªØ li·ªáu
        const huyen = JSON.parse(huyenJson);
        const vung = duLieuTinh[tinhDaChon].vung;
        const loaiTuyen = huyen.loai;
        
        // T√≠nh to√°n cho 4 d·ªãch v·ª•
        const danhSachKetQua = [];
        
        // L∆∞u th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n (cho VIN-TRUCK v√† VIN-ECO)
        let chiTietQuyTrinh = null;
        
        // 1. VIN-TRUCK (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025)
        const chiTietTruck = tinhGiaTheoBangMoi(bangGiaVinTruck, kgInput, vung);
        const giaGocTruck = chiTietTruck.giaGoc;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATTruck = Math.round(giaGocTruck * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenTruck = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenTruck = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenTruck = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenTruck = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongTruck = Math.round(sauNhiLieuVATTruck * heSoNgoaiTuyenTruck);
        const phuPhiXangVATTruck = sauNhiLieuVATTruck - giaGocTruck;
        const phuPhiNgoaiTuyenTruck = loaiTuyen === 'ngoai' ? tongTruck - sauNhiLieuVATTruck : 0;
        
        // L∆∞u chi ti·∫øt quy tr√¨nh t√≠nh to√°n (d√πng cho VIN-TRUCK l√†m m·∫´u)
        chiTietQuyTrinh = {
            gia10kgDau: chiTietTruck.gia10kgDau,
            wDu: chiTietTruck.wDu,
            donGiaKhung: chiTietTruck.donGiaKhung,
            khungGiaTen: chiTietTruck.khungGiaTen || '‚â§ 10kg',
            tienPhanDu: chiTietTruck.tienPhanDu,
            giaGoc: giaGocTruck,
            sauNhiLieuVAT: sauNhiLieuVATTruck,
            tongCuoc: tongTruck
        };
        
        danhSachKetQua.push({
            ten: "VIN-TRUCK (ƒê∆∞·ªùng B·ªô)",
            icon: "üöõ",
            giaCoBan: giaGocTruck,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenTruck,
            phuPhiXangVAT: phuPhiXangVATTruck,
            tongCuoc: tongTruck,
            thoiGian: thoiGianGiaoHang["VIN-TRUCK"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinh,
            loaiDichVu: 'truck'
        });
        
        // 2. VIN-ECO (√Åp d·ª•ng quy ƒë·ªãnh m·ªõi 2025, hi·ªÉn th·ªã nh∆∞ng disabled n·∫øu < 30kg)
        if (kgInput >= 30) {
            const chiTietEco = tinhGiaTheoBangMoi(bangGiaVinEco, kgInput, vung);
            const giaGocEco = chiTietEco.giaGoc;
            // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
            const sauNhiLieuVATEco = Math.round(giaGocEco * 1.32);
            // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
            let heSoNgoaiTuyenEco = 1;
            if (loaiTuyen === 'ngoai') {
                if (kgInput <= 100) {
                    heSoNgoaiTuyenEco = 1.3; // ‚â§100kg: +30%
                } else if (kgInput <= 200) {
                    heSoNgoaiTuyenEco = 1.2; // 101-200kg: +20%
                } else {
                    heSoNgoaiTuyenEco = 1.1; // ‚â•201kg: +10%
                }
            }
            const tongEco = Math.round(sauNhiLieuVATEco * heSoNgoaiTuyenEco);
            const phuPhiXangVATEco = sauNhiLieuVATEco - giaGocEco;
            const phuPhiNgoaiTuyenEco = loaiTuyen === 'ngoai' ? tongEco - sauNhiLieuVATEco : 0;
            
            const chiTietQuyTrinhEco = {
                gia10kgDau: chiTietEco.gia10kgDau,
                wDu: chiTietEco.wDu,
                donGiaKhung: chiTietEco.donGiaKhung,
                khungGiaTen: chiTietEco.khungGiaTen || '‚â§ 10kg',
                tienPhanDu: chiTietEco.tienPhanDu,
                giaGoc: giaGocEco,
                sauNhiLieuVAT: sauNhiLieuVATEco,
                tongCuoc: tongEco
            };
            
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: giaGocEco,
                phuPhiNgoaiTuyen: phuPhiNgoaiTuyenEco,
                phuPhiXangVAT: phuPhiXangVATEco,
                tongCuoc: tongEco,
                thoiGian: thoiGianGiaoHang["VIN-ECO"][vung],
                disabled: false,
                chiTietQuyTrinh: chiTietQuyTrinhEco,
                loaiDichVu: 'eco'
            });
        } else {
            // Hi·ªÉn th·ªã card b·ªã v√¥ hi·ªáu h√≥a
            danhSachKetQua.push({
                ten: "VIN-ECO (Ti·∫øt Ki·ªám)",
                icon: "üöê",
                giaCoBan: 0,
                phuPhiNgoaiTuyen: 0,
                phuPhiXangVAT: 0,
                tongCuoc: 0,
                thoiGian: "N/A",
                disabled: true,
                lyDo: "Y√™u c·∫ßu t·ªëi thi·ªÉu 30kg"
            });
        }
        
        // 3. VIN-EXPRESS
        const chiTietExpress = tinhGiaChiTietExpress(kgInput, vung);
        const giaGocExpress = chiTietExpress.giaCoBan;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATExpress = Math.round(giaGocExpress * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenExpress = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenExpress = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenExpress = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenExpress = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongExpress = Math.round(sauNhiLieuVATExpress * heSoNgoaiTuyenExpress);
        const phuPhiXangVATExpress = sauNhiLieuVATExpress - giaGocExpress;
        const phuPhiNgoaiTuyenExpress = loaiTuyen === 'ngoai' ? tongExpress - sauNhiLieuVATExpress : 0;
        
        const chiTietQuyTrinhExpress = {
            ...chiTietExpress,
            giaCoBan: giaGocExpress,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenExpress,
            sauNhiLieuVAT: sauNhiLieuVATExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress
        };
        
        danhSachKetQua.push({
            ten: "VIN-EXPRESS (Chuy·ªÉn Ph√°t Nhanh)",
            icon: "‚úàÔ∏è",
            giaCoBan: giaExpress,
            phuPhiNgoaiTuyen: phuPhiExpress,
            phuPhiXangVAT: phuPhiXangVATExpress,
            tongCuoc: tongExpress,
            thoiGian: thoiGianGiaoHang["VIN-EXPRESS"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhExpress,
            loaiDichVu: 'express'
        });
        
        // 4. VIN-HOATOC
        const chiTietHoaToc = tinhGiaChiTietHoaToc(kgInput, vung);
        const giaGocHoaToc = chiTietHoaToc.giaCoBan;
        // Nh√¢n h·ªá s·ªë 1.32 (nhi√™n li·ªáu & VAT) tr∆∞·ªõc - B·∫ÆT BU·ªòC cho t·∫•t c·∫£ d·ªãch v·ª•
        const sauNhiLieuVATHoaToc = Math.round(giaGocHoaToc * 1.32);
        // Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn sau (n·∫øu ngo·∫°i tuy·∫øn) - d·ª±a tr√™n T·ªîNG KG G·ªêC
        let heSoNgoaiTuyenHoaToc = 1;
        if (loaiTuyen === 'ngoai') {
            if (kgInput <= 100) {
                heSoNgoaiTuyenHoaToc = 1.3; // ‚â§100kg: +30%
            } else if (kgInput <= 200) {
                heSoNgoaiTuyenHoaToc = 1.2; // 101-200kg: +20%
            } else {
                heSoNgoaiTuyenHoaToc = 1.1; // ‚â•201kg: +10%
            }
        }
        const tongHoaToc = Math.round(sauNhiLieuVATHoaToc * heSoNgoaiTuyenHoaToc);
        const phuPhiXangVATHoaToc = sauNhiLieuVATHoaToc - giaGocHoaToc;
        const phuPhiNgoaiTuyenHoaToc = loaiTuyen === 'ngoai' ? tongHoaToc - sauNhiLieuVATHoaToc : 0;
        
        const chiTietQuyTrinhHoaToc = {
            ...chiTietHoaToc,
            giaCoBan: giaGocHoaToc,
            phuPhiNgoaiTuyen: phuPhiNgoaiTuyenHoaToc,
            sauNhiLieuVAT: sauNhiLieuVATHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc
        };
        
        danhSachKetQua.push({
            ten: "VIN-HOATOC (H·ªèa T·ªëc)",
            icon: "üöÄ",
            giaCoBan: giaHoaToc,
            phuPhiNgoaiTuyen: phuPhiHoaToc,
            phuPhiXangVAT: phuPhiXangVATHoaToc,
            tongCuoc: tongHoaToc,
            thoiGian: thoiGianGiaoHang["VIN-HOATOC"][vung],
            disabled: false,
            chiTietQuyTrinh: chiTietQuyTrinhHoaToc,
            loaiDichVu: 'hoatoc'
        });
        
        // T·∫°o object k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß
        const ketQua = {
            tinh: duLieuTinh[tinhDaChon].ten,
            huyen: huyen.ten,
            vung: duLieuTinh[tinhDaChon].vungHienThi, // Hi·ªÉn th·ªã v√πng ƒë√∫ng (N·ªôi T·ªânh, V√πng 1-8)
            vungGoc: vung, // Gi·ªØ v√πng g·ªëc (index 0-8) ƒë·ªÉ t√≠nh to√°n
            tuyen: loaiTuyen === 'noi' ? 'N·ªôi tuy·∫øn' : 'Ngo·∫°i tuy·∫øn',
            trongLuong: kgInput,
            danhSachDichVu: danhSachKetQua,
            chiTietQuyTrinh: chiTietQuyTrinh // Th√¥ng tin chi ti·∫øt quy tr√¨nh t√≠nh to√°n
        };
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        hienThiKetQuaCuocPhi(ketQua);
        
        // L∆∞u v√†o l·ªãch s·ª≠
        luuLichSuCuocPhi(ketQua);
    };
    
    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    const hienThiKetQuaCuocPhi = (ketQua) => {
        if (!shippingResultDiv) return;
        
        let html = '';
        
        // Header th√¥ng tin chung
        html += `
            <div class="result-header">
                <div class="result-title">üí∞ K·∫æT QU·∫¢ T√çNH C∆Ø·ªöC PH√ç</div>
                <div class="result-info">
                    <div class="info-item">
                        <span class="info-label">üìç ƒêi·ªÉm ƒë·∫øn:</span>
                        <span class="info-value">${ketQua.huyen}, ${ketQua.tinh}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">üó∫Ô∏è V√πng:</span>
                        <span class="info-value">${ketQua.vung} - ${ketQua.tuyen}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</span>
                        <span class="info-value">${ketQua.trongLuong} kg</span>
                    </div>
                </div>
            </div>
        `;
        
        // H√†m helper ƒë·ªÉ render quy tr√¨nh t√≠nh to√°n cho t·ª´ng d·ªãch v·ª•
        const renderQuyTrinhTinhToan = (dichVu, ketQua) => {
            if (!dichVu.chiTietQuyTrinh || dichVu.disabled) return '';
            
            const ct = dichVu.chiTietQuyTrinh;
            let html = '';
            
            if (dichVu.loaiDichVu === 'truck' || dichVu.loaiDichVu === 'eco') {
                // VIN-TRUCK v√† VIN-ECO
                if (ketQua.trongLuong > 10) {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ª´ 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value">T·ªïng tr·ªçng l∆∞·ª£ng: <strong>${ketQua.trongLuong} kg</strong> - 10 kg = <strong>${ct.wDu} kg</strong> (s·ªë kg c√≤n l·∫°i)</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Gi√° 10kg ƒë·∫ßu ti√™n:</div>
                                    <div class="step-value"><strong>${formatTien(ct.gia10kgDau)}</strong> (theo b·∫£ng gi√° ${ketQua.vung})</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh khung gi√° cho ${ct.wDu} kg c√≤n l·∫°i:</div>
                                    <div class="step-value">Khung: <strong>${ct.khungGiaTen}</strong> ‚Üí ƒê∆°n gi√°: <strong>${formatTien(ct.donGiaKhung)}/kg</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh ti·ªÅn ph·∫ßn d∆∞:</div>
                                    <div class="step-value">${ct.wDu} kg √ó ${formatTien(ct.donGiaKhung)} = <strong>${formatTien(ct.tienPhanDu)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <div class="step-label">T√≠nh gi√° g·ªëc:</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} + ${formatTien(ct.tienPhanDu)} = <strong>${formatTien(ct.giaGoc)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.giaGoc)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? (() => {
                                // X√°c ƒë·ªãnh h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc
                                let heSoNgoaiTuyen = 1;
                                let heSoNgoaiTuyenText = '';
                                if (ketQua.trongLuong <= 100) {
                                    heSoNgoaiTuyen = 1.3;
                                    heSoNgoaiTuyenText = '1.3 (‚â§100kg: +30%)';
                                } else if (ketQua.trongLuong <= 200) {
                                    heSoNgoaiTuyen = 1.2;
                                    heSoNgoaiTuyenText = '1.2 (101-200kg: +20%)';
                                } else {
                                    heSoNgoaiTuyen = 1.1;
                                    heSoNgoaiTuyenText = '1.1 (‚â•201kg: +10%)';
                                }
                                return `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó ${heSoNgoaiTuyenText}):</div>
                                    <div class="step-value">T·ªïng kg g·ªëc: <strong>${ketQua.trongLuong} kg</strong> ‚Üí ${formatTien(ct.sauNhiLieuVAT)} √ó ${heSoNgoaiTuyen} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `;
                            })() : `
                            <div class="process-step">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                } else {
                    html = `
                        <div class="process-steps">
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                    <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-label">Tr·ªçng l∆∞·ª£ng ‚â§ 10kg:</div>
                                    <div class="step-value">√Åp d·ª•ng gi√° tr·ªçn g√≥i 10kg ƒë·∫ßu: <strong>${formatTien(ct.gia10kgDau)}</strong></div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                    <div class="step-value">${formatTien(ct.gia10kgDau)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                                </div>
                            </div>
                            ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? (() => {
                                // X√°c ƒë·ªãnh h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc
                                let heSoNgoaiTuyen = 1;
                                let heSoNgoaiTuyenText = '';
                                if (ketQua.trongLuong <= 100) {
                                    heSoNgoaiTuyen = 1.3;
                                    heSoNgoaiTuyenText = '1.3 (‚â§100kg: +30%)';
                                } else if (ketQua.trongLuong <= 200) {
                                    heSoNgoaiTuyen = 1.2;
                                    heSoNgoaiTuyenText = '1.2 (101-200kg: +20%)';
                                } else {
                                    heSoNgoaiTuyen = 1.1;
                                    heSoNgoaiTuyenText = '1.1 (‚â•201kg: +10%)';
                                }
                                return `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó ${heSoNgoaiTuyenText}):</div>
                                    <div class="step-value">T·ªïng kg g·ªëc: <strong>${ketQua.trongLuong} kg</strong> ‚Üí ${formatTien(ct.sauNhiLieuVAT)} √ó ${heSoNgoaiTuyen} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `;
                            })() : `
                            <div class="process-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                    <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                                </div>
                            </div>
                            `}
                        </div>
                    `;
                }
            } else if (dichVu.loaiDichVu === 'express' || dichVu.loaiDichVu === 'hoatoc') {
                // VIN-EXPRESS v√† VIN-HOATOC
                // X√°c ƒë·ªãnh h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc
                let heSoNgoaiTuyen = 1;
                let heSoNgoaiTuyenText = '';
                if (ketQua.tuyen === 'Ngo·∫°i tuy·∫øn') {
                    if (ketQua.trongLuong <= 100) {
                        heSoNgoaiTuyen = 1.3;
                        heSoNgoaiTuyenText = '1.3 (‚â§100kg: +30%)';
                    } else if (ketQua.trongLuong <= 200) {
                        heSoNgoaiTuyen = 1.2;
                        heSoNgoaiTuyenText = '1.2 (101-200kg: +20%)';
                    } else {
                        heSoNgoaiTuyen = 1.1;
                        heSoNgoaiTuyenText = '1.1 (‚â•201kg: +10%)';
                    }
                }
                
                html = `
                    <div class="process-steps">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-label">X√°c ƒë·ªãnh v√πng v√† tuy·∫øn:</div>
                                <div class="step-value">${ketQua.huyen}, ${ketQua.tinh} ‚Üí <strong>${ketQua.vung}</strong> - <strong>${ketQua.tuyen}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh gi√° c∆° s·ªü:</div>
                                <div class="step-value">${ct.buoc1}</div>
                            </div>
                        </div>
                        ${ct.buoc2 ? `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">T√≠nh ph·∫ßn v∆∞·ª£t:</div>
                                <div class="step-value">${ct.buoc2}</div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">T·ªïng gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó ${heSoNgoaiTuyenText}):</div>
                                <div class="step-value">T·ªïng kg g·ªëc: <strong>${ketQua.trongLuong} kg</strong> ‚Üí ${formatTien(ct.sauNhiLieuVAT)} √ó ${heSoNgoaiTuyen} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">6</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                        ` : `
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-label">Gi√° c∆° s·ªü:</div>
                                <div class="step-value"><strong>${formatTien(ct.giaCoBan)}</strong></div>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë nhi√™n li·ªáu & VAT (√ó 1.32):</div>
                                <div class="step-value">${formatTien(ct.giaCoBan)} √ó 1.32 = <strong>${formatTien(ct.sauNhiLieuVAT)}</strong></div>
                            </div>
                        </div>
                        ${ketQua.tuyen === 'Ngo·∫°i tuy·∫øn' ? `
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">Nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (√ó ${heSoNgoaiTuyenText}):</div>
                                <div class="step-value">T·ªïng kg g·ªëc: <strong>${ketQua.trongLuong} kg</strong> ‚Üí ${formatTien(ct.sauNhiLieuVAT)} √ó ${heSoNgoaiTuyen} = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        ` : `
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <div class="step-label">N·ªôi tuy·∫øn (kh√¥ng nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn):</div>
                                <div class="step-value">T·ªïng c∆∞·ªõc = <strong>${formatTien(ct.tongCuoc)}</strong></div>
                            </div>
                        </div>
                        `}
                        `}
                    </div>
                `;
            }
            
            return html || '';
        };
        
        // Quy tr√¨nh s·∫Ω hi·ªÉn th·ªã khi click v√†o service card (kh√¥ng hi·ªÉn th·ªã t·ª± ƒë·ªông)
        
        // Chi ti·∫øt t·ª´ng d·ªãch v·ª•
        html += '<div class="services-container">';
        
        ketQua.danhSachDichVu.forEach((dichVu, index) => {
            const isDisabled = dichVu.disabled === true;
            const hasQuyTrinh = !isDisabled && dichVu.chiTietQuyTrinh;
            html += `
                <div class="service-card ${isDisabled ? 'service-disabled' : ''} ${hasQuyTrinh ? 'service-clickable' : ''}" 
                     data-service-index="${index}" 
                     style="animation-delay: ${index * 0.1}s">
                    <div class="service-header">
                        <span class="service-icon">${dichVu.icon}</span>
                        <span class="service-name">${dichVu.ten}</span>
                        ${hasQuyTrinh ? '<span class="toggle-icon">‚ñº</span>' : ''}
                    </div>
                    <div class="service-body">
                        ${isDisabled ? `
                        <div class="service-disabled-notice">
                            <div class="disabled-icon">üö´</div>
                            <div class="disabled-text">Kh√¥ng √°p d·ª•ng</div>
                            <div class="disabled-reason">${dichVu.lyDo}</div>
                        </div>
                        ` : `
                        <div class="price-breakdown">
                            <div class="breakdown-title">üíµ CHI TI·∫æT GI√Å:</div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Gi√° c∆° s·ªü:</span>
                                <span class="breakdown-value">${formatTien(dichVu.giaCoBan)}</span>
                            </div>
                            ${dichVu.phuPhiNgoaiTuyen > 0 ? `
                            <div class="breakdown-item surcharge">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ v√πng xa:</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiNgoaiTuyen)}</span>
                            </div>` : ''}
                            <div class="breakdown-item">
                                <span class="breakdown-label">‚Ä¢ Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT (+20%):</span>
                                <span class="breakdown-value">+${formatTien(dichVu.phuPhiXangVAT)}</span>
                            </div>
                            <div class="breakdown-separator"></div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">‚Ä¢ T·ªîNG C∆Ø·ªöC:</span>
                                <span class="breakdown-value">${formatTien(dichVu.tongCuoc)}</span>
                            </div>
                        </div>
                        <div class="service-time">
                            <span class="time-icon">‚è±Ô∏è</span>
                            <span class="time-text">Th·ªùi gian: ${dichVu.thoiGian}</span>
                        </div>
                        ${hasQuyTrinh ? `
                        <div class="process-toggle-hint">
                            <span class="hint-icon">üëÜ</span>
                            <span class="hint-text">Nh·∫•p v√†o ƒë√¢y ƒë·ªÉ xem quy tr√¨nh t√≠nh to√°n chi ti·∫øt</span>
                        </div>
                        ` : ''}
                        `}
                    </div>
                    ${hasQuyTrinh ? `
                    <div class="calculation-process-detail" style="display: none;">
                        <div class="process-title">üìã QUY TR√åNH T√çNH TO√ÅN CHI TI·∫æT - ${dichVu.ten}</div>
                        ${renderQuyTrinhTinhToan(dichVu, ketQua)}
                    </div>
                    ` : ''}
                </div>
            `;
        });
        
        html += '</div>';
        
        // B·∫£ng so s√°nh
        html += `
            <div class="comparison-section">
                <div class="comparison-title">üìä B·∫¢NG SO S√ÅNH D·ªäCH V·ª§</div>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>D·ªãch v·ª•</th>
                                <th>T·ªïng c∆∞·ªõc</th>
                                <th>Th·ªùi gian</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        ketQua.danhSachDichVu.forEach(dichVu => {
            const isDisabled = dichVu.disabled === true;
            // T√™n ƒë·∫ßy ƒë·ªß cho b·∫£ng so s√°nh: Ti·∫øng Anh - Ti·∫øng Vi·ªát
            let tenHienThi = dichVu.ten;
            if (dichVu.ten.includes("VIN-TRUCK")) tenHienThi = "VIN-TRUCK - ƒê∆∞·ªùng B·ªô";
            else if (dichVu.ten.includes("VIN-ECO")) tenHienThi = "VIN-ECO - Ti·∫øt Ki·ªám";
            else if (dichVu.ten.includes("VIN-EXPRESS")) tenHienThi = "VIN-EXPRESS - Nhanh";
            else if (dichVu.ten.includes("VIN-HOATOC")) tenHienThi = "VIN-HOATOC - H·ªèa T·ªëc";
            
            html += `
                <tr class="${isDisabled ? 'row-disabled' : ''}">
                    <td><span class="table-icon">${dichVu.icon}</span> ${tenHienThi}</td>
                    <td class="price-cell">${isDisabled ? 'Kh√¥ng √°p d·ª•ng' : formatTien(dichVu.tongCuoc)}</td>
                    <td>${isDisabled ? dichVu.lyDo : dichVu.thoiGian}</td>
                </tr>
            `;
        });
        
        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;
        
        shippingResultDiv.innerHTML = html;
        shippingResultDiv.scrollTop = 0;
        
        // Th√™m event listener cho c√°c service card c√≥ th·ªÉ click
        const serviceCards = shippingResultDiv.querySelectorAll('.service-clickable');
        serviceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Kh√¥ng toggle n·∫øu click v√†o c√°c ph·∫ßn t·ª≠ con (button, input, etc.)
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;
                
                const detailDiv = this.querySelector('.calculation-process-detail');
                const toggleIcon = this.querySelector('.toggle-icon');
                
                if (detailDiv) {
                    const isHidden = detailDiv.style.display === 'none';
                    detailDiv.style.display = isHidden ? 'block' : 'none';
                    if (toggleIcon) {
                        toggleIcon.textContent = isHidden ? '‚ñ≤' : '‚ñº';
                    }
                    this.classList.toggle('process-expanded', isHidden);
                }
            });
        });
    };
    
    // L∆∞u v√†o l·ªãch s·ª≠
    const luuLichSuCuocPhi = (ketQua) => {
        const historyEntry = {
            type: 'shipping',
            timestamp: new Date().toLocaleString('vi-VN'),
            data: ketQua
        };
        addToHistory(historyEntry);
    };
    
    // Reset form
    const resetFormCuocPhi = () => {
        if (shippingTinhSelect) shippingTinhSelect.value = '';
        if (shippingHuyenSelect) {
            shippingHuyenSelect.innerHTML = '<option value="">-- Vui l√≤ng ch·ªçn T·ªânh tr∆∞·ªõc --</option>';
            shippingHuyenSelect.disabled = true;
        }
        if (shippingWeightInput) shippingWeightInput.value = '';
        if (shippingResultDiv) {
            shippingResultDiv.innerHTML = '<div class="result-message">üì¶ Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† nh·∫•n "T√≠nh C∆∞·ªõc Ph√≠" ƒë·ªÉ xem k·∫øt qu·∫£.</div>';
        }
        if (shippingTinhSelect) shippingTinhSelect.focus();
    };
    
    // Kh·ªüi t·∫°o Shipping Calculator
    const khoiTaoCuocPhi = () => {
        khoiTaoDropdownTinh();
        
        if (shippingTinhSelect) {
            shippingTinhSelect.addEventListener('change', capNhatDropdownHuyen);
        }
        
        if (btnCalculateShipping) {
            btnCalculateShipping.addEventListener('click', tinhToanCuocPhi);
        }
        
        if (btnResetShipping) {
            btnResetShipping.addEventListener('click', resetFormCuocPhi);
        }
        
        // Cho ph√©p Enter ƒë·ªÉ t√≠nh to√°n
        if (shippingWeightInput) {
            shippingWeightInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') tinhToanCuocPhi();
            });
        }
    };

    // --- EVENT LISTENERS ---
    // Hamburger menu - Click to open menu
    if (hamburgerMenu) {
        hamburgerMenu.addEventListener('click', (e) => {
            e.stopPropagation();
            openSlideMenu();
        });
    }
    
    // Click anywhere on screen to show hamburger and restart timer
    document.addEventListener('click', (e) => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    // Touch/move events to show hamburger
    document.addEventListener('touchstart', () => {
        if (hamburgerMenu && !slideMenu.classList.contains('open')) {
            showHamburger();
        }
    });
    
    if (closeMenuBtn) {
        closeMenuBtn.addEventListener('click', closeSlideMenu);
    }
    if (menuOverlay) {
        menuOverlay.addEventListener('click', closeSlideMenu);
    }
    slideMenuItems.forEach(item => {
        item.addEventListener('click', () => handleSlideMenuItemClick(item.dataset.tab));
    });
    
    // Sidebar navigation
    sidebarNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    
    // Bottom navigation
    bottomNavItems.forEach(item => {
        item.addEventListener('click', () => switchTab(item.dataset.tab));
    });
    cbmInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') handleCBMInput(); });
    btnBack1.addEventListener('click', handleBack1);
    btnBack2.addEventListener('click', handleBack2);
    btnReset.addEventListener('click', handleReset);
    
    // --- HISTORY EVENT LISTENERS ---
    clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryOptions();
    });
    
    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderHistory();
        }
    });
    
    nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
            currentPage++;
            renderHistory();
        }
    });
    
    searchHistoryInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            searchByDate();
        }
    });
    
    clearSearchBtn.addEventListener('click', () => {
        searchHistoryInput.value = '';
        currentPage = 1;
        renderHistory();
    });
    
    provinceInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') checkProvince(); });
    btnClearProvince.addEventListener('click', clearProvinceResults);
    
    // --- HISTORY HELPER FUNCTIONS ---
    const showClearHistoryOptions = () => {
        const options = ['X√≥a t·∫•t c·∫£', 'X√≥a theo th√°ng', 'H·ªßy'];
        const choice = prompt('Ch·ªçn ph∆∞∆°ng th·ª©c x√≥a:\n1. X√≥a t·∫•t c·∫£\n2. X√≥a theo th√°ng\n3. H·ªßy\n\nNh·∫≠p s·ªë (1-3):');
        
        if (choice === '1') {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√≠nh to√°n?')) {
                history = [];
                completedGroups = [];
                currentPage = 1;
                saveState();
                renderHistory();
                alert('ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠');
            }
        } else if (choice === '2') {
            showMonthSelectionDialog();
        }
    };
    
    const showMonthSelectionDialog = () => {
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        const months = getMonthsFromHistory();
        if (months.length === 0) {
            alert('Kh√¥ng t√¨m th·∫•y th√°ng n√†o');
            return;
        }
        
        let monthList = 'Ch·ªçn th√°ng ƒë·ªÉ x√≥a:\n';
        months.forEach((month, index) => {
            monthList += `${index + 1}. ${month}\n`;
        });
        monthList += `${months.length + 1}. H·ªßy\n\nNh·∫≠p s·ªë:`;
        
        const choice = prompt(monthList);
        const choiceIndex = parseInt(choice) - 1;
        
        if (choiceIndex >= 0 && choiceIndex < months.length) {
            const selectedMonth = months[choiceIndex];
            if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ c·ªßa th√°ng ${selectedMonth}?`)) {
                deleteMonthHistory(selectedMonth);
            }
        }
    };
    
    const getMonthsFromHistory = () => {
        const months = new Set();
        history.forEach(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const monthYear = `${parts[1]}/${parts[2]}`; // MM/YYYY
                        months.add(monthYear);
                    }
                } catch (e) {}
            }
        });
        return Array.from(months).sort();
    };
    
    const deleteMonthHistory = (monthYear) => {
        history = history.filter(entry => {
            let timestamp = '';
            if (typeof entry === 'string') {
                const match = entry.match(/\[(\d{1,2}\/\d{1,2}\/\d{4})/); 
                if (match) timestamp = match[1];
            } else if (entry.timestamp) {
                timestamp = entry.timestamp;
            }
            
            if (timestamp) {
                try {
                    const parts = timestamp.split(/[\/\s:,]/);
                    if (parts.length >= 3) {
                        const entryMonthYear = `${parts[1]}/${parts[2]}`;
                        return entryMonthYear !== monthYear;
                    }
                } catch (e) {}
            }
            return true;
        });
        
        currentPage = 1;
        saveState();
        renderHistory();
        alert(`ƒê√£ x√≥a l·ªãch s·ª≠ th√°ng ${monthYear}`);
    };
    
    const searchByDate = () => {
        const searchDate = sanitizeInput(searchHistoryInput.value).trim();
        if (!searchDate) {
            alert('Vui l√≤ng nh·∫≠p ng√†y t√¨m ki·∫øm (dd/MM/yyyy)');
            return;
        }
        
        if (history.length === 0) {
            alert('L·ªãch s·ª≠ tr·ªëng');
            return;
        }
        
        // T√¨m v·ªã tr√≠ ƒë·∫ßu ti√™n ch·ª©a ng√†y
        let foundIndex = -1;
        for (let i = 0; i < history.length; i++) {
            const formattedEntry = formatHistoryEntry(history[i]);
            if (formattedEntry.includes(`[${searchDate}`)) {
                foundIndex = i;
                break;
            }
        }
        
        if (foundIndex !== -1) {
            const targetPage = Math.floor(foundIndex / itemsPerPage) + 1;
            currentPage = targetPage;
            renderHistory();
            alert(`ƒê√£ t√¨m th·∫•y ki·ªán ng√†y ${searchDate} (trang ${targetPage})`);
        } else {
            alert(`Kh√¥ng t√¨m th·∫•y ki·ªán n√†o v√†o ng√†y ${searchDate}`);
        }
    };

    // --- SETTINGS EVENT LISTENERS ---
    // Theme toggle button
    const themeToggle = $('#theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Theme buttons in settings
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.getAttribute('data-theme');
            applyTheme(theme);
            updateThemeButtons(theme);
            saveSettings();
        });
    });
    
    // Size buttons
    document.querySelectorAll('.size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applySize(size);
            updateSizeButtons(size);
            saveSettings();
        });
    });
    
    // Tab font size buttons
    document.querySelectorAll('.font-size-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const size = btn.getAttribute('data-size');
            applyTabFontSize(size);
            updateTabFontSizeButtons(size);
            localStorage.setItem('vinTransCBMTabSize', size);
        });
    });
    
    // Animations toggle
    const animationsToggle = $('#animations-toggle');
    if (animationsToggle) {
        animationsToggle.addEventListener('change', () => {
            applyAnimations(animationsToggle.checked);
            saveSettings();
        });
    }
    
    // Reset settings button
    const resetSettingsBtn = $('#reset-settings-btn');
    if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener('click', resetSettings);
    }
    
    // --- INIT ---
    loadSettings(); // Load theme and settings first
    renderCBM();
    renderHistory();
    khoiTaoCuocPhi(); // Kh·ªüi t·∫°o Shipping Calculator
    
    // Start with hamburger hidden
    if (hamburgerMenu) {
        hamburgerMenu.classList.add('hidden');
    }
    
    cbmInput.focus();
});

```

ƒêang ki·ªÉm tra l·ªói:


ƒê√£ c·∫≠p nh·∫≠t logic t√≠nh to√°n theo y√™u c·∫ßu. T√≥m t·∫Øt thay ƒë·ªïi:

## C√°c thay ƒë·ªïi ƒë√£ th·ª±c hi·ªán:

### 1. **Ph·ª• ph√≠ xƒÉng d·∫ßu & VAT**
   - T·∫•t c·∫£ d·ªãch v·ª• (VIN-TRUCK, VIN-ECO, VIN-EXPRESS, VIN-HOATOC) ƒë·ªÅu nh√¢n 1.32 tr∆∞·ªõc

### 2. **Ph·ª• ph√≠ ngo·∫°i tuy·∫øn**
   - D·ª±a tr√™n t·ªïng kg g·ªëc (kh√¥ng tr·ª´ 10 hay tr·ª´ 2)
   - ‚â§100kg: nh√¢n 1.3 (+30%)
   - 101-200kg: nh√¢n 1.2 (+20%)
   - ‚â•201kg: nh√¢n 1.1 (+10%)

### 3. **B·∫£ng ph√¢n v√πng**
   - "Tr√™n 10-50kg" = 11-50kg
   - "Tr√™n 50-100kg" = 51-100kg
   - T∆∞∆°ng t·ª± cho c√°c khung kh√°c

### 4. **Quy tr√¨nh t√≠nh to√°n**
   - Hi·ªÉn th·ªã ƒë√∫ng h·ªá s·ªë ngo·∫°i tuy·∫øn d·ª±a tr√™n t·ªïng kg g·ªëc
   - Hi·ªÉn th·ªã r√µ r√†ng t·ª´ng b∆∞·ªõc: gi√° g·ªëc ‚Üí nh√¢n 1.32 ‚Üí nh√¢n h·ªá s·ªë ngo·∫°i tuy·∫øn (n·∫øu c√≥)

ƒê√£ ki·ªÉm tra, kh√¥ng c√≥ l·ªói. B·∫°n c√≥ th·ªÉ test l·∫°i v·ªõi c√°c tr∆∞·ªùng h·ª£p kh√°c nhau ƒë·ªÉ x√°c nh·∫≠n.

