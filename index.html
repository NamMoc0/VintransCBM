<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a73e8">
    <title>VinTransCBM - Web</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="style-new.css">
    <link rel="stylesheet" href="settings.css">
    <link rel="manifest" href="manifest.json">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div id="app">
        <!-- Mobile Hamburger Menu -->
        <button id="hamburger-menu" class="hamburger-menu" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        
        <!-- Theme Toggle Button -->
        <button id="theme-toggle" class="theme-toggle" aria-label="Chuyển đổi giao diện">
            <i data-lucide="sun" class="theme-icon sun-icon"></i>
            <i data-lucide="moon" class="theme-icon moon-icon"></i>
        </button>
        
        <!-- Mobile Slide Menu -->
        <div id="slide-menu" class="slide-menu">
            <div class="slide-menu-header">
                <span class="menu-title">Menu</span>
                <button id="close-menu" class="close-menu">&times;</button>
            </div>
            <nav class="slide-menu-nav">
                <button class="slide-menu-item active" data-tab="cbm-calculator">
                    <i data-lucide="calculator" class="menu-icon"></i>
                    <span class="menu-text">Tính Toán</span>
                </button>
                <button class="slide-menu-item" data-tab="history">
                    <i data-lucide="history" class="menu-icon"></i>
                    <span class="menu-text">Lịch Sử</span>
                </button>
                <button class="slide-menu-item" data-tab="province-checker">
                    <i data-lucide="map-pin" class="menu-icon"></i>
                    <span class="menu-text">Kiểm Tra Tỉnh</span>
                </button>
                <button class="slide-menu-item" data-tab="shipping-calculator">
                    <i data-lucide="truck" class="menu-icon"></i>
                    <span class="menu-text">Tính Cước Phí</span>
                </button>
                <button class="slide-menu-item" data-tab="settings">
                    <i data-lucide="settings" class="menu-icon"></i>
                    <span class="menu-text">Cài Đặt</span>
                </button>
            </nav>
        </div>
        <div id="menu-overlay" class="menu-overlay"></div>
        
        <!-- Desktop Header - REMOVED -->

        <!-- Desktop Sidebar Navigation -->
        <nav class="sidebar-nav">
            <button class="nav-item active" data-tab="cbm-calculator">
                <i data-lucide="calculator" class="nav-icon"></i>
                <span class="nav-text">Tính Toán</span>
            </button>
            <button class="nav-item" data-tab="history">
                <i data-lucide="history" class="nav-icon"></i>
                <span class="nav-text">Lịch Sử</span>
            </button>
            <button class="nav-item" data-tab="province-checker">
                <i data-lucide="map-pin" class="nav-icon"></i>
                <span class="nav-text">Kiểm Tra Tỉnh</span>
            </button>
            <button class="nav-item" data-tab="shipping-calculator">
                <i data-lucide="truck" class="nav-icon"></i>
                <span class="nav-text">Tính Cước Phí</span>
            </button>
            <button class="nav-item" data-tab="settings">
                <i data-lucide="settings" class="nav-icon"></i>
                <span class="nav-text">Cài Đặt</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Tab Tính CBM -->
            <div id="cbm-calculator" class="tab-content active">
                <div id="cbm-main-content">
                    <div id="groups-display"></div>
                </div>
                <div id="cbm-controls">
                    <div id="cbm-actions">
                        <button id="btn-back1">Quay Lại</button>
                        <button id="btn-back2">Biến Trước</button>
                        <button id="btn-reset">Xóa Tất Cả</button>
                    </div>
                    <div id="cbm-input-group">
                         <input type="number" id="cbm-input" placeholder="Nhập Số và Enter...">
                    </div>
                </div>
            </div>

            <!-- Tab Lịch sử -->
            <div id="history" class="tab-content">
                <div class="history-container">
                    <!-- Thanh tìm kiếm -->
                    <div class="search-bar">
                        <input type="text" id="search-history-input" placeholder="Tìm theo ngày (dd/MM/yyyy)...">
                        <button id="clear-search-button">Xóa Tìm</button>
                    </div>
                    
                    <!-- Hiển thị lịch sử -->
                    <div id="history-list">
                        <p>Chưa có lịch sử.</p>
                    </div>
                    
                    <!-- Phân trang -->
                    <div class="pagination-controls">
                        <button id="prev-page-button" disabled><i data-lucide="arrow-left"></i> Trước</button>
                        <span id="page-info">Trang 1/1</span>
                        <button id="next-page-button" disabled>Sau <i data-lucide="arrow-right"></i></button>
                    </div>
                    
                    <!-- Nút xóa -->
                    <div class="history-controls">
                        <button id="clear-history-button" class="btn-danger">Xóa Lịch Sử</button>
                    </div>
                </div>
            </div>

            <!-- Tab Kiểm Tra Tỉnh -->
            <div id="province-checker" class="tab-content">
                <div class="province-container">
                    <div class="province-input-section">
                        <input type="text" id="province-input" placeholder="Nhập tên tỉnh và Enter...">
                        <button id="btn-clear-province">Xóa Kết Quả</button>
                    </div>
                    <div id="province-result" class="province-result">
                        <div class="province-header"><i data-lucide="building-2"></i> KIỂM TRA TỈNH THÀNH</div>
                        <div class="province-message">Nhập tên tỉnh để kiểm tra loại vận chuyển.</div>
                    </div>
                </div>
            </div>

            <!-- Tab Tính Cước Phí -->
            <div id="shipping-calculator" class="tab-content">
                <div class="shipping-calculator-container">
                    <!-- Form nhập liệu -->
                    <div class="shipping-form">
                        <div class="form-header"><i data-lucide="truck"></i> TÍNH CƯỚC VẬN CHUYỂN</div>
                        
                        <div class="form-group">
                            <label for="shipping-tinh-select">Tỉnh/Thành phố đến:</label>
                            <select id="shipping-tinh-select">
                                <option value="">-- Chọn Tỉnh/Thành phố --</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="shipping-huyen-select">Quận/Huyện đến:</label>
                            <select id="shipping-huyen-select" disabled>
                                <option value="">-- Vui lòng chọn Tỉnh trước --</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="shipping-weight-input">Trọng lượng (kg):</label>
                            <input type="number" id="shipping-weight-input" placeholder="Nhập số kg..." min="0.1" step="0.1">
                        </div>
                        
                        <div class="form-actions">
                            <button id="btn-calculate-shipping" class="btn-primary">Tính Cước Phí</button>
                            <button id="btn-reset-shipping" class="btn-secondary">Xóa Form</button>
                        </div>
                    </div>
                    
                    <!-- Kết quả -->
                    <div id="shipping-result" class="shipping-result">
                        <div class="result-message">
                            <i data-lucide="package"></i> Vui lòng điền đầy đủ thông tin và nhấn "Tính Cước Phí" để xem kết quả.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Cài Đặt -->
            <div id="settings" class="tab-content">
                <div class="settings-container">
                    <div class="settings-header"><i data-lucide="settings"></i> CÀI ĐẶT GIAO DIỆN</div>
                    
                    <!-- Giao diện -->
                    <div class="settings-section">
                        <h3 class="section-title"><i data-lucide="palette"></i> Giao diện</h3>
                        <div class="setting-item">
                            <label class="setting-label">Chủ đề</label>
                            <div class="theme-switcher">
                                <button class="theme-btn light-theme-btn" data-theme="light">
                                    <i data-lucide="sun" class="theme-btn-icon"></i>
                                    <span class="theme-btn-text">Sáng</span>
                                </button>
                                <button class="theme-btn dark-theme-btn" data-theme="dark">
                                    <i data-lucide="moon" class="theme-btn-icon"></i>
                                    <span class="theme-btn-text">Tối</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Kích thước -->
                    <div class="settings-section">
                        <h3 class="section-title"><i data-lucide="ruler"></i> Kích thước</h3>
                        <div class="setting-item">
                            <label class="setting-label">Cỡ chữ & Giao diện</label>
                            <div class="size-switcher">
                                <button class="size-btn" data-size="tiny">Siêu nhỏ</button>
                                <button class="size-btn" data-size="small">Nhỏ</button>
                                <button class="size-btn active" data-size="medium">Vừa</button>
                                <button class="size-btn" data-size="large">Lớn</button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label">Cỡ chữ tab Tính toán & Lịch sử</label>
                            <div class="font-size-switcher">
                                <button class="font-size-btn" data-size="tiny">Siêu nhỏ</button>
                                <button class="font-size-btn" data-size="small">Nhỏ</button>
                                <button class="font-size-btn active" data-size="medium">Vừa</button>
                                <button class="font-size-btn" data-size="large">Lớn</button>
                            </div>
                        </div>
                    </div>
                    
                                        
                    <!-- Hiệu ứng -->
                    <div class="settings-section">
                        <h3 class="section-title"><i data-lucide="sparkles"></i> Hiệu ứng</h3>
                        <div class="setting-item">
                            <label class="setting-label">Chuyển động mượt</label>
                            <label class="switch">
                                <input type="checkbox" id="animations-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- Ứng dụng -->
                    <div class="settings-section">
                        <h3 class="section-title"><i data-lucide="app-window"></i> Ứng dụng</h3>
                        <div class="setting-item">
                            <label class="setting-label">Thêm vào màn hình chính</label>
                            <button id="install-app-btn" class="btn-primary">Cài đặt</button>
                        </div>
                    </div>
                    
                    <!-- Nút reset -->
                    <div class="settings-actions">
                        <button id="reset-settings-btn" class="btn-secondary">Khôi phục mặc định</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Mobile Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="bottom-nav-item active" data-tab="cbm-calculator">
                <i data-lucide="calculator" class="bottom-nav-icon"></i>
                <span class="bottom-nav-text">Tính Toán</span>
            </button>
            <button class="bottom-nav-item" data-tab="history">
                <i data-lucide="history" class="bottom-nav-icon"></i>
                <span class="bottom-nav-text">Lịch Sử</span>
            </button>
            <button class="bottom-nav-item" data-tab="province-checker">
                <i data-lucide="map-pin" class="bottom-nav-icon"></i>
                <span class="bottom-nav-text">Kiểm Tra</span>
            </button>
            <button class="bottom-nav-item" data-tab="shipping-calculator">
                <i data-lucide="truck" class="bottom-nav-icon"></i>
                <span class="bottom-nav-text">Cước Phí</span>
            </button>
        </nav>
    </div>
    <script src="script.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js', { scope: '/' }).then(registration => {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
          }, err => {
            console.log('ServiceWorker registration failed: ', err);
          });
        });
      }
    </script>
</body>
</html>